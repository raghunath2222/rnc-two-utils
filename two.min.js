"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AC_COLORS_RGB_String=exports.AC_COLORS_RGB_3JS=exports.AC_COLORS_DECIMAL=exports.ACColors=void 0;const ACColors=exports.ACColors=["#000000","#FF0000","#FFFF00","#00FF00","#00FFFF","#0000FF","#FF00FF","#FFFFFF","#414141","#808080","#FF0000","#FFAAAA","#BD0000","#BD7E7E","#810000","#815656","#680000","#684545","#4F0000","#4F3535","#FF3F00","#FFBFAA","#BD2E00","#BD8D7E","#811F00","#816056","#681900","#684E45","#4F1300","#4F3B35","#FF7F00","#FFD4AA","#BD5E00","#BD9D7E","#814000","#816B56","#683400","#685645","#4F2700","#4F4235","#FFBF00","#FFEAAA","#BD8D00","#BDAD7E","#816000","#817656","#684E00","#685F45","#4F3B00","#4F4935","#FFFF00","#FFFFAA","#BDBD00","#BDBD7E","#818100","#818156","#686800","#686845","#4F4F00","#4F4F35","#BFFF00","#EAFFAA","#8DBD00","#ADBD7E","#608100","#768156","#4E6800","#5F6845","#3B4F00","#494F35","#7FFF00","#D4FFAA","#5EBD00","#9DBD7E","#408100","#6B8156","#346800","#566845","#274F00","#424F35","#3FFF00","#BFFFAA","#2EBD00","#8DBD7E","#1F8100","#608156","#196800","#4E6845","#134F00","#3B4F35","#00FF00","#AAFFAA","#00BD00","#7EBD7E","#008100","#568156","#006800","#456845","#004F00","#354F35","#00FF3F","#AAFFBF","#00BD2E","#7EBD8D","#00811F","#568160","#006819","#45684E","#004F13","#354F3B","#00FF7F","#AAFFD4","#00BD5E","#7EBD9D","#008140","#56816B","#006834","#456856","#004F27","#354F42","#00FFBF","#AAFFEA","#00BD8D","#7EBDAD","#008160","#568176","#00684E","#45685F","#004F3B","#354F49","#00FFFF","#AAFFFF","#00BDBD","#7EBDBD","#008181","#568181","#006868","#456868","#004F4F","#354F4F","#00BFFF","#AAEAFF","#008DBD","#7EADBD","#006081","#567681","#004E68","#455F68","#003B4F","#35494F","#007FFF","#AAD4FF","#005EBD","#7E9DBD","#004081","#566B81","#003468","#455668","#00274F","#35424F","#003FFF","#AABFFF","#002EBD","#7E8DBD","#001F81","#566081","#001968","#454E68","#00134F","#353B4F","#0000FF","#AAAAFF","#0000BD","#7E7EBD","#000081","#565681","#000068","#454568","#00004F","#35354F","#3F00FF","#BFAAFF","#2E00BD","#8D7EBD","#1F0081","#605681","#190068","#4E4568","#13004F","#3B354F","#7F00FF","#D4AAFF","#5E00BD","#9D7EBD","#400081","#6B5681","#340068","#564568","#27004F","#42354F","#BF00FF","#EAAAFF","#8D00BD","#AD7EBD","#600081","#765681","#4E0068","#5F4568","#3B004F","#49354F","#FF00FF","#FFAAFF","#BD00BD","#BD7EBD","#810081","#815681","#680068","#684568","#4F004F","#4F354F","#FF00BF","#FFAAEA","#BD008D","#BD7EAD","#810060","#815676","#68004E","#68455F","#4F003B","#4F3549","#FF007F","#FFAAD4","#BD005E","#BD7E9D","#810040","#81566B","#680034","#684556","#4F0027","#4F3542","#FF003F","#FFAABF","#BD002E","#BD7E8D","#81001F","#815660","#680019","#68454E","#4F0013","#4F353B","#333333","#505050","#696969","#828282","#BEBEBE","#FFFFFF"],AC_COLORS_DECIMAL=exports.AC_COLORS_DECIMAL=[0,16711680,16776960,65280,65535,255,16711935,16777215,8421504,12632256,16711680,16744319,13369344,13395558,10027008,10046540,8323072,8339263,4980736,4990502,16727808,16752511,13382400,13401958,10036736,10051404,8331008,8343359,4985600,4992806,16744192,16760703,13395456,13408614,10046464,10056268,8339200,8347455,4990464,4995366,16760576,16768895,13408512,13415014,10056192,10061132,8347392,8351551,4995328,4997670,16776960,16777087,13421568,13421670,10000384,10000460,8355584,8355647,5000192,5000230,12582656,14679935,10079232,11717734,7510016,8755276,6258432,7307071,3755008,4344870,8388352,12582783,6736896,10079334,5019648,7510092,4161280,6258495,2509824,3755046,4194048,10485631,3394560,8375398,2529280,6264908,2064128,5209919,1264640,3099686,65280,8388479,52224,6736998,38912,5019724,32512,4161343,19456,2509862,65343,8388511,52275,6737023,38950,5019743,32543,4161359,19475,2509871,65407,8388543,52326,6737049,38988,5019762,32575,4161375,19494,2509881,65471,8388575,52377,6737074,39026,5019781,32607,4161391,19513,2509890,65535,8388607,52428,6737100,39064,5019800,32639,4161407,19532,2509900,49151,8380415,39372,6730444,29336,5014936,24447,4157311,14668,2507340,32767,8372223,26316,6724044,19608,5010072,16255,4153215,9804,2505036,16383,8364031,13260,6717388,9880,5005208,8063,4149119,4940,2502476,255,8355839,204,6710988,152,5000344,127,4145023,76,2500172,4129023,10452991,3342540,8349388,2490520,6245528,2031743,5193599,1245260,3089996,8323327,12550143,6684876,10053324,4980888,7490712,4128895,6242175,2490444,3745356,12517631,14647295,10027212,11691724,7471256,8735896,6226047,7290751,3735628,4335180,16711935,16744447,13369548,13395660,9961624,9981080,8323199,8339327,4980812,4990540,16711871,16744415,13369497,13395634,9961586,9981061,8323167,8339311,4980793,4990530,16711807,16744383,13369446,13395609,9961548,9981042,8323135,8339295,4980774,4990521,16711743,16744351,13369395,13395583,9961510,9981023,8323103,8339279,4980755,4990511,3355443,5987163,8684676,11382189,14079702,16777215],AC_COLORS_RGB_3JS=exports.AC_COLORS_RGB_3JS=["rgb(0,0,0)","rgb(255,0,0)","rgb(255,255,0)","rgb(0,255,0)","rgb(0,255,255)","rgb(0,0,255)","rgb(255,0,255)","rgb(255,255,255)","rgb(65,65,65)","rgb(128,128,128)","rgb(255,0,0)","rgb(255,170,170)","rgb(189,0,0)","rgb(189,126,126)","rgb(129,0,0)","rgb(129,86,86)","rgb(104,0,0)","rgb(104,69,69)","rgb(79,0,0)","rgb(79,53,53)","rgb(255,63,0)","rgb(255,191,170)","rgb(189,46,0)","rgb(189,141,126)","rgb(129,31,0)","rgb(129,96,86)","rgb(104,25,0)","rgb(104,78,69)","rgb(79,19,0)","rgb(79,59,53)","rgb(255,127,0)","rgb(255,212,170)","rgb(189,94,0)","rgb(189,157,126)","rgb(129,64,0)","rgb(129,107,86)","rgb(104,52,0)","rgb(104,86,69)","rgb(79,39,0)","rgb(79,66,53)","rgb(255,191,0)","rgb(255,234,170)","rgb(189,141,0)","rgb(189,173,126)","rgb(129,96,0)","rgb(129,118,86)","rgb(104,78,0)","rgb(104,95,69)","rgb(79,59,0)","rgb(79,73,53)","rgb(255,255,0)","rgb(255,255,170)","rgb(189,189,0)","rgb(189,189,126)","rgb(129,129,0)","rgb(129,129,86)","rgb(104,104,0)","rgb(104,104,69)","rgb(79,79,0)","rgb(79,79,53)","rgb(191,255,0)","rgb(234,255,170)","rgb(141,189,0)","rgb(173,189,126)","rgb(96,129,0)","rgb(118,129,86)","rgb(78,104,0)","rgb(95,104,69)","rgb(59,79,0)","rgb(73,79,53)","rgb(127,255,0)","rgb(212,255,170)","rgb(94,189,0)","rgb(157,189,126)","rgb(64,129,0)","rgb(107,129,86)","rgb(52,104,0)","rgb(86,104,69)","rgb(39,79,0)","rgb(66,79,53)","rgb(63,255,0)","rgb(191,255,170)","rgb(46,189,0)","rgb(141,189,126)","rgb(31,129,0)","rgb(96,129,86)","rgb(25,104,0)","rgb(78,104,69)","rgb(19,79,0)","rgb(59,79,53)","rgb(0,255,0)","rgb(170,255,170)","rgb(0,189,0)","rgb(126,189,126)","rgb(0,129,0)","rgb(86,129,86)","rgb(0,104,0)","rgb(69,104,69)","rgb(0,79,0)","rgb(53,79,53)","rgb(0,255,63)","rgb(170,255,191)","rgb(0,189,46)","rgb(126,189,141)","rgb(0,129,31)","rgb(86,129,96)","rgb(0,104,25)","rgb(69,104,78)","rgb(0,79,19)","rgb(53,79,59)","rgb(0,255,127)","rgb(170,255,212)","rgb(0,189,94)","rgb(126,189,157)","rgb(0,129,64)","rgb(86,129,107)","rgb(0,104,52)","rgb(69,104,86)","rgb(0,79,39)","rgb(53,79,66)","rgb(0,255,191)","rgb(170,255,234)","rgb(0,189,141)","rgb(126,189,173)","rgb(0,129,96)","rgb(86,129,118)","rgb(0,104,78)","rgb(69,104,95)","rgb(0,79,59)","rgb(53,79,73)","rgb(0,255,255)","rgb(170,255,255)","rgb(0,189,189)","rgb(126,189,189)","rgb(0,129,129)","rgb(86,129,129)","rgb(0,104,104)","rgb(69,104,104)","rgb(0,79,79)","rgb(53,79,79)","rgb(0,191,255)","rgb(170,234,255)","rgb(0,141,189)","rgb(126,173,189)","rgb(0,96,129)","rgb(86,118,129)","rgb(0,78,104)","rgb(69,95,104)","rgb(0,59,79)","rgb(53,73,79)","rgb(0,127,255)","rgb(170,212,255)","rgb(0,94,189)","rgb(126,157,189)","rgb(0,64,129)","rgb(86,107,129)","rgb(0,52,104)","rgb(69,86,104)","rgb(0,39,79)","rgb(53,66,79)","rgb(0,63,255)","rgb(170,191,255)","rgb(0,46,189)","rgb(126,141,189)","rgb(0,31,129)","rgb(86,96,129)","rgb(0,25,104)","rgb(69,78,104)","rgb(0,19,79)","rgb(53,59,79)","rgb(0,0,255)","rgb(170,170,255)","rgb(0,0,189)","rgb(126,126,189)","rgb(0,0,129)","rgb(86,86,129)","rgb(0,0,104)","rgb(69,69,104)","rgb(0,0,79)","rgb(53,53,79)","rgb(63,0,255)","rgb(191,170,255)","rgb(46,0,189)","rgb(141,126,189)","rgb(31,0,129)","rgb(96,86,129)","rgb(25,0,104)","rgb(78,69,104)","rgb(19,0,79)","rgb(59,53,79)","rgb(127,0,255)","rgb(212,170,255)","rgb(94,0,189)","rgb(157,126,189)","rgb(64,0,129)","rgb(107,86,129)","rgb(52,0,104)","rgb(86,69,104)","rgb(39,0,79)","rgb(66,53,79)","rgb(191,0,255)","rgb(234,170,255)","rgb(141,0,189)","rgb(173,126,189)","rgb(96,0,129)","rgb(118,86,129)","rgb(78,0,104)","rgb(95,69,104)","rgb(59,0,79)","rgb(73,53,79)","rgb(255,0,255)","rgb(255,170,255)","rgb(189,0,189)","rgb(189,126,189)","rgb(129,0,129)","rgb(129,86,129)","rgb(104,0,104)","rgb(104,69,104)","rgb(79,0,79)","rgb(79,53,79)","rgb(255,0,191)","rgb(255,170,234)","rgb(189,0,141)","rgb(189,126,173)","rgb(129,0,96)","rgb(129,86,118)","rgb(104,0,78)","rgb(104,69,95)","rgb(79,0,59)","rgb(79,53,73)","rgb(255,0,127)","rgb(255,170,212)","rgb(189,0,94)","rgb(189,126,157)","rgb(129,0,64)","rgb(129,86,107)","rgb(104,0,52)","rgb(104,69,86)","rgb(79,0,39)","rgb(79,53,66)","rgb(255,0,63)","rgb(255,170,191)","rgb(189,0,46)","rgb(189,126,141)","rgb(129,0,31)","rgb(129,86,96)","rgb(104,0,25)","rgb(104,69,78)","rgb(79,0,19)","rgb(79,53,59)","rgb(51,51,51)","rgb(80,80,80)","rgb(105,105,105)","rgb(130,130,130)","rgb(190,190,190)","rgb(255,255,255)"],AC_COLORS_RGB_String=exports.AC_COLORS_RGB_String=["0,0,0","255,0,0","255,255,0","0,255,0","0,255,255","0,0,255","255,0,255","255,255,255","65,65,65","128,128,128","255,0,0","255,170,170","189,0,0","189,126,126","129,0,0","129,86,86","104,0,0","104,69,69","79,0,0","79,53,53","255,63,0","255,191,170","189,46,0","189,141,126","129,31,0","129,96,86","104,25,0","104,78,69","79,19,0","79,59,53","255,127,0","255,212,170","189,94,0","189,157,126","129,64,0","129,107,86","104,52,0","104,86,69","79,39,0","79,66,53","255,191,0","255,234,170","189,141,0","189,173,126","129,96,0","129,118,86","104,78,0","104,95,69","79,59,0","79,73,53","255,255,0","255,255,170","189,189,0","189,189,126","129,129,0","129,129,86","104,104,0","104,104,69","79,79,0","79,79,53","191,255,0","234,255,170","141,189,0","173,189,126","96,129,0","118,129,86","78,104,0","95,104,69","59,79,0","73,79,53","127,255,0","212,255,170","94,189,0","157,189,126","64,129,0","107,129,86","52,104,0","86,104,69","39,79,0","66,79,53","63,255,0","191,255,170","46,189,0","141,189,126","31,129,0","96,129,86","25,104,0","78,104,69","19,79,0","59,79,53","0,255,0","170,255,170","0,189,0","126,189,126","0,129,0","86,129,86","0,104,0","69,104,69","0,79,0","53,79,53","0,255,63","170,255,191","0,189,46","126,189,141","0,129,31","86,129,96","0,104,25","69,104,78","0,79,19","53,79,59","0,255,127","170,255,212","0,189,94","126,189,157","0,129,64","86,129,107","0,104,52","69,104,86","0,79,39","53,79,66","0,255,191","170,255,234","0,189,141","126,189,173","0,129,96","86,129,118","0,104,78","69,104,95","0,79,59","53,79,73","0,255,255","170,255,255","0,189,189","126,189,189","0,129,129","86,129,129","0,104,104","69,104,104","0,79,79","53,79,79","0,191,255","170,234,255","0,141,189","126,173,189","0,96,129","86,118,129","0,78,104","69,95,104","0,59,79","53,73,79","0,127,255","170,212,255","0,94,189","126,157,189","0,64,129","86,107,129","0,52,104","69,86,104","0,39,79","53,66,79","0,63,255","170,191,255","0,46,189","126,141,189","0,31,129","86,96,129","0,25,104","69,78,104","0,19,79","53,59,79","0,0,255","170,170,255","0,0,189","126,126,189","0,0,129","86,86,129","0,0,104","69,69,104","0,0,79","53,53,79","63,0,255","191,170,255","46,0,189","141,126,189","31,0,129","96,86,129","25,0,104","78,69,104","19,0,79","59,53,79","127,0,255","212,170,255","94,0,189","157,126,189","64,0,129","107,86,129","52,0,104","86,69,104","39,0,79","66,53,79","191,0,255","234,170,255","141,0,189","173,126,189","96,0,129","118,86,129","78,0,104","95,69,104","59,0,79","73,53,79","255,0,255","255,170,255","189,0,189","189,126,189","129,0,129","129,86,129","104,0,104","104,69,104","79,0,79","79,53,79","255,0,191","255,170,234","189,0,141","189,126,173","129,0,96","129,86,118","104,0,78","104,69,95","79,0,59","79,53,73","255,0,127","255,170,212","189,0,94","189,126,157","129,0,64","129,86,107","104,0,52","104,69,86","79,0,39","79,53,66","255,0,63","255,170,191","189,0,46","189,126,141","129,0,31","129,86,96","104,0,25","104,69,78","79,0,19","79,53,59","51,51,51","80,80,80","105,105,105","130,130,130","190,190,190","255,255,255"];"use strict",Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/es.symbol.description.js");var _Drawing=_interopRequireDefault(require("./Drawing")),_AppId2DM;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}class AppId2DM{constructor(e){let{name:t=""}=e;this.name=t}static getAppIDs(e){let t=_getStartAppIDTableDxf._.call(AppId2DM,e[0]);for(let r=0;r<_Drawing.default.APPiDs.length;r++)t+=_getStartAppIDDxf._.call(AppId2DM,e[r+1]),t+=_getAppIdDXF._.call(AppId2DM,_Drawing.default.APPiDs[r]);return t+="0"+this.newLine+"ENDTAB"+this.newLine,t}}exports.default=AppId2DM,_AppId2DM=AppId2DM,_defineProperty(AppId2DM,"newLine","\r\n");var _getStartAppIDTableDxf={_:e=>"0"+_AppId2DM.newLine+"TABLE"+_AppId2DM.newLine+"2"+_AppId2DM.newLine+"APPID"+_AppId2DM.newLine+"5"+_AppId2DM.newLine+e+"100"+_AppId2DM.newLine+"AcDbSymbolTable"+_AppId2DM.newLine+"70"+_AppId2DM.newLine+_Drawing.default.APPiDs.length+_AppId2DM.newLine},_getStartAppIDDxf={_:e=>"0"+_AppId2DM.newLine+"APPID"+_AppId2DM.newLine+"5"+_AppId2DM.newLine+e+"100"+_AppId2DM.newLine+"AcDbSymbolTableRecord"+_AppId2DM.newLine+"100"+_AppId2DM.newLine+"AcDbRegAppTableRecord"+_AppId2DM.newLine},_getAppIdDXF={_:e=>"2"+_AppId2DM.newLine+e.name+_AppId2DM.newLine+"70"+_AppId2DM.newLine+"0"+_AppId2DM.newLine};"use strict",require("core-js/modules/es.symbol.description.js"),require("core-js/modules/es.weak-map.js"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/es.array.reduce.js"),require("core-js/modules/es.parse-float.js"),require("core-js/modules/es.parse-int.js"),require("core-js/modules/web.dom-collections.iterator.js");var _drei=require("@react-three/drei"),THREE=_interopRequireWildcard(require("three")),_Math2D=_interopRequireDefault(require("./Math2D")),_lodash=_interopRequireDefault(require("lodash")),_LineType2DM=_interopRequireDefault(require("./LineType2DM")),_UtilDXF=require("./UtilDXF"),_Cords2D=_interopRequireDefault(require("./Cords2D")),_id=require("./id"),_Arc2DM;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache(n){if("function"!=typeof WeakMap)return null;var i=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache=function(t){return t?r:i})(n)}function _interopRequireWildcard(d,e){if(!e&&d&&d.__esModule)return d;if(null===d||"object"!=typeof d&&"function"!=typeof d)return{default:d};var r=_getRequireWildcardCache(e);if(r&&r.has(d))return r.get(d);var t={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in d)if("default"!=o&&Object.prototype.hasOwnProperty.call(d,o)){var l=n?Object.getOwnPropertyDescriptor(d,o):null;l&&(l.get||l.set)?Object.defineProperty(t,o,l):t[o]=d[o]}return t.default=d,r&&r.set(d,t),t}function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}function _assertClassBrand(r,e,t){if("function"==typeof r?r===e:r.has(e))return 3>arguments.length?e:t;throw new TypeError("Private element is not present on this object")}class Arc2DM{constructor(e){let{id:t=_id.ID.getId(),handler:r="null",color:n="#ffffff",colorIndex:i="7",lineType:d="ByLayer",layer:o="0",centerCords:l=null,radius:a=null,startAngle:s=null,endAngle:g=null}=e;this.id=t,this.handler=r,this.color=n,this.colorIndex=i,this.layer=o,this.lineType=d,this.centerCords=l,this.radius=a,this.startAngle=s,this.endAngle=g}}exports.default=Arc2DM,_Arc2DM=Arc2DM,_defineProperty(Arc2DM,"newLine","\r\n"),_defineProperty(Arc2DM,"getMoved",function(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=_lodash.default.cloneDeep(e);return n.centerCords=_Cords2D.default.getMoved2D(e.centerCords,t,r),n}),_defineProperty(Arc2DM,"getMovedArray",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(0===t&&0===r)return e;else{let n=[];return e.forEach(e=>n.push(_Arc2DM.getMoved(e,t,r))),n}}),_defineProperty(Arc2DM,"getScaled",function(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{x:0,y:0,z:0},n=_lodash.default.cloneDeep(e);return n.centerCords=_Cords2D.default.getScaled2D(e.centerCords,t,r),n.radius=parseFloat(e.radius)*t,n}),_defineProperty(Arc2DM,"getScaledArray",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(1===t)return e;else{let n=[];return e.forEach(e=>n.push(_Arc2DM.getScaled(e,t,r))),n}}),_defineProperty(Arc2DM,"getRotated",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(0===t)return e;else{let n=_lodash.default.cloneDeep(e);if(n.centerCords=_Cords2D.default.getRotated2D(e.centerCords,t,r),n.startAngle=parseFloat(e.startAngle)+t,_Math2D.default.radians.rad360<n.startAngle){let e=n.startAngle/_Math2D.default.radians.rad360;n.startAngle-=parseInt(e)*_Math2D.default.radians.rad360}if(n.endAngle=parseFloat(e.endAngle)+t,_Math2D.default.radians.rad360<n.endAngle){let e=n.endAngle/_Math2D.default.radians.rad360;n.endAngle-=parseInt(e)*_Math2D.default.radians.rad360}return n}}),_defineProperty(Arc2DM,"getRotatedArray",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(0===t)return e;else{let n=[];return e.forEach(e=>n.push(_Arc2DM.getRotated(e,t,r))),n}}),_defineProperty(Arc2DM,"getMirrored",function(e,t){let r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"x",n=_lodash.default.cloneDeep(e);return n.centerCords=_Cords2D.default.getMirrored2D(e.centerCords,t,r),_Math2D.default.radians.rad90<=n.startAngle<=_Math2D.default.radians.rad0,n}),_defineProperty(Arc2DM,"getThreeJs",e=>{let t=_assertClassBrand(_Arc2DM,_Arc2DM,_getIsDashed)._.call(_Arc2DM,e),r=t.center||t.dashed||t.dotted||t.phantom,n=new THREE.EllipseCurve(+e.centerCords.x,+e.centerCords.y,+e.radius,+e.radius,+e.startAngle,+e.endAngle,!1,0),i=n.getPoints(120).reduce((e,t)=>{let{x:r,y:n}=t;return[...e,r,n,0]},[],[]);return React.createElement("group",{key:e.id},React.createElement(_drei.Line,{points:i,color:e.color,linewidth:1,dashed:r}))}),_defineProperty(Arc2DM,"getDxf",e=>{var t=Math.PI;let r="0"+_Arc2DM.newLine+"ARC"+_Arc2DM.newLine+"5"+_Arc2DM.newLine+_UtilDXF.UtilDXF.getHandler()+"100"+_Arc2DM.newLine+"AcDbEntity"+_Arc2DM.newLine+"8\r\n"+e.layer+_Arc2DM.newLine+"6\r\n"+e.lineType+_Arc2DM.newLine+"100"+_Arc2DM.newLine+"AcDbCircle"+_Arc2DM.newLine+"10"+_Arc2DM.newLine+e.centerCords.x+_Arc2DM.newLine+"20"+_Arc2DM.newLine+e.centerCords.y+_Arc2DM.newLine+"30"+_Arc2DM.newLine+e.centerCords.z+_Arc2DM.newLine+"40"+_Arc2DM.newLine+e.radius+_Arc2DM.newLine+"62"+_Arc2DM.newLine+e.colorIndex+_Arc2DM.newLine+"100"+_Arc2DM.newLine+"AcDbArc"+_Arc2DM.newLine+" 50"+_Arc2DM.newLine+180*e.startAngle/t+_Arc2DM.newLine+"51"+_Arc2DM.newLine+180*e.endAngle/t+_Arc2DM.newLine;return r});var _getIsDashed={_:e=>({center:e.lineType.toLowerCase()===_LineType2DM.default.LineTypeNames.CENTER.toLowerCase(),dashed:e.lineType.toLowerCase()===_LineType2DM.default.LineTypeNames.DASHED.toLowerCase(),dotted:e.lineType.toLowerCase()===_LineType2DM.default.LineTypeNames.DOTTED.toLowerCase(),phantom:e.lineType.toLowerCase()===_LineType2DM.default.LineTypeNames.PHANTOM.toLowerCase()})};"use strict",Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/es.symbol.description.js"),require("core-js/modules/es.regexp.exec.js"),require("core-js/modules/es.string.replace.js"),require("core-js/modules/esnext.string.replace-all.js");var _Drawing=_interopRequireDefault(require("./Drawing")),_UtilDXF=require("./UtilDXF"),_BlockRecords2DM;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}class BlockRecords2DM{constructor(e){let{name:t="",scalability:r="",explodability:n=""}=e;this.name=t,this.scalability=r,this.explodability=n}static getBlockRecords(){let e=_getStartBlockRecordTableDxf._.call(BlockRecords2DM);for(let t=0;t<_Drawing.default.BlockRecords.length;t++)_Drawing.default.BlockRecords[t].name&&(e+=_getStartBlockRecordDxf._.call(BlockRecords2DM),e+=_getBlockRecordDXF._.call(BlockRecords2DM,_Drawing.default.BlockRecords[t]));return e+="0"+this.newLine+"ENDTAB"+this.newLine,e}}exports.default=BlockRecords2DM,_BlockRecords2DM=BlockRecords2DM,_defineProperty(BlockRecords2DM,"newLine","\r\n");var _getStartBlockRecordTableDxf={_:()=>"0"+_BlockRecords2DM.newLine+"TABLE"+_BlockRecords2DM.newLine+"2"+_BlockRecords2DM.newLine+"BLOCK_RECORD"+_BlockRecords2DM.newLine+"5"+_BlockRecords2DM.newLine+_UtilDXF.UtilDXF.getHandler()+"100"+_BlockRecords2DM.newLine+"AcDbSymbolTable"+_BlockRecords2DM.newLine+"70"+_BlockRecords2DM.newLine+_Drawing.default.BlockRecords.length+_BlockRecords2DM.newLine},_getStartBlockRecordDxf={_:()=>"0"+_BlockRecords2DM.newLine+"BLOCK_RECORD"+_BlockRecords2DM.newLine+"5"+_BlockRecords2DM.newLine+_UtilDXF.UtilDXF.getHandler()+"100"+_BlockRecords2DM.newLine+"AcDbSymbolTableRecord"+_BlockRecords2DM.newLine+"100"+_BlockRecords2DM.newLine+"AcDbBlockTableRecord"+_BlockRecords2DM.newLine},_getBlockRecordDXF={_:e=>{let t=e.name.replaceAll("\r\n","");return"2"+_BlockRecords2DM.newLine+t+_BlockRecords2DM.newLine+"70"+_BlockRecords2DM.newLine+"0"+_BlockRecords2DM.newLine+"280"+_BlockRecords2DM.newLine+"1"+_BlockRecords2DM.newLine+"281"+_BlockRecords2DM.newLine+"0"+_BlockRecords2DM.newLine}};"use strict",Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/es.symbol.description.js");var _Drawing=_interopRequireDefault(require("./Drawing")),_UtilDXF=require("./UtilDXF"),_Entities2D2=require("./_Entities2D"),_Blocks2DM;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}class Blocks2DM{constructor(e){let{id:t,handler:r="null",color:n="#ffffff",colorIndex:i="7",lineType:d="ByLayer",layer:o="0",name:l="",baseCords:a=null,blockType:s="1",scale:g=""}=e;this.id=t,this.handler=r,this.color=n,this.colorIndex=i,this.layer=o,this.lineType=d,this.name=l,this.baseCords=a,this.blockType=s}static getDefaultBlocks(){let e="";for(let t=0;t<_Drawing.default.BlocksDefault.length;t++)e+=this.getStartBlock(),e+=this.getBlock(_Drawing.default.BlocksDefault[t]),e+=this.getEndBlock(_Drawing.default.BlocksDefault[t].layer),e+="67"+this.newLine+"1"+this.newLine;return e}static getBlocks(e){let t="";for(let r=0;r<e.length;r++)t+=this.getStartBlock(),t+=this.getBlock(_Drawing.default.BlocksDefault[r]),t+=this.getEndBlock(_Drawing.default.BlocksDefault[r].layer);return t}static getBlockEntity(e){return"0"+this.newLine+"INSERT"+this.newLine+"5"+this.newLine+_UtilDXF.UtilDXF.getHandler()+"330"+this.newLine+"70"+this.newLine+"100"+this.newLine+"AcDbEntity"+this.newLine+"8"+this.newLine+"0"+this.newLine+"100"+this.newLine+"AcDbBlockReference"+this.newLine+"2"+this.newLine+e.name+this.newLine+"10"+this.newLine+e.baseCords.x+this.newLine+"20"+this.newLine+e.baseCords.y+this.newLine+"30"+this.newLine+e.baseCords.z+this.newLine}static getBlockEntitiesDXF(e){if(_Entities2D2._Entities2D.isEmpty(e.entities2d))return{dxf:"",block_dxf:""};else{let t=_Entities2D2._Entities2D.getDxf(e.entities2d),r=new Blocks2DM({name:e.blockName,baseCords:e.position,blockType:"0"});_Drawing.default.BlockRecords.push({name:e.blockName});let n=Blocks2DM.getStartBlock(),i=Blocks2DM.getBlock(r),d=t.dxf,o=Blocks2DM.getEndBlock("0"),l=Blocks2DM.getBlockEntity(r),a=t.block_dxf+n+i+d+o;return{dxf:l,block_dxf:a}}}}exports.default=Blocks2DM,_Blocks2DM=Blocks2DM,_defineProperty(Blocks2DM,"newLine","\r\n"),_defineProperty(Blocks2DM,"getStartBlock",function(){let e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"0";return"0"+_Blocks2DM.newLine+"BLOCK"+_Blocks2DM.newLine+"5"+_Blocks2DM.newLine+_UtilDXF.UtilDXF.getHandler()+"100"+_Blocks2DM.newLine+"AcDbEntity"+_Blocks2DM.newLine+"8"+_Blocks2DM.newLine+e+_Blocks2DM.newLine+"100"+_Blocks2DM.newLine+"AcDbBlockBegin"+_Blocks2DM.newLine}),_defineProperty(Blocks2DM,"getBlock",e=>"2"+_Blocks2DM.newLine+e.name+_Blocks2DM.newLine+"70"+_Blocks2DM.newLine+e.blockType+_Blocks2DM.newLine+"10"+_Blocks2DM.newLine+e.baseCords.x+_Blocks2DM.newLine+"20"+_Blocks2DM.newLine+e.baseCords.y+_Blocks2DM.newLine+"30"+_Blocks2DM.newLine+e.baseCords.z+_Blocks2DM.newLine+"3"+_Blocks2DM.newLine+e.name+_Blocks2DM.newLine+"1"+_Blocks2DM.newLine+_Blocks2DM.newLine),_defineProperty(Blocks2DM,"getEndBlock",e=>"0"+_Blocks2DM.newLine+"ENDBLK"+_Blocks2DM.newLine+"5"+_Blocks2DM.newLine+_UtilDXF.UtilDXF.getHandler()+"100"+_Blocks2DM.newLine+"AcDbEntity"+_Blocks2DM.newLine+"8"+_Blocks2DM.newLine+e+_Blocks2DM.newLine+"100"+_Blocks2DM.newLine+"AcDbBlockEnd"+_Blocks2DM.newLine),"use strict",require("core-js/modules/es.symbol.description.js"),require("core-js/modules/es.weak-map.js"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/es.array.reduce.js"),require("core-js/modules/es.parse-float.js"),require("core-js/modules/web.dom-collections.iterator.js");var THREE=_interopRequireWildcard(require("three")),_drei=require("@react-three/drei"),_lodash=_interopRequireDefault(require("lodash")),_LineType2DM=_interopRequireDefault(require("./LineType2DM")),_UtilDXF=require("./UtilDXF"),_id=require("./id"),_Cords2D=_interopRequireDefault(require("./Cords2D")),_Circle2DM;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache(n){if("function"!=typeof WeakMap)return null;var i=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache=function(t){return t?r:i})(n)}function _interopRequireWildcard(d,e){if(!e&&d&&d.__esModule)return d;if(null===d||"object"!=typeof d&&"function"!=typeof d)return{default:d};var r=_getRequireWildcardCache(e);if(r&&r.has(d))return r.get(d);var t={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in d)if("default"!=o&&Object.prototype.hasOwnProperty.call(d,o)){var l=n?Object.getOwnPropertyDescriptor(d,o):null;l&&(l.get||l.set)?Object.defineProperty(t,o,l):t[o]=d[o]}return t.default=d,r&&r.set(d,t),t}function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}function _assertClassBrand(r,e,t){if("function"==typeof r?r===e:r.has(e))return 3>arguments.length?e:t;throw new TypeError("Private element is not present on this object")}class Circle2DM{constructor(e){let{id:t=_id.ID.getId(),handler:r="null",color:n="#ffffff",colorIndex:i="7",lineType:d="ByLayer",layer:o="0",centerCords:l=null,radius:a=null}=e;this.id=t,this.handler=r,this.color=n,this.colorIndex=i,this.layer=o,this.lineType=d,this.centerCords=l,this.radius=a}}exports.default=Circle2DM,_Circle2DM=Circle2DM,_defineProperty(Circle2DM,"newLine","\r\n"),_defineProperty(Circle2DM,"getMoved",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(0===t&&0===r)return e;else{let n=_lodash.default.cloneDeep(e);return n.centerCords.x=parseFloat(e.centerCords.x)+t,n.centerCords.y=parseFloat(e.centerCords.y)+r,n}}),_defineProperty(Circle2DM,"getMovedArray",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(0===t&&0===r)return e;else{let n=[];return e.forEach(e=>n.push(_Circle2DM.getMoved(e,t,r))),n}}),_defineProperty(Circle2DM,"getScaled",function(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{x:0,y:0,z:0},n=_lodash.default.cloneDeep(e);return n.centerCords=_Cords2D.default.getScaled2D(e.centerCords,t,r),n.radius=parseFloat(e.radius)*t,n}),_defineProperty(Circle2DM,"getScaledArray",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(1===t)return e;else{let n=[];return e.forEach(e=>n.push(_Circle2DM.getScaled(e,t,r))),n}}),_defineProperty(Circle2DM,"getRotated",function(e,t){let r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{x:0,y:0,z:0},n=_lodash.default.cloneDeep(e);return n.centerCords=_Cords2D.default.getRotated2D(e.centerCords,t,r),e}),_defineProperty(Circle2DM,"getRotatedArray",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(0===t)return e;else{let n=[];return e.forEach(e=>n.push(_Circle2DM.getRotated(e,t,r))),n}}),_defineProperty(Circle2DM,"getMirrored",function(e,t){let r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"x",n=_lodash.default.cloneDeep(e);return n.centerCords=_Cords2D.default.getMirrored2D(e.centerCords,t,r),n}),_defineProperty(Circle2DM,"getThreeJs",e=>{let t=_assertClassBrand(_Circle2DM,_Circle2DM,_getIsDashed)._.call(_Circle2DM,e),r=t.center||t.dashed||t.dotted||t.phantom,n=new THREE.EllipseCurve(+e.centerCords.x,+e.centerCords.y,+e.radius,+e.radius,0,+(2*Math.PI),!1,0),i=n.getPoints(120).reduce((e,t)=>{let{x:r,y:n}=t;return[...e,r,n,0]},[],[]);return React.createElement("group",{key:e.id},React.createElement(_drei.Line,{points:i,color:e.color,linewidth:1,dashed:r}))}),_defineProperty(Circle2DM,"getThreeJsArray",e=>{console.log("circle2dArr",e);let t=[];for(let r=0;r<e.length;r++)t.push(_Circle2DM.getThreeJs(e[r]));return t}),_defineProperty(Circle2DM,"getDxf",e=>{let t="0"+_Circle2DM.newLine+"CIRCLE"+_Circle2DM.newLine+"5"+_Circle2DM.newLine+_UtilDXF.UtilDXF.getHandler()+"100"+_Circle2DM.newLine+"AcDbEntity"+_Circle2DM.newLine+"8"+_Circle2DM.newLine+e.layer+_Circle2DM.newLine+"6"+_Circle2DM.newLine+e.lineType+_Circle2DM.newLine+"100"+_Circle2DM.newLine+"AcDbCircle"+_Circle2DM.newLine+"10"+_Circle2DM.newLine+e.centerCords.x+_Circle2DM.newLine+"20"+_Circle2DM.newLine+e.centerCords.y+_Circle2DM.newLine+"30"+_Circle2DM.newLine+e.centerCords.z+_Circle2DM.newLine+"40"+_Circle2DM.newLine+e.radius+_Circle2DM.newLine+"62"+_Circle2DM.newLine+e.colorIndex+_Circle2DM.newLine;return t});var _getIsDashed={_:e=>({center:e.lineType.toLowerCase()===_LineType2DM.default.LineTypeNames.CENTER.toLowerCase(),dashed:e.lineType.toLowerCase()===_LineType2DM.default.LineTypeNames.DASHED.toLowerCase(),dotted:e.lineType.toLowerCase()===_LineType2DM.default.LineTypeNames.DOTTED.toLowerCase(),phantom:e.lineType.toLowerCase()===_LineType2DM.default.LineTypeNames.PHANTOM.toLowerCase()})};"use strict",Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/es.symbol.description.js"),require("core-js/modules/es.number.to-fixed.js"),require("core-js/modules/es.parse-float.js");var _Math2D=_interopRequireDefault(require("./Math2D")),_lodash=_interopRequireDefault(require("lodash")),_Cords2D;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ownKeys(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),r.push.apply(r,t)}return r}function _objectSpread(n){for(var e=1,i;e<arguments.length;e++)i=null==arguments[e]?{}:arguments[e],e%2?ownKeys(Object(i),!0).forEach(function(e){_defineProperty(n,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))});return n}function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}class Cords2D{constructor(){let e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:0,t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:0;this.x=e,this.y=t,this.z=r,this.plineBulge=n}static getMovedObject2D(e,t,r){let n=_lodash.default.cloneDeep(e);return _lodash.default.forEach(e,function(e,i){n[i]=Cords2D.getMoved2D({cords:e,moveX:t,moveY:r})}),_objectSpread({},n)}static getMovedObject2D_withCords(e,t,r){let n=r.x-t.x,i=r.y-t.y;return this.getMovedObject2D(e,n,i)}static getScaledObject2D(e,t,r){let n=_lodash.default.cloneDeep(e);return _lodash.default.forEach(e,function(e,i){n[i]=Cords2D.getScaled2D(e,t,r)}),_objectSpread({},n)}static getRotatedObject2D(e,t,r){let n=_lodash.default.cloneDeep(e);return _lodash.default.forEach(e,function(e,i){n[i]=Cords2D.getRotated2D(e,t,r)}),_objectSpread({},n)}static getMirrored2D(e,t){var r=Math.abs;let n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"xy",i=r(t.x-e.x),d=r(t.y-e.y),o=i+i,l=d+d,a=e.x,s=e.y;if(0!==i&&(e.x<t.x?a+=o:a-=o),0!==d&&(e.y<t.y?s+=l:s-=l),"x"===n)new Cords2D(a,e.y);else if("y"===n)new Cords2D(e.x,s);else return new Cords2D(a,s)}static getLineWithCircleIntersectCords2D(e,r,n,i){var d=Math.sqrt,o=Math.pow;let l=d(o(r.x-e.x,2)+o(r.y-e.y,2)),a=(r.x-e.x)/l,s=(r.y-e.y)/l,g=a*(n.x-e.x)+s*(n.y-e.y),t=g*a+e.x,u=g*s+e.y,c=d(o(t-n.x,2)+o(u-n.y,2));if(c<i){let t=d(o(i,2)-o(c,2)),r=(g-t)*a+e.x,n=(g-t)*s+e.y,l=(g+t)*a+e.x,u=(g+t)*s+e.y;return{first_cords:new Cords2D(r,n),second_cords:new Cords2D(l,u)}}return c===i?{first_cords:new Cords2D(t,u),second_cords:null}:(console.log("outside",!1),{first_cords:null,second_cords:null})}static getRectangularCenterWithCords2D(e,t,r,n){let i=(r.x-e.x)/2,d=(n.y-r.y)/2;return new Cords2D(e.x+i,r.y+d)}static get_center_cords_with_lx_rx_by_ty(e,t,r,n){return new Cords2D(e+(t-e)/2,r+(n-r)/2)}static getRectangularCenterWithLines2DM(e,t,r,n){let i=(n.startCords.x-e.startCords.x)/2,d=(n.endCords.y-n.startCords.y)/2;return new Cords2D(e.startCords.x+i,e.startCords.y+d)}static isLinesIntersect(e,t,r,n){function i(e,t,n){var r=Math.min,i=Math.max;return t.x<=i(e.x,n.x)&&t.x>=r(e.x,n.x)&&t.y<=i(e.y,n.y)&&t.y>=r(e.y,n.y)}function d(e,t,n){let r=(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y);return 0==r?0:0<r?1:2}return function(e,t,r,n){let o=d(e,t,r),l=d(e,t,n),a=d(r,n,e),s=d(r,n,t);return!(o===l||a===s)||!!(0===o&&i(e,r,t))||!!(0===l&&i(e,n,t))||!!(0===a&&i(r,e,n))||!!(0===s&&i(r,t,n))}(e,t,r,n)}static getIntersectCordsLines(e,t,r,n){var i=Number.MAX_VALUE;let d=function(e,t,r,n){let d=t.y-e.y,o=e.x-t.x,l=d*e.x+o*e.y,a=n.y-r.y,s=r.x-n.x,g=a*r.x+s*r.y,u=d*s-a*o;if(0===u)return new Cords2D(i,i);else{return new Cords2D((s*l-o*g)/u,(d*g-a*l)/u)}}(e,t,r,n);return d.x===i&&d.y===i?null:d}static getMatchPointCords(e){let{cords:n=new Cords2D,matchPoint:i="lb",width:t,height:r}=e,d=n.x,o=n.y,l=d+t,a=o+r,s=d-t,g=o-r;return"lb"===i?{lb:new Cords2D(d,o),rb:new Cords2D(l,o),rt:new Cords2D(l,a),lt:new Cords2D(d,a)}:"rb"===i?{lb:new Cords2D(s,o),rb:new Cords2D(d,o),rt:new Cords2D(d,a),lt:new Cords2D(s,a)}:"lt"===i?{lb:new Cords2D(d,g),rb:new Cords2D(l,g),rt:new Cords2D(l,o),lt:new Cords2D(d,o)}:"rt"===i?{lb:new Cords2D(s,g),rb:new Cords2D(d,g),rt:new Cords2D(d,o),lt:new Cords2D(s,o)}:{lb:new Cords2D(d,o),rb:new Cords2D(l,o),rt:new Cords2D(l,a),lt:new Cords2D(d,a)}}}exports.default=Cords2D,_Cords2D=Cords2D,_defineProperty(Cords2D,"getFixedDecimals",function(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new _Cords2D,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:4,r=_lodash.default.cloneDeep(e);return r.x=parseFloat(e.x.toFixed(t)),r.y=parseFloat(e.y.toFixed(t)),r.z=parseFloat(e.z.toFixed(t)),r}),_defineProperty(Cords2D,"getMoved2D",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(0===t&&0===r)return e;else{let n=_lodash.default.cloneDeep(e);return n.x=parseFloat(e.x)+t,n.y=parseFloat(e.y)+r,n}}),_defineProperty(Cords2D,"getMovedArray2D",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(0===t&&0===r)return e;else{let n=[];return e.forEach(e=>n.push(_Cords2D.getMoved2D(e,t,r))),n}}),_defineProperty(Cords2D,"getMoved2D_withCords",(e,t,r)=>{let n=r.x-t.x,i=r.y-t.y;return _Cords2D.getMoved2D(e,n,i)}),_defineProperty(Cords2D,"getMovedArray2D_withCords",(e,t,r)=>{let n=r.x-t.x,i=r.y-t.y;return _Cords2D.getMovedArray2D(e,n,i)}),_defineProperty(Cords2D,"getScaled2D",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0},n=_lodash.default.cloneDeep(e);if(1!==t){let i=r.x-(r.x-parseFloat(e.x))*t,d=r.y-(r.y-parseFloat(e.y))*t;n.x=i,n.y=d}return n}),_defineProperty(Cords2D,"getScaledArray2D",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(1===t)return e;else{let n=[];return e.forEach(e=>n.push(_Cords2D.getScaled2D(e,t,r))),n}}),_defineProperty(Cords2D,"getRotated2D",function(e,t){var r=Math.floor;let n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(0===t)return e;else{let i=_lodash.default.cloneDeep(e),d=_Math2D.default.getAngle_num(n.x,n.y,i.x,i.y),o=_Math2D.default.getDistance_num(n.x,n.y,i.x,i.y),l=d+t;if(_Math2D.default.radians.rad360<l){let e=l/_Math2D.default.radians.rad360;l-=r(e)*_Math2D.default.radians.rad360}let a=_Math2D.default.getCordsWithLengthAndAngle(n,o,l);return i.x=a.x,i.y=a.y,i}}),_defineProperty(Cords2D,"getRotatedArray2D",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(0===t)return e;else{let n=[];return e.forEach(e=>n.push(_Cords2D.getRotated2D(e,t,r))),n}}),_defineProperty(Cords2D,"getMirroredArray2D",(e,t)=>{let r=[];return e.forEach(e=>r.push(_Cords2D.getMirrored2D(e,t))),r}),_defineProperty(Cords2D,"getLineWithLineIntersectCords2D_num",(e,t,r,n,i,d,o,l)=>{let a=(l-d)*(r-e)-(o-i)*(n-t),s;return 0==a?null:(s=((o-i)*(t-d)-(l-d)*(e-i))/a,new _Cords2D(e+s*(r-e),t+s*(n-t)))}),_defineProperty(Cords2D,"getLineWithLineIntersectCords2D",(e,t,r,n)=>{let i=(n.y-r.y)*(t.x-e.x)-(n.x-r.x)*(t.y-e.y),d;if(0==i)return null;d=((n.x-r.x)*(e.y-r.y)-(n.y-r.y)*(e.x-r.x))/i;let o=new _Cords2D(e.x+d*(t.x-e.x),e.y+d*(t.y-e.y));return _Cords2D.getFixedDecimals(o,4)}),"use strict",Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/es.symbol.description.js"),require("core-js/modules/es.parse-float.js"),require("core-js/modules/es.parse-int.js");var _Point2DM=_interopRequireDefault(require("./Point2DM")),_Line2DM=_interopRequireDefault(require("./Line2DM")),_Solid2DM=_interopRequireDefault(require("./Solid2DM")),_Cords2D=_interopRequireDefault(require("./Cords2D")),_ACColors=require("./ACColors"),_id=require("./id"),_Dimension2DM;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}class Dimension2DM{}exports.default=Dimension2DM,_Dimension2DM=Dimension2DM,_defineProperty(Dimension2DM,"SolidLength_mm",2.5),_defineProperty(Dimension2DM,"SolidHalfHeight_mm",.3333),_defineProperty(Dimension2DM,"SolidLength_in",.625),_defineProperty(Dimension2DM,"SolidHalfHeight_in",.125),_defineProperty(Dimension2DM,"getDimension",e=>{let{id:d=_id.ID.getId(),baseCords:t,oppDist:r,distanceFromBase:n,dimStyle:i}=e,o,l;"2"===i.unit?(o=_Dimension2DM.SolidLength_mm,l=_Dimension2DM.SolidHalfHeight_mm):(o=_Dimension2DM.SolidLength_in,l=_Dimension2DM.SolidHalfHeight_in);let a=new _Cords2D.default(t.x,t.y+r),s=parseFloat(i.gapExtExo),g=parseFloat(i.scale),u=new _Point2DM.default({id:"DLBP"+d,lineType:"CONTINUOUS",pointCords:t}),c=new _Point2DM.default({id:"DRTP"+d,lineType:"CONTINUOUS",pointCords:a}),f=new _Line2DM.default({id:"DLBL"+d,color:_ACColors.ACColors[parseInt(i.lineColorIndex)],colorIndex:i.lineColorIndex,layer:"Dimensions",lineType:"CONTINUOUS",startCords:new _Cords2D.default(t.x+s,t.y),endCords:new _Cords2D.default(t.x+n+s+s,t.y)}),y=new _Line2DM.default({id:"DRTL"+d,color:_ACColors.ACColors[parseInt(i.lineColorIndex)],colorIndex:i.lineColorIndex,layer:"Dimensions",lineType:"CONTINUOUS",startCords:new _Cords2D.default(a.x+s,a.y),endCords:new _Cords2D.default(a.x+n+s+s,a.y)}),p=new _Cords2D.default(f.endCords.x-s,f.endCords.y),L=new _Cords2D.default(p.x-l,p.y+o),h=new _Cords2D.default(p.x+l,p.y+o),w=new _Solid2DM.default({id:"DLBS"+d,color:_ACColors.ACColors[parseInt(i.lineColorIndex)],colorIndex:i.lineColorIndex,layer:"Dimensions",lineType:"CONTINUOUS",firstCords:p,secondCords:L,thirdCords:h,fourthCords:h}),m=new _Cords2D.default(y.endCords.x-s,y.endCords.y),D=new _Cords2D.default(m.x-l,m.y-o),A=new _Cords2D.default(m.x+l,m.y-o),x=new _Solid2DM.default({id:"DRTS"+d,color:_ACColors.ACColors[parseInt(i.lineColorIndex)],colorIndex:i.lineColorIndex,layer:"Dimensions",lineType:"CONTINUOUS",firstCords:m,secondCords:D,thirdCords:A,fourthCords:A}),b=_Solid2DM.default.getScaled(w,g,u.pointCords),C=_Line2DM.default.getScaled(f,g,u.pointCords),_=_Solid2DM.default.getScaled(x,g,c.pointCords),E=_Line2DM.default.getScaled(y,g,c.pointCords),T=new _Line2DM.default({id:"DML"+d,color:_ACColors.ACColors[parseInt(i.lineColorIndex)],colorIndex:i.lineColorIndex,layer:"Dimensions",lineType:"CONTINUOUS",startCords:new _Cords2D.default(b.firstCords.x,b.secondCords.y),endCords:new _Cords2D.default(_.firstCords.x,_.secondCords.y)}),v=Math.abs(T.endCords.y-T.startCords.y),M=new _Cords2D.default(T.startCords.x-s*g-parseFloat(i.textHeight)/2*g,T.startCords.y+v/2),S=new _Cords2D.default(T.startCords.x+s*g+parseFloat(i.textHeight)/2*g,T.startCords.y+v/2);return{leftBottomPoint:u,leftBottomLine:C,leftBottomArrowSolid:b,rightTopPoint:c,rightTopLine:E,rightTopArrowSolid:_,middleLine:T,leftBottomMTextCords:M,rightTopMTextCords:S}}),"use strict",require("core-js/modules/es.symbol.description.js"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/es.parse-float.js"),require("core-js/modules/es.regexp.to-string.js");var _id=require("./id"),_Cords2D=_interopRequireDefault(require("./Cords2D")),_Point2DM=_interopRequireDefault(require("./Point2DM")),_Line2DM=_interopRequireDefault(require("./Line2DM")),_lodash=_interopRequireDefault(require("lodash")),_Math2D=_interopRequireDefault(require("./Math2D")),_MText2DM=_interopRequireDefault(require("./MText2DM")),_Solid2DM=_interopRequireDefault(require("./Solid2DM")),_Entities2D2=require("./_Entities2D"),_BlockEntities2D2=require("./_BlockEntities2D"),_Drawing=_interopRequireDefault(require("./Drawing")),_UtilDXF=require("./UtilDXF"),_DimH2DM;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ownKeys(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),r.push.apply(r,t)}return r}function _objectSpread(n){for(var e=1,i;e<arguments.length;e++)i=null==arguments[e]?{}:arguments[e],e%2?ownKeys(Object(i),!0).forEach(function(e){_defineProperty(n,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))});return n}function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}function _assertClassBrand(r,e,t){if("function"==typeof r?r===e:r.has(e))return 3>arguments.length?e:t;throw new TypeError("Private element is not present on this object")}class DimH2DM{constructor(e){let{id:t=_id.ID.getId(),leftCords:r=null,rightCords:n=null,distanceFromBase:i=5,dimPos:d="c",isDimTop:o=!0,dimStyle:l=null,dimType:a="DLI",rotationAngleInRadians:s=0,rot_match_point:g="lb",text:u=""}=e;this.id=t,this.dimType=a,this.leftCords=r,this.rightCords=n,this.distanceFromBase=i,this.dimPos=d,this.isDimTop=o,this.rot_match_point=g,this.rotationAngleInRadians=s,this.dimStyle=l,this.text=u}static get_horizontal_dimension(e){let t=e.id,r=e.dimStyle,n=parseFloat(r.scale),i=e.text.toString(),d=1.4*i.length*n,o=r.lineType,l=r.layer,a=r.textColor,s=r.textColorIndex,g=r.lineColor,u=r.lineColorIndex,c=parseFloat(r.textHeight)*n,f=e.dimPos,y=parseFloat(r.gapExtExo)*n,p=e.leftCords,L=e.rightCords,h=e.isDimTop,w=e.distanceFromBase*n,m,D;"2"===r.unit?(m=_assertClassBrand(DimH2DM,this,_SOLID_LENGTH_MM)._*n,D=_assertClassBrand(DimH2DM,this,_SOLID_HALF_HEIGHT_MM)._*n):(m=_assertClassBrand(DimH2DM,this,_SOLID_LENGTH_IN)._*n,D=_assertClassBrand(DimH2DM,this,_SOLID_HALF_HEIGHT_IN)._*n);let A=_Math2D.default.getDistance(p,L),x=w+y,b=_lodash.default.cloneDeep(p),C=_lodash.default.cloneDeep(L),_,E,T;h?(_=new _Cords2D.default(b.x,b.y+y),E=new _Cords2D.default(b.x,_.y+x),T=new _Cords2D.default(E.x,E.y-y)):(_=new _Cords2D.default(b.x,b.y-y),E=new _Cords2D.default(b.x,_.y-x),T=new _Cords2D.default(E.x,E.y+y));let v=new _Cords2D.default(_.x+A,_.y),M=new _Cords2D.default(E.x+A,E.y),S=new _Cords2D.default(T.x+A,T.y),P=T,j=new _Cords2D.default(T.x+m,T.y+D),F=new _Cords2D.default(T.x+m,T.y-D),B=S,I=new _Cords2D.default(S.x-m,S.y+D),R=new _Cords2D.default(S.x-m,S.y-D),k=new _Cords2D.default(T.x+A/2,T.y+c/2+n);if("l"===f){let e=_lodash.default.cloneDeep(T),t=_lodash.default.cloneDeep(S);T.x-=d+m+2*n,S.x=S.x+m+2*n,k.x-=A/2+m+n+d/2,P=e,j=new _Cords2D.default(e.x-m,e.y+D),F=new _Cords2D.default(e.x-m,e.y-D),B=t,I=new _Cords2D.default(t.x+m,t.y+D),R=new _Cords2D.default(t.x+m,t.y-D)}else if("r"===f){let e=_lodash.default.cloneDeep(T),t=_lodash.default.cloneDeep(S);T.x-=m+2*n,S.x=S.x+d+m+2*n,k.x+=A/2+m+n+d/2,P=e,j=new _Cords2D.default(e.x-m,e.y+D),F=new _Cords2D.default(e.x-m,e.y-D),B=t,I=new _Cords2D.default(t.x+m,t.y+D),R=new _Cords2D.default(t.x+m,t.y-D)}let O=new _Point2DM.default({id:"DLP"+t,lineType:o,pointCords:b}),N=new _Point2DM.default({id:"DRP"+t,lineType:o,pointCords:C}),H=new _Line2DM.default({id:"DLL"+t,color:g,colorIndex:u,layer:l,lineType:o,startCords:_,endCords:E}),z=new _Line2DM.default({id:"DRL"+t,color:g,colorIndex:u,layer:l,lineType:o,startCords:v,endCords:M}),U=new _Line2DM.default({id:"DML"+t,color:g,colorIndex:u,layer:l,lineType:o,startCords:T,endCords:S}),J=new _MText2DM.default({cords:k,id:"DMT"+t,recWidth:3*n*i.length,height:c,text:i,color:a,colorIndex:s}),X=new _Solid2DM.default({id:"DLS"+t,color:g,colorIndex:u,layer:l,lineType:o,firstCords:P,secondCords:j,thirdCords:F,fourthCords:F}),W=new _Solid2DM.default({id:"DRS"+t,color:g,colorIndex:u,layer:l,lineType:o,firstCords:B,secondCords:I,thirdCords:R,fourthCords:R});return{lineArr:[H,z,U],solidArr:[X,W],pointArr:[O,N],mTextArr:[J]}}static get_rotation_horizontal_dimension(e){let t=this.get_horizontal_dimension(e);const r=e.rotationAngleInRadians,n="lb"===e.rot_match_point?e.leftCords:e.rightCords;if(0===r)return _objectSpread({},t);else{let e=_Line2DM.default.getRotatedArray(t.lineArr,r,n),i=_Solid2DM.default.getRotatedArray(t.solidArr,r,n),d=_Point2DM.default.getRotatedArray(t.pointArr,r,n),o=_MText2DM.default.getRotatedArray(t.mTextArr,r,n);return{lineArr:e,solidArr:i,pointArr:d,mTextArr:o}}}static getMovedWithCords(e,t,r){let n=r.x-t.x,i=r.y-t.y;return this.getMoved(e,n,i)}static getMovedArrayWithCords(e,t,r){let n=r.x-t.x,i=r.y-t.y;return this.getMovedArray(e,n,i)}static getDxf_entities2d(e){let t=this.get_rotation_horizontal_dimension(e),r=t.lineArr[0],n=t.lineArr[1],i=t.lineArr[2],d=t.solidArr[0],o=t.solidArr[1],l=t.pointArr[0],a=t.pointArr[1],s=t.mTextArr[0],g="";return g+=_Point2DM.default.getDxf(l),g+=_Point2DM.default.getDxf(a),g+=_Line2DM.default.getDxf(r),g+=_Line2DM.default.getDxf(n),g+=_Line2DM.default.getDxf(i),g+=_Solid2DM.default.getDxf(d),g+=_Solid2DM.default.getDxf(o),g+=_MText2DM.default.getDxf(s),g}static getDxf_block_entities2d(e){let t=new _Entities2D2._Entities2D(_objectSpread({},this.get_rotation_horizontal_dimension(e))),r=new _BlockEntities2D2._BlockEntities2D({entities2d:t,blockName:"DimH"+_id.ID.getBlockId()});return _BlockEntities2D2._BlockEntities2D.getDxf(r)}}exports.default=DimH2DM,_DimH2DM=DimH2DM;var _SOLID_LENGTH_MM={_:2.5},_SOLID_HALF_HEIGHT_MM={_:.3333},_SOLID_LENGTH_IN={_:.625},_SOLID_HALF_HEIGHT_IN={_:.125};_defineProperty(DimH2DM,"getMoved",function(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=_lodash.default.cloneDeep(e);return n.leftCords=_Cords2D.default.getMoved2D(e.leftCords,t,r),n.rightCords=_Cords2D.default.getMoved2D(e.rightCords,t,r),n}),_defineProperty(DimH2DM,"getMovedArray",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(0===t&&0===r)return e;else{let n=[];return e.forEach(e=>n.push(_DimH2DM.getMoved(e,t,r))),n}}),_defineProperty(DimH2DM,"getScaled",function(e,t){let r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{x:0,y:0,z:0},n=_lodash.default.cloneDeep(e);return n.leftCords=_Cords2D.default.getScaled2D(e.leftCords,t,r),n.rightCords=_Cords2D.default.getScaled2D(e.rightCords,t,r),n.dimStyle.scale=t,n}),_defineProperty(DimH2DM,"getScaledArray",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(1===t)return e;else{let n=[];return e.forEach(e=>n.push(_DimH2DM.getScaled(e,t,r))),n}}),_defineProperty(DimH2DM,"getRotated",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(0===t)return e;else{let n=_lodash.default.cloneDeep(e);return n.leftCords=_Cords2D.default.getRotated2D(e.leftCords,t,r),n.rightCords=_Cords2D.default.getScaled2D(e.rightCords,t,r),n}}),_defineProperty(DimH2DM,"getRotatedArray",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(0===t)return e;else{let n=[];return e.forEach(e=>n.push(_DimH2DM.getRotated(e,t,r))),n}}),_defineProperty(DimH2DM,"getMirrored",function(e,t){let r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"x",n=_lodash.default.cloneDeep(e);return n.leftCords=_Cords2D.default.getMirrored2D(e.leftCords,t,r),n.rightCords=_Cords2D.default.getMirrored2D(e.rightCords,t,r),n}),_defineProperty(DimH2DM,"getMirroredArray",function(e,t){let r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"x",n=[];return e.forEach(e=>n.push(_DimH2DM.getMirrored(e,t,r))),n}),_defineProperty(DimH2DM,"getThreeJs",e=>{let t=_DimH2DM.get_rotation_horizontal_dimension(e),r=t.lineArr[0],n=t.lineArr[1],i=t.lineArr[2],d=t.solidArr[0],o=t.solidArr[1],l=t.pointArr[0],a=t.pointArr[1],s=t.mTextArr[0];return React.createElement("group",{key:e.id},_Point2DM.default.getThreeJs(l),_Line2DM.default.getThreeJs(r),_Solid2DM.default.getThreeJs(d),_Point2DM.default.getThreeJs(a),_Line2DM.default.getThreeJs(n),_Solid2DM.default.getThreeJs(o),_Line2DM.default.getThreeJs(i),_MText2DM.default.getThreeJs(s))}),_defineProperty(DimH2DM,"getThreeJsArray",e=>{let t=[];for(let r=0;r<e.length;r++)t.push(_DimH2DM.getThreeJs(e[r]));return t}),_defineProperty(DimH2DM,"getDimensionDxf",e=>{let t=_DimH2DM.get_rotation_horizontal_dimension(e);0!==e.rotationAngleInRadians&&console.log("entities2d",t);let r=_id.ID.getDimBlockId();return _Drawing.default.BlockRecords.push({name:r}),{dxf:_DimH2DM.getEntityBlockDxf(e,t,r),block_dxf:_DimH2DM.getBlockDxf(e,t,r)}}),_defineProperty(DimH2DM,"getDimensionDxfArray",e=>{let t="",r="";for(let n=0,i;n<e.length;n++)i=_DimH2DM.getDimensionDxf(e[n]),t+=i.dxf,r+=i.block_dxf;return{dxf:t,block_dxf:r}}),_defineProperty(DimH2DM,"newLine","\r\n"),_defineProperty(DimH2DM,"getBlockDxf",(e,t,r)=>{let n=e.dimStyle,i=n.layer;return"0"+_DimH2DM.newLine+"BLOCK"+_DimH2DM.newLine+"5"+_DimH2DM.newLine+_UtilDXF.UtilDXF.getHandler()+"100"+_DimH2DM.newLine+"AcDbEntity"+_DimH2DM.newLine+"100"+_DimH2DM.newLine+"AcDbBlockBegin"+_DimH2DM.newLine+"2"+_DimH2DM.newLine+r+"70"+_DimH2DM.newLine+"1"+_DimH2DM.newLine+"10"+_DimH2DM.newLine+t.lineArr[0].startCords.x+_DimH2DM.newLine+"20"+_DimH2DM.newLine+t.lineArr[0].startCords.y+_DimH2DM.newLine+"30"+_DimH2DM.newLine+t.lineArr[0].startCords.z+_DimH2DM.newLine+"3"+_DimH2DM.newLine+r+"1"+_DimH2DM.newLine+_DimH2DM.newLine+_Line2DM.default.getDxf(t.lineArr[0])+_Line2DM.default.getDxf(t.lineArr[1])+_Line2DM.default.getDxf(t.lineArr[2])+_MText2DM.default.getDxf(t.mTextArr[0])+_Solid2DM.default.getDxf(t.solidArr[0])+_Solid2DM.default.getDxf(t.solidArr[1])+_Point2DM.default.getDxf(t.pointArr[0])+_Point2DM.default.getDxf(t.pointArr[1])+"0"+_DimH2DM.newLine+"ENDBLK"+_DimH2DM.newLine+"5"+_DimH2DM.newLine+_UtilDXF.UtilDXF.getHandler()+"100"+_DimH2DM.newLine+"AcDbEntity"+_DimH2DM.newLine+"8"+_DimH2DM.newLine+i+_DimH2DM.newLine+"100"+_DimH2DM.newLine+"AcDbBlockEnd"+_DimH2DM.newLine}),_defineProperty(DimH2DM,"getEntityBlockDxf",(e,t,r)=>{let n=e.dimStyle,i=n.lineType,d=n.layer,o="DLI"===e.dimType?"32":"33",l="0"+_DimH2DM.newLine+"DIMENSION"+_DimH2DM.newLine+"5"+_DimH2DM.newLine+_UtilDXF.UtilDXF.getHandler()+"100"+_DimH2DM.newLine+"AcDbEntity"+_DimH2DM.newLine+"8"+_DimH2DM.newLine+d+_DimH2DM.newLine+"6"+_DimH2DM.newLine+i+_DimH2DM.newLine+"100"+_DimH2DM.newLine+"AcDbDimension"+_DimH2DM.newLine+"2"+_DimH2DM.newLine+r+"10"+_DimH2DM.newLine+t.solidArr[0].firstCords.x+_DimH2DM.newLine+"20"+_DimH2DM.newLine+t.solidArr[0].firstCords.y+_DimH2DM.newLine+"30"+_DimH2DM.newLine+t.solidArr[0].firstCords.z+_DimH2DM.newLine+"11"+_DimH2DM.newLine+t.mTextArr[0].cords.x+_DimH2DM.newLine+"21"+_DimH2DM.newLine+t.mTextArr[0].cords.y+_DimH2DM.newLine+"31"+_DimH2DM.newLine+t.mTextArr[0].cords.z+_DimH2DM.newLine+"70"+_DimH2DM.newLine+o+_DimH2DM.newLine+"71"+_DimH2DM.newLine+"5"+_DimH2DM.newLine+"1"+_DimH2DM.newLine+t.mTextArr[0].text+_DimH2DM.newLine+"3"+_DimH2DM.newLine+n.name+_DimH2DM.newLine+"100"+_DimH2DM.newLine+"AcDbAlignedDimension"+_DimH2DM.newLine+"13"+_DimH2DM.newLine+t.pointArr[1].pointCords.x+_DimH2DM.newLine+"23"+_DimH2DM.newLine+t.pointArr[1].pointCords.y+_DimH2DM.newLine+"33"+_DimH2DM.newLine+t.pointArr[1].pointCords.z+_DimH2DM.newLine+"14"+_DimH2DM.newLine+t.pointArr[0].pointCords.x+_DimH2DM.newLine+"24"+_DimH2DM.newLine+t.pointArr[0].pointCords.y+_DimH2DM.newLine+"34"+_DimH2DM.newLine+t.pointArr[0].pointCords.z+_DimH2DM.newLine;return"DAL"!==e.dimType&&(l+="100"+_DimH2DM.newLine+"AcDbRotatedDimension"+_DimH2DM.newLine),l}),"use strict",Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;class DimHSmall2DM{constructor(e){let{id:t,handler:r="null",lineType:n="CONTINUOUS",leftCords:i=null,rightCords:d=null,distanceFromBase:o=5,isDimLeft:l=!0,isDimTop:a=!0,dimStyle:s=null,dimType:g="DLI",textCords:u=null,text:c="",layer:f="Dimensions",entities2d:y=null,dxf:p=""}=e;this.id=t,this.handler=r,this.layer=f,this.lineType=n,this.dimType=g,this.leftCords=i,this.rightCords=d,this.distanceFromBase=o,this.isDimLeft=l,this.isDimTop=a,this.dimStyle=s,this.text=c,this.textCords=u,this.entities2d=y,this.dxf=p}}exports.default=DimHSmall2DM,"use strict",Object.defineProperty(exports,"__esModule",{value:!0}),exports.short_dimension=exports.default=void 0,require("core-js/modules/es.symbol.description.js"),require("core-js/modules/es.parse-float.js"),require("core-js/modules/web.dom-collections.iterator.js");var _Dimension2DM=_interopRequireDefault(require("./Dimension2DM")),_ACColors=require("./ACColors"),_MText2DM=_interopRequireDefault(require("./MText2DM")),_Math2D=_interopRequireDefault(require("./Math2D")),_Line2DM=_interopRequireDefault(require("./Line2DM")),_Solid2DM=_interopRequireDefault(require("./Solid2DM")),_Point2DM=_interopRequireDefault(require("./Point2DM")),_lodash=_interopRequireDefault(require("lodash")),_UtilDXF=require("./UtilDXF"),_Entities2D2=require("./_Entities2D"),_Cords2D=_interopRequireDefault(require("./Cords2D")),_id=require("./id"),_Drawing=_interopRequireDefault(require("./Drawing")),_DimLinear2DM;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ownKeys(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),r.push.apply(r,t)}return r}function _objectSpread(n){for(var e=1,i;e<arguments.length;e++)i=null==arguments[e]?{}:arguments[e],e%2?ownKeys(Object(i),!0).forEach(function(e){_defineProperty(n,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))});return n}function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}class DimLinear2DM{constructor(e){let{id:t=_id.ID.getId(),handler:r="null",color:n=_ACColors.ACColors[3],colorIndex:i="3",lineColor:d=_ACColors.ACColors[8],lineColorIndex:o="8",lineType:l="CONTINUOUS",leftBottomBaseCords:a=null,rightTopBaseCords:s=null,distanceFromBase:g=5,direction:u=null,dimStyle:c=null,dimType:f="DLI",leftBottomMTextCords:y=null,rightTopMTextCords:p=null,text:L="",layer:h="Dimensions",entities2d:w=null,dxf:m=""}=e;this.id=t,this.handler=r,this.layer=h,this.color=n,this.lineColor=d,this.lineType=l,this.colorIndex=i,this.dimType=f,this.lineColorIndex=o,this.leftBottomBaseCords=a,this.rightTopBaseCords=s,this.distanceFromBase=g,this.direction=u,this.dimStyle=c,this.text=L,this.leftBottomMTextCords=y,this.rightTopMTextCords=p,this.entities2d=w,this.dxf=m}}exports.default=DimLinear2DM,_DimLinear2DM=DimLinear2DM,_defineProperty(DimLinear2DM,"newLine","\r\n"),_defineProperty(DimLinear2DM,"Left","left"),_defineProperty(DimLinear2DM,"Right","Right"),_defineProperty(DimLinear2DM,"Top","Top"),_defineProperty(DimLinear2DM,"Bottom","Bottom"),_defineProperty(DimLinear2DM,"getDimLinear",e=>{let t=_lodash.default.cloneDeep(e),r=e.direction,n,i;i=_Math2D.default.getDistance(e.leftBottomBaseCords,e.rightTopBaseCords),_DimLinear2DM.Left===r||_DimLinear2DM.Bottom===r?n=e.rightTopBaseCords:_DimLinear2DM.Right===r||_DimLinear2DM.Top===r?n=e.leftBottomBaseCords:console.log("direction error");let d=_Dimension2DM.default.getDimension({id:e.id,baseCords:n,oppDist:i,distanceFromBase:e.distanceFromBase,dimStyle:e.dimStyle}),o=[],l=[],a=[];o.push(d.leftBottomLine),o.push(d.rightTopLine),o.push(d.middleLine),l.push(d.leftBottomArrowSolid),l.push(d.rightTopArrowSolid),a.push(d.leftBottomPoint),a.push(d.rightTopPoint),t.leftBottomTextCords=d.leftBottomMTextCords,t.rightTopTextCords=d.rightTopMTextCords,t.entities2d=new _Entities2D2._Entities2D({lineArr:o,pointArr:a,mTextArr:[],solidArr:l});let s=t.text;"2"!==e.dimStyle.unit;let g={id:"DMLT"+t.id,recWidth:3*e.dimStyle.scale*s.length,height:parseFloat(t.dimStyle.textHeight)*t.dimStyle.scale,text:s};if(_DimLinear2DM.Left===r){let e=new _MText2DM.default(_objectSpread({cords:d.rightTopMTextCords,rotationAngleRadians:_Math2D.default.toRadians(270)},g));return t.entities2d.mTextArr.push(e),_DimLinear2DM.getRotated(t,_Math2D.default.toRadians(180),d.leftBottomPoint.pointCords)}if(_DimLinear2DM.Right===r){let e=new _MText2DM.default(_objectSpread({cords:d.leftBottomMTextCords,rotationAngleRadians:_Math2D.default.toRadians(90)},g));return t.entities2d.mTextArr.push(e),t}if(_DimLinear2DM.Top===r){let e=new _MText2DM.default(_objectSpread({cords:d.rightTopMTextCords,rotationAngleRadians:_Math2D.default.toRadians(-90)},g));return t.entities2d.mTextArr.push(e),_DimLinear2DM.getRotated(t,_Math2D.default.toRadians(90),d.leftBottomPoint.pointCords)}if(_DimLinear2DM.Bottom===r){let e=new _MText2DM.default(_objectSpread({cords:d.leftBottomMTextCords,rotationAngleRadians:_Math2D.default.toRadians(90)},g));return t.entities2d.mTextArr.push(e),_DimLinear2DM.getRotated(t,_Math2D.default.toRadians(270),d.leftBottomPoint.pointCords)}console.log("error in direction DIMLinear2dM")}),_defineProperty(DimLinear2DM,"getDimLinearArray",e=>{let t=[];return e.forEach(e=>t.push(_DimLinear2DM.getDimLinear(e))),t}),_defineProperty(DimLinear2DM,"getMoved",function(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=_lodash.default.cloneDeep(e);return n.entities2d=_Entities2D2._Entities2D.getMoved({entities:e.entities2d,rotationAngle:t,rotationCords:r}),n}),_defineProperty(DimLinear2DM,"getMovedArray",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(0===t&&0===r)return e;else{let n=[];return e.forEach(e=>n.push(_DimLinear2DM.getMoved(e,t,r))),n}}),_defineProperty(DimLinear2DM,"getScaled",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:0,i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:new _Cords2D.default;if(1===t)return e;else{let d=_lodash.default.cloneDeep(e);return d.entities2d=_Entities2D2._Entities2D.getScaled({entities:e.entities2d,moveX:r,moveY:n,scale:t,scalePoint:i}),d}}),_defineProperty(DimLinear2DM,"getScaledArray",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:0,i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:new _Cords2D.default;if(1===t)return e;else{let r=[];return e.forEach(e=>r.push(_DimLinear2DM.getScaled(e,t,i))),r}}),_defineProperty(DimLinear2DM,"getRotated",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:new _Cords2D.default;if(0===t)return e;else{let n=_lodash.default.cloneDeep(e);return n.entities2d=_Entities2D2._Entities2D.getRotated({entities:e.entities2d,rotationAngle:t,rotationCords:r}),n}}),_defineProperty(DimLinear2DM,"getRotatedArray",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:new _Cords2D.default;if(0===t)return e;else{let n=[];return e.forEach(e=>n.push(_DimLinear2DM.getRotated(e,t,r))),n}}),_defineProperty(DimLinear2DM,"getThreeJs",e=>{let t=e.entities2d.lineArr[0],r=e.entities2d.lineArr[1],n=e.entities2d.lineArr[2],i=e.entities2d.solidArr[0],d=e.entities2d.solidArr[1],o=e.entities2d.pointArr[0],l=e.entities2d.pointArr[1],a=e.entities2d.mTextArr[0];return t.lineColor=e.lineColor,r.lineColor=e.lineColor,n.lineColor=e.lineColor,i.lineColor=e.lineColor,d.lineColor=e.lineColor,o.lineColor=e.lineColor,l.lineColor=e.lineColor,React.createElement("group",{key:e.id},_Point2DM.default.getThreeJs(o),_Line2DM.default.getThreeJs(t),_Solid2DM.default.getThreeJs(i),_Point2DM.default.getThreeJs(l),_Line2DM.default.getThreeJs(r),_Solid2DM.default.getThreeJs(d),_Line2DM.default.getThreeJs(n),_MText2DM.default.getThreeJs(a))}),_defineProperty(DimLinear2DM,"getThreeJsArray",e=>{let t=[];return e.forEach(e=>t.push(_DimLinear2DM.getThreeJs(e))),t}),_defineProperty(DimLinear2DM,"getDxf",e=>{let t=_id.ID.getDimBlockId();return _Drawing.default.BlockRecords.push({name:t}),{dxf:_DimLinear2DM.getEntityBlockDxf(e,t),block_dxf:_DimLinear2DM.getBlockDxf(e,t)}}),_defineProperty(DimLinear2DM,"getBlockDxf",(e,t)=>"0"+_DimLinear2DM.newLine+"BLOCK"+_DimLinear2DM.newLine+"5"+_DimLinear2DM.newLine+_UtilDXF.UtilDXF.getHandler()+"100"+_DimLinear2DM.newLine+"AcDbEntity"+_DimLinear2DM.newLine+"100"+_DimLinear2DM.newLine+"AcDbBlockBegin"+_DimLinear2DM.newLine+"2"+_DimLinear2DM.newLine+t+"70"+_DimLinear2DM.newLine+"1"+_DimLinear2DM.newLine+"10"+_DimLinear2DM.newLine+e.entities2d.lineArr[0].startCords.x+_DimLinear2DM.newLine+"20"+_DimLinear2DM.newLine+e.entities2d.lineArr[0].startCords.y+_DimLinear2DM.newLine+"30"+_DimLinear2DM.newLine+e.entities2d.lineArr[0].startCords.z+_DimLinear2DM.newLine+"3"+_DimLinear2DM.newLine+t+"1"+_DimLinear2DM.newLine+_DimLinear2DM.newLine+_Line2DM.default.getDxf(e.entities2d.lineArr[0])+_Line2DM.default.getDxf(e.entities2d.lineArr[1])+_Line2DM.default.getDxf(e.entities2d.lineArr[2])+_MText2DM.default.getDxf(e.entities2d.mTextArr[0])+_Solid2DM.default.getDxf(e.entities2d.solidArr[0])+_Solid2DM.default.getDxf(e.entities2d.solidArr[1])+_Point2DM.default.getDxf(e.entities2d.pointArr[0])+_Point2DM.default.getDxf(e.entities2d.pointArr[1])+"0"+_DimLinear2DM.newLine+"ENDBLK"+_DimLinear2DM.newLine+"5"+_DimLinear2DM.newLine+_UtilDXF.UtilDXF.getHandler()+"100"+_DimLinear2DM.newLine+"AcDbEntity"+_DimLinear2DM.newLine+"8"+_DimLinear2DM.newLine+e.layer+_DimLinear2DM.newLine+"100"+_DimLinear2DM.newLine+"AcDbBlockEnd"+_DimLinear2DM.newLine),_defineProperty(DimLinear2DM,"getEntityBlockDxf",(e,t)=>{let r="DLI"===e.dimType?"32":"33",n="0"+_DimLinear2DM.newLine+"DIMENSION"+_DimLinear2DM.newLine+"5"+_DimLinear2DM.newLine+_UtilDXF.UtilDXF.getHandler()+"100"+_DimLinear2DM.newLine+"AcDbEntity"+_DimLinear2DM.newLine+"8"+_DimLinear2DM.newLine+e.layer+_DimLinear2DM.newLine+"6"+_DimLinear2DM.newLine+e.lineType+_DimLinear2DM.newLine+"100"+_DimLinear2DM.newLine+"AcDbDimension"+_DimLinear2DM.newLine+"2"+_DimLinear2DM.newLine+t+"10"+_DimLinear2DM.newLine+e.entities2d.solidArr[0].firstCords.x+_DimLinear2DM.newLine+"20"+_DimLinear2DM.newLine+e.entities2d.solidArr[0].firstCords.y+_DimLinear2DM.newLine+"30"+_DimLinear2DM.newLine+e.entities2d.solidArr[0].firstCords.z+_DimLinear2DM.newLine+"11"+_DimLinear2DM.newLine+e.entities2d.mTextArr[0].cords.x+_DimLinear2DM.newLine+"21"+_DimLinear2DM.newLine+e.entities2d.mTextArr[0].cords.y+_DimLinear2DM.newLine+"31"+_DimLinear2DM.newLine+e.entities2d.mTextArr[0].cords.z+_DimLinear2DM.newLine+"70"+_DimLinear2DM.newLine+r+_DimLinear2DM.newLine+"71"+_DimLinear2DM.newLine+"5"+_DimLinear2DM.newLine+"1"+_DimLinear2DM.newLine+e.entities2d.mTextArr[0].text+_DimLinear2DM.newLine+"3"+_DimLinear2DM.newLine+e.dimStyle.name+_DimLinear2DM.newLine+"100"+_DimLinear2DM.newLine+"AcDbAlignedDimension"+_DimLinear2DM.newLine+"13"+_DimLinear2DM.newLine+e.entities2d.lineArr[0].startCords.x+_DimLinear2DM.newLine+"23"+_DimLinear2DM.newLine+e.entities2d.lineArr[0].startCords.y+_DimLinear2DM.newLine+"33"+_DimLinear2DM.newLine+e.entities2d.lineArr[0].startCords.z+_DimLinear2DM.newLine+"14"+_DimLinear2DM.newLine+e.entities2d.lineArr[1].startCords.x+_DimLinear2DM.newLine+"24"+_DimLinear2DM.newLine+e.entities2d.lineArr[1].startCords.y+_DimLinear2DM.newLine+"34"+_DimLinear2DM.newLine+e.entities2d.lineArr[1].startCords.z+_DimLinear2DM.newLine;return"DAL"!==e.dimType&&(n+="100"+_DimLinear2DM.newLine+"AcDbRotatedDimension"+_DimLinear2DM.newLine),n}),_defineProperty(DimLinear2DM,"getDxfArray",e=>{let t="",r="";return e.forEach(e=>{let n=_DimLinear2DM.getDxf(e);t+=n.dxf,r+=n.block_dxf}),{dxf:t,block_dxf:r}});const short_dimension=exports.short_dimension=function(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"lr",r=e.entities2d,n=e.dimStyle.scale,i=r.lineArr[2],d=r.solidArr[0],o=r.solidArr[1],l=r.mTextArr[0],a=l.recWidth,s=d.firstCords,g=o.firstCords,u=_Solid2DM.default.getMovedWithCords(d,s,g),c=_Solid2DM.default.getMovedWithCords(o,g,s),f=_Math2D.default.getDistance(s,d.secondCords),y=2*n+a,p=_Math2D.default.getDistance(i.startCords,i.endCords),L,h,w,m;"lt"===t?(L=_Math2D.default.getAngle(i.endCords,i.startCords),h=_Math2D.default.getCordsWithLengthAndAngle(i.endCords,p+y,L),w=_Math2D.default.getCordsWithLengthAndAngle(i.endCords,f,L+_Math2D.default.radians.rad180),m=_Math2D.default.getCordsWithLengthAndAngle(r.mTextArr[0].cords,a/2+f/1.75,L)):(L=_Math2D.default.getAngle(i.startCords,i.endCords),h=_Math2D.default.getCordsWithLengthAndAngle(i.startCords,p+y,L),w=_Math2D.default.getCordsWithLengthAndAngle(i.startCords,f,L+_Math2D.default.radians.rad180),m=_Math2D.default.getCordsWithLengthAndAngle(r.mTextArr[0].cords,(p+a+y)/2+f/1.75,L));let D=_MText2DM.default.getMovedWithCords(r.mTextArr[0],r.mTextArr[0].cords,m);return i.startCords=w,i.endCords=h,{lineArr:[r.lineArr[0],r.lineArr[1],i],solidArr:[u,c],mTextArr:[D],pointArr:[...r.pointArr]}};"use strict",Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/es.symbol.description.js");var _ACColors=require("./ACColors"),_Drawing=_interopRequireDefault(require("./Drawing")),_DimStyle2DM;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}class DimStyle2DM{constructor(e){let{name:t="",scale:r="1.0",textHeight:n="2.0",gapExtExo:i="1.0",arrowSize:d="2.0",lineColor:o=_ACColors.ACColors[8],lineColorIndex:l="8",textColor:a=_ACColors.ACColors[3],textColorIndex:s="3",measurementScale:g="1.0",unit:u="2",noDecPos:c="0",distanceFromBase:f=5,lineType:y="CONTINUOUS",layer:p="Dimensions"}=e;this.name=t,this.scale=r,this.textHeight=n,this.gapExtExo=i,this.arrowSize=d,this.textColor=a,this.textColorIndex=s,this.lineColor=o,this.lineColorIndex=l,this.lineType=y,this.layer=p,this.unit=u,this.noDecPos=c,this.measurementScale=g,this.distanceFromBase=f}static getDimStyles(e){let t=_getStartDimStyleTableDxf._.call(DimStyle2DM,e[0]);for(let r=0;r<_Drawing.default.DimStyles.length;r++)t+=_getStartDimStyleDxf._.call(DimStyle2DM,e[r+1]),t+=_getDimStyleDXF._.call(DimStyle2DM,_Drawing.default.DimStyles[r]);return t+="0"+this.newLine+"ENDTAB"+this.newLine,t}static getDimStyles1(e){let t="*********"+e[0]+"*********"+e[1]+"*********"+e[2]+"*********"+e[3];return t}}exports.default=DimStyle2DM,_DimStyle2DM=DimStyle2DM,_defineProperty(DimStyle2DM,"newLine","\r\n");var _getStartDimStyleTableDxf={_:e=>"0"+_DimStyle2DM.newLine+"TABLE"+_DimStyle2DM.newLine+"2"+_DimStyle2DM.newLine+"DIMSTYLE"+_DimStyle2DM.newLine+"5"+_DimStyle2DM.newLine+e+"100"+_DimStyle2DM.newLine+"AcDbSymbolTable"+_DimStyle2DM.newLine+"70"+_DimStyle2DM.newLine+"3"+_DimStyle2DM.newLine+"100"+_DimStyle2DM.newLine+"AcDbDimStyleTable"+_DimStyle2DM.newLine+"71"+_DimStyle2DM.newLine+"3"+_DimStyle2DM.newLine},_getStartDimStyleDxf={_:e=>"0"+_DimStyle2DM.newLine+"DIMSTYLE"+_DimStyle2DM.newLine+"105"+_DimStyle2DM.newLine+e+"100"+_DimStyle2DM.newLine+"AcDbSymbolTableRecord"+_DimStyle2DM.newLine+"100"+_DimStyle2DM.newLine+"AcDbDimStyleTableRecord"+_DimStyle2DM.newLine},_getDimStyleDXF={_:e=>{let t="2"+_DimStyle2DM.newLine+e.name+_DimStyle2DM.newLine+"70"+_DimStyle2DM.newLine+"0"+_DimStyle2DM.newLine;return"Standard"!==e.name&&(t+="40"+_DimStyle2DM.newLine+e.scale+_DimStyle2DM.newLine+"41"+_DimStyle2DM.newLine+e.arrowSize+_DimStyle2DM.newLine+"42"+_DimStyle2DM.newLine+e.gapExtExo+_DimStyle2DM.newLine+"43"+_DimStyle2DM.newLine+"0.0"+_DimStyle2DM.newLine+"44"+_DimStyle2DM.newLine+e.gapExtExo+_DimStyle2DM.newLine+"73"+_DimStyle2DM.newLine+"0"+_DimStyle2DM.newLine+"77"+_DimStyle2DM.newLine+"1"+_DimStyle2DM.newLine+"140"+_DimStyle2DM.newLine+e.textHeight+_DimStyle2DM.newLine+"144"+_DimStyle2DM.newLine+e.measurementScale+_DimStyle2DM.newLine+"147"+_DimStyle2DM.newLine+e.gapExtExo+_DimStyle2DM.newLine+"176"+_DimStyle2DM.newLine+e.lineColorIndex+_DimStyle2DM.newLine+"177"+_DimStyle2DM.newLine+e.lineColorIndex+_DimStyle2DM.newLine+"178"+_DimStyle2DM.newLine+e.textColorIndex+_DimStyle2DM.newLine+"271"+_DimStyle2DM.newLine+e.noDecPos+_DimStyle2DM.newLine+"272"+_DimStyle2DM.newLine+"0"+_DimStyle2DM.newLine+"277"+_DimStyle2DM.newLine+e.unit+_DimStyle2DM.newLine+"290"+_DimStyle2DM.newLine+"0"+_DimStyle2DM.newLine+"371"+_DimStyle2DM.newLine+"0"+_DimStyle2DM.newLine+"372"+_DimStyle2DM.newLine+"0"+_DimStyle2DM.newLine),t}};"use strict",require("core-js/modules/es.symbol.description.js"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/es.parse-float.js"),require("core-js/modules/es.regexp.to-string.js");var _id=require("./id"),_Cords2D=_interopRequireDefault(require("./Cords2D")),_Point2DM=_interopRequireDefault(require("./Point2DM")),_Line2DM=_interopRequireDefault(require("./Line2DM")),_lodash=_interopRequireDefault(require("lodash")),_Math2D=_interopRequireDefault(require("./Math2D")),_MText2DM=_interopRequireDefault(require("./MText2DM")),_Solid2DM=_interopRequireDefault(require("./Solid2DM")),_Entities2D2=require("./_Entities2D"),_BlockEntities2D2=require("./_BlockEntities2D"),_Drawing=_interopRequireDefault(require("./Drawing")),_UtilDXF=require("./UtilDXF"),_DimV2DM;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ownKeys(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),r.push.apply(r,t)}return r}function _objectSpread(n){for(var e=1,i;e<arguments.length;e++)i=null==arguments[e]?{}:arguments[e],e%2?ownKeys(Object(i),!0).forEach(function(e){_defineProperty(n,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))});return n}function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}function _assertClassBrand(r,e,t){if("function"==typeof r?r===e:r.has(e))return 3>arguments.length?e:t;throw new TypeError("Private element is not present on this object")}class DimV2DM{constructor(e){let{id:t=_id.ID.getId(),bottomCords:r=null,topCords:n=null,distanceFromBase:i=5,dimPos:d="c",isDimLeft:o=!0,dimStyle:l=null,dimType:a="DLI",rotationAngleInRadians:s=0,rot_match_point:g="lb",text:u=""}=e;this.id=t,this.dimType=a,this.bottomCords=r,this.topCords=n,this.distanceFromBase=i,this.dimPos=d,this.rot_match_point=g,this.rotationAngleInRadians=s,this.isDimLeft=o,this.dimStyle=l,this.text=u}static get_vertical_dimension(e){let t=e.id,r=e.dimStyle,n=parseFloat(r.scale),i=e.text.toString(),d=1.4*i.length*n,o=r.lineType,l=r.layer,a=r.textColor,s=r.textColorIndex,g=r.lineColor,u=r.lineColorIndex,c=parseFloat(r.textHeight)*n,f=e.dimPos,y=parseFloat(r.gapExtExo)*n,p=e.bottomCords,L=e.topCords,h=e.isDimLeft,w=e.distanceFromBase*n,m,D;"2"===r.unit?(m=_assertClassBrand(DimV2DM,this,_SOLID_LENGTH_MM)._*n,D=_assertClassBrand(DimV2DM,this,_SOLID_HALF_HEIGHT_MM)._*n):(m=_assertClassBrand(DimV2DM,this,_SOLID_LENGTH_IN)._*n,D=_assertClassBrand(DimV2DM,this,_SOLID_HALF_HEIGHT_IN)._*n);let A=_Math2D.default.getDistance(p,L),x=w+y,b=_lodash.default.cloneDeep(p),C=_lodash.default.cloneDeep(L),_,E,T;h?(_=new _Cords2D.default(b.x-y,b.y),E=new _Cords2D.default(b.x-x,_.y),T=new _Cords2D.default(E.x+y,E.y)):(_=new _Cords2D.default(b.x+y,b.y),E=new _Cords2D.default(b.x+x,_.y),T=new _Cords2D.default(E.x-y,E.y));let v=new _Cords2D.default(_.x,_.y+A),M=new _Cords2D.default(E.x,E.y+A),S=new _Cords2D.default(T.x,T.y+A),P=T,j=new _Cords2D.default(T.x+D,T.y+m),F=new _Cords2D.default(T.x-D,T.y+m),B=S,I=new _Cords2D.default(S.x+D,S.y-m),R=new _Cords2D.default(S.x-D,S.y-m),k=new _Cords2D.default(T.x-(c/2+n),T.y+A/2);if("t"===f){let e=_lodash.default.cloneDeep(T),t=_lodash.default.cloneDeep(S);T.y=T.y-m+2*n,S.y+=d+m+2*n,k.y+=A/2+m+n+d/2,P=e,j=new _Cords2D.default(e.x-D,e.y-m),F=new _Cords2D.default(e.x+D,e.y-m),B=t,I=new _Cords2D.default(t.x-D,t.y+m),R=new _Cords2D.default(t.x+D,t.y+m)}else if("b"===f){let e=_lodash.default.cloneDeep(T),t=_lodash.default.cloneDeep(S);T.y=T.y-d+m+2*n,S.y+=m+2*n,k.y-=A/2+m+n+d/2,P=e,j=new _Cords2D.default(e.x-D,e.y-m),F=new _Cords2D.default(e.x+D,e.y-m),B=t,I=new _Cords2D.default(t.x-D,t.y+m),R=new _Cords2D.default(t.x+D,t.y+m)}let O=new _Point2DM.default({id:"DBP"+t,lineType:o,pointCords:b}),N=new _Point2DM.default({id:"DTP"+t,lineType:o,pointCords:C}),H=new _Point2DM.default({id:"DDP"+t,lineType:o,pointCords:T}),z=new _Line2DM.default({id:"DBL"+t,color:g,colorIndex:u,layer:l,lineType:o,startCords:_,endCords:E}),U=new _Line2DM.default({id:"DTL"+t,color:g,colorIndex:u,layer:l,lineType:o,startCords:v,endCords:M}),J=new _Line2DM.default({id:"DML"+t,color:g,colorIndex:u,layer:l,lineType:o,startCords:T,endCords:S}),X=new _MText2DM.default({cords:k,id:"DMT"+t,recWidth:3*n*i.length,height:c,text:i,color:a,colorIndex:s,rotationAngleRadians:_Math2D.default.radians.rad90}),W=new _Solid2DM.default({id:"DBS"+t,color:g,colorIndex:u,layer:l,lineType:o,firstCords:P,secondCords:j,thirdCords:F,fourthCords:F}),V=new _Solid2DM.default({id:"DTS"+t,color:g,colorIndex:u,layer:l,lineType:o,firstCords:B,secondCords:I,thirdCords:R,fourthCords:R});return{lineArr:[z,U,J],solidArr:[W,V],pointArr:[O,N,H],mTextArr:[X]}}static get_rotation_vertical_dimension(e){let t=this.get_vertical_dimension(e);const r=e.rotationAngleInRadians,n="lb"===e.rot_match_point?e.bottomCords:e.topCords;if(0===r)return _objectSpread({},t);else{let e=_Line2DM.default.getRotatedArray(t.lineArr,r,n),i=_Solid2DM.default.getRotatedArray(t.solidArr,r,n),d=_Point2DM.default.getRotatedArray(t.pointArr,r,n),o=_MText2DM.default.getRotatedArray(t.mTextArr,r,n);return{lineArr:e,solidArr:i,pointArr:d,mTextArr:o}}}static getMovedWithCords(e,t,r){let n=r.x-t.x,i=r.y-t.y;return this.getMoved(e,n,i)}static getMovedArrayWithCords(e,t,r){let n=r.x-t.x,i=r.y-t.y;return this.getMovedArray(e,n,i)}static getDxf_entities2d(e){let t=this.get_rotation_vertical_dimension(e),r=t.lineArr[0],n=t.lineArr[1],i=t.lineArr[2],d=t.solidArr[0],o=t.solidArr[1],l=t.pointArr[0],a=t.pointArr[1],s=t.mTextArr[0],g="";return g+=_Point2DM.default.getDxf(l),g+=_Point2DM.default.getDxf(a),g+=_Line2DM.default.getDxf(r),g+=_Line2DM.default.getDxf(n),g+=_Line2DM.default.getDxf(i),g+=_Solid2DM.default.getDxf(d),g+=_Solid2DM.default.getDxf(o),g+=_MText2DM.default.getDxf(s),g}static getDxf_block_entities2d(e){let t=new _Entities2D2._Entities2D(_objectSpread({},this.get_rotation_vertical_dimension(e))),r=new _BlockEntities2D2._BlockEntities2D({entities2d:t,blockName:"DimV"+_id.ID.getBlockId()});return _BlockEntities2D2._BlockEntities2D.getDxf(r)}}exports.default=DimV2DM,_DimV2DM=DimV2DM;var _SOLID_LENGTH_MM={_:2.5},_SOLID_HALF_HEIGHT_MM={_:.3333},_SOLID_LENGTH_IN={_:.625},_SOLID_HALF_HEIGHT_IN={_:.125};_defineProperty(DimV2DM,"getMoved",function(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=_lodash.default.cloneDeep(e);return n.bottomCords=_Cords2D.default.getMoved2D(e.bottomCords,t,r),n.topCords=_Cords2D.default.getMoved2D(e.topCords,t,r),n}),_defineProperty(DimV2DM,"getMovedArray",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(0===t&&0===r)return e;else{let n=[];return e.forEach(e=>n.push(_DimV2DM.getMoved(e,t,r))),n}}),_defineProperty(DimV2DM,"getScaled",function(e,t){let r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{x:0,y:0,z:0},n=_lodash.default.cloneDeep(e);return n.bottomCords=_Cords2D.default.getScaled2D(e.bottomCords,t,r),n.topCords=_Cords2D.default.getScaled2D(e.topCords,t,r),n.dimStyle.scale=t,n}),_defineProperty(DimV2DM,"getScaledArray",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(1===t)return e;else{let n=[];return e.forEach(e=>n.push(_DimV2DM.getScaled(e,t,r))),n}}),_defineProperty(DimV2DM,"getRotated",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(0===t)return e;else{let n=_lodash.default.cloneDeep(e);return n.bottomCords=_Cords2D.default.getRotated2D(e.bottomCords,t,r),n.topCords=_Cords2D.default.getScaled2D(e.topCords,t,r),n}}),_defineProperty(DimV2DM,"getRotatedArray",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(0===t)return e;else{let n=[];return e.forEach(e=>n.push(_DimV2DM.getRotated(e,t,r))),n}}),_defineProperty(DimV2DM,"getMirrored",function(e,t){let r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"x",n=_lodash.default.cloneDeep(e);return n.bottomCords=_Cords2D.default.getMirrored2D(e.bottomCords,t,r),n.topCords=_Cords2D.default.getMirrored2D(e.topCords,t,r),n}),_defineProperty(DimV2DM,"getMirroredArray",function(e,t){let r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"x",n=[];return e.forEach(e=>n.push(_DimV2DM.getMirrored(e,t,r))),n}),_defineProperty(DimV2DM,"getThreeJs",e=>{let t=_DimV2DM.get_rotation_vertical_dimension(e),r=t.lineArr[0],n=t.lineArr[1],i=t.lineArr[2],d=t.solidArr[0],o=t.solidArr[1],l=t.pointArr[0],a=t.pointArr[1],s=t.mTextArr[0];return React.createElement("group",{key:e.id},_Point2DM.default.getThreeJs(l),_Line2DM.default.getThreeJs(r),_Solid2DM.default.getThreeJs(d),_Point2DM.default.getThreeJs(a),_Line2DM.default.getThreeJs(n),_Solid2DM.default.getThreeJs(o),_Line2DM.default.getThreeJs(i),_MText2DM.default.getThreeJs(s))}),_defineProperty(DimV2DM,"getThreeJsArray",e=>{let t=[];for(let r=0;r<e.length;r++)t.push(_DimV2DM.getThreeJs(e[r]));return t}),_defineProperty(DimV2DM,"getDimensionDxf",e=>{let t=_DimV2DM.get_rotation_vertical_dimension(e),r=_id.ID.getDimBlockId();return _Drawing.default.BlockRecords.push({name:r}),{dxf:_DimV2DM.getEntityBlockDxf(e,t,r),block_dxf:_DimV2DM.getBlockDxf(e,t,r)}}),_defineProperty(DimV2DM,"getDimensionDxfArray",e=>{let t="",r="";for(let n=0,i;n<e.length;n++)i=_DimV2DM.getDimensionDxf(e[n]),t+=i.dxf,r+=i.block_dxf;return{dxf:t,block_dxf:r}}),_defineProperty(DimV2DM,"newLine","\r\n"),_defineProperty(DimV2DM,"getBlockDxf",(e,t,r)=>{let n=e.dimStyle,i=n.layer;return"0"+_DimV2DM.newLine+"BLOCK"+_DimV2DM.newLine+"5"+_DimV2DM.newLine+_UtilDXF.UtilDXF.getHandler()+"100"+_DimV2DM.newLine+"AcDbEntity"+_DimV2DM.newLine+"100"+_DimV2DM.newLine+"AcDbBlockBegin"+_DimV2DM.newLine+"2"+_DimV2DM.newLine+r+"70"+_DimV2DM.newLine+"1"+_DimV2DM.newLine+"10"+_DimV2DM.newLine+t.lineArr[0].startCords.x+_DimV2DM.newLine+"20"+_DimV2DM.newLine+t.lineArr[0].startCords.y+_DimV2DM.newLine+"30"+_DimV2DM.newLine+t.lineArr[0].startCords.z+_DimV2DM.newLine+"3"+_DimV2DM.newLine+r+"1"+_DimV2DM.newLine+_DimV2DM.newLine+_Line2DM.default.getDxf(t.lineArr[0])+_Line2DM.default.getDxf(t.lineArr[1])+_Line2DM.default.getDxf(t.lineArr[2])+_MText2DM.default.getDxf(t.mTextArr[0])+_Solid2DM.default.getDxf(t.solidArr[0])+_Solid2DM.default.getDxf(t.solidArr[1])+_Point2DM.default.getDxf(t.pointArr[0])+_Point2DM.default.getDxf(t.pointArr[1])+_Point2DM.default.getDxf(t.pointArr[2])+"0"+_DimV2DM.newLine+"ENDBLK"+_DimV2DM.newLine+"5"+_DimV2DM.newLine+_UtilDXF.UtilDXF.getHandler()+"100"+_DimV2DM.newLine+"AcDbEntity"+_DimV2DM.newLine+"8"+_DimV2DM.newLine+i+_DimV2DM.newLine+"100"+_DimV2DM.newLine+"AcDbBlockEnd"+_DimV2DM.newLine}),_defineProperty(DimV2DM,"getEntityBlockDxf",(e,t,r)=>{let n=e.dimStyle,i=n.lineType,d=n.layer,o="DLI"===e.dimType?"32":"33",l="0"+_DimV2DM.newLine+"DIMENSION"+_DimV2DM.newLine+"5"+_DimV2DM.newLine+_UtilDXF.UtilDXF.getHandler()+"100"+_DimV2DM.newLine+"AcDbEntity"+_DimV2DM.newLine+"8"+_DimV2DM.newLine+d+_DimV2DM.newLine+"6"+_DimV2DM.newLine+i+_DimV2DM.newLine+"100"+_DimV2DM.newLine+"AcDbDimension"+_DimV2DM.newLine+"2"+_DimV2DM.newLine+r+"10"+_DimV2DM.newLine+t.pointArr[2].pointCords.x+_DimV2DM.newLine+"20"+_DimV2DM.newLine+t.pointArr[2].pointCords.y+_DimV2DM.newLine+"30"+_DimV2DM.newLine+t.pointArr[2].pointCords.z+_DimV2DM.newLine+"11"+_DimV2DM.newLine+t.mTextArr[0].cords.x+_DimV2DM.newLine+"21"+_DimV2DM.newLine+t.mTextArr[0].cords.y+_DimV2DM.newLine+"31"+_DimV2DM.newLine+t.mTextArr[0].cords.z+_DimV2DM.newLine+"70"+_DimV2DM.newLine+o+_DimV2DM.newLine+"71"+_DimV2DM.newLine+"5"+_DimV2DM.newLine+"1"+_DimV2DM.newLine+t.mTextArr[0].text+_DimV2DM.newLine+"3"+_DimV2DM.newLine+n.name+_DimV2DM.newLine+"100"+_DimV2DM.newLine+"AcDbAlignedDimension"+_DimV2DM.newLine+"13"+_DimV2DM.newLine+t.pointArr[1].pointCords.x+_DimV2DM.newLine+"23"+_DimV2DM.newLine+t.pointArr[1].pointCords.y+_DimV2DM.newLine+"33"+_DimV2DM.newLine+t.pointArr[1].pointCords.z+_DimV2DM.newLine+"14"+_DimV2DM.newLine+t.pointArr[0].pointCords.x+_DimV2DM.newLine+"24"+_DimV2DM.newLine+t.pointArr[0].pointCords.y+_DimV2DM.newLine+"34"+_DimV2DM.newLine+t.pointArr[0].pointCords.z+_DimV2DM.newLine+"50"+_DimV2DM.newLine+"90.0"+_DimV2DM.newLine;return"DAL"!==e.dimType&&(l+="100"+_DimV2DM.newLine+"AcDbRotatedDimension"+_DimV2DM.newLine),l}),"use strict",Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/es.symbol.description.js");var _LineType2DM=_interopRequireDefault(require("./LineType2DM")),_TextStyle2DM=_interopRequireDefault(require("./TextStyle2DM")),_Layer2DM=_interopRequireDefault(require("./Layer2DM")),_AppId2DM=_interopRequireDefault(require("./AppId2DM")),_VPort2DM=_interopRequireDefault(require("./VPort2DM")),_Views2DM=_interopRequireDefault(require("./Views2DM")),_Ucs2DM=_interopRequireDefault(require("./Ucs2DM")),_BlockRecords2DM=_interopRequireDefault(require("./BlockRecords2DM")),_DimStyle2DM=_interopRequireDefault(require("./DimStyle2DM")),_Headers2DM=_interopRequireDefault(require("./Headers2DM")),_Blocks2DM=_interopRequireDefault(require("./Blocks2DM")),_UtilDXF=require("./UtilDXF");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}class Drawing{constructor(){_defineProperty(this,"entitiesStringData",""),_defineProperty(this,"blocksStringData",""),_defineProperty(this,"handler",""),_defineProperty(this,"blockName","")}static addEntitiesStringToData(e){this.EntitiesStrData+=e}static addBlocksStringToData(e){this.BlocksStrData+=e}static resetDrawings(){this.EntitiesStrData="",this.BlocksStrData="",Drawing.BlockRecords=[{name:"*Model_Space"},{name:"*Paper_Space"}],_Headers2DM.default.Headers=[{name:"ACADVER",code:"1",value:"AC1021"},{name:"HANDSEED",code:"5",value:"4e20"},{name:"MEASUREMENT",code:"70",value:"1"},{name:"LUNITS",code:"70",value:"2"}],Drawing.DimStyles=[{name:"Standard"}]}static setUnits(e){this.Units=e}static setDimScale(e){this.DimScale=e}static setLTS(e){this.LTS=e}static setCurrentDimStyle(e){this.currentDimStyle=e}getHeaders(){return _Headers2DM.default.getHeaders(_UtilDXF.UtilDXF.getHandler(),Drawing.currentDimStyle)}getDxfLineTypeTable(){let e=[];for(let t=0;t<Drawing.LineTypes.length+1;t++)e.push(_UtilDXF.UtilDXF.getHandler());return _LineType2DM.default.getLineTypes(e)}getDxfTextStyleTable(){let e=[];for(let t=0;t<Drawing.TextStyles.length+1;t++)e.push(_UtilDXF.UtilDXF.getHandler());return _TextStyle2DM.default.getTextStyles(e)}getDxfLayersTable(){return _Layer2DM.default.getLayers()}getDxfAppidTable(){let e=[];for(let t=0;t<Drawing.APPiDs.length+1;t++)e.push(_UtilDXF.UtilDXF.getHandler());return _AppId2DM.default.getAppIDs(e)}getDxfVPortTable(){let e=[];for(let t=0;t<Drawing.VPorts.length+1;t++)e.push(_UtilDXF.UtilDXF.getHandler());return _VPort2DM.default.getVPorts(e)}getDxfViewsTable(){return _Views2DM.default.getViews(_UtilDXF.UtilDXF.getHandler())}getDxfUCSTable(){return _Ucs2DM.default.getUCS(_UtilDXF.UtilDXF.getHandler())}getDxfDimensionStyleTable(){let e=[];for(let t=0;t<Drawing.DimStyles.length+1;t++)e.push(_UtilDXF.UtilDXF.getHandler());return _DimStyle2DM.default.getDimStyles(e)}getDXFBlockRecordsTable(){return _BlockRecords2DM.default.getBlockRecords()}_getBlocks(){let e=[],t=2*Drawing.BlocksDefault.length;for(let r=0;r<t;r++)e.push(_UtilDXF.UtilDXF.getHandler());let r="0"+Drawing.newLine+"SECTION"+Drawing.newLine+"2"+Drawing.newLine+"BLOCKS"+Drawing.newLine;return r+=_Blocks2DM.default.getDefaultBlocks(e),r+=this.blocksStringData,r+=Drawing.BlocksStrData,r+="0"+Drawing.newLine+"ENDSEC"+Drawing.newLine,r}_getClasses(){let e="0"+Drawing.newLine+"SECTION"+Drawing.newLine+"2"+Drawing.newLine+"CLASSES"+Drawing.newLine;return e+="0"+Drawing.newLine+"ENDSEC"+Drawing.newLine,e}_getEntities(){let e="0"+Drawing.newLine+"SECTION"+Drawing.newLine+"2"+Drawing.newLine+"ENTITIES"+Drawing.newLine;return e+=this.entitiesStringData,e+=Drawing.EntitiesStrData,e+="0"+Drawing.newLine+"ENDSEC"+Drawing.newLine,e}_getObjects(){let e="0"+Drawing.newLine+"SECTION"+Drawing.newLine+"2"+Drawing.newLine+"OBJECTS"+Drawing.newLine;return e+="0"+Drawing.newLine+"DICTIONARY"+Drawing.newLine+"5"+Drawing.newLine+_UtilDXF.UtilDXF.getHandler()+"330"+Drawing.newLine+"0"+Drawing.newLine+"100"+Drawing.newLine+"AcDbDictionary"+Drawing.newLine+"281"+Drawing.newLine+"1"+Drawing.newLine+"3"+Drawing.newLine+"ACAD_GROUP"+Drawing.newLine+"350"+Drawing.newLine+"D"+Drawing.newLine+"0"+Drawing.newLine+"DICTIONARY"+Drawing.newLine+"5"+Drawing.newLine+"D"+Drawing.newLine+"330"+Drawing.newLine+"C"+Drawing.newLine+"100"+Drawing.newLine+"AcDbDictionary"+Drawing.newLine+"281"+Drawing.newLine+"1"+Drawing.newLine,e+="0"+Drawing.newLine+"ENDSEC"+Drawing.newLine,e}_getTables(){let e="0"+Drawing.newLine+"SECTION"+Drawing.newLine+"2"+Drawing.newLine+"TABLES"+Drawing.newLine;return e+=this.getDxfVPortTable(),e+=this.getDxfLineTypeTable(),e+=this.getDxfLayersTable(),e+=this.getDxfTextStyleTable(),e+=this.getDxfViewsTable(),e+=this.getDxfUCSTable(),e+=this.getDxfAppidTable(),e+=this.getDxfDimensionStyleTable(),e+=this.getDXFBlockRecordsTable(),e+="0"+Drawing.newLine+"ENDSEC"+Drawing.newLine,e}toDxfString(){let e=this._getClasses();e+=this._getTables(),e+=this._getBlocks(),e+=this._getEntities(),e+=this._getObjects(),e+="0\nEOF\n";let t=this.getHeaders();return t+e}}exports.default=Drawing,_defineProperty(Drawing,"newLine","\r\n"),_defineProperty(Drawing,"EntitiesStrData",""),_defineProperty(Drawing,"BlocksStrData",""),_defineProperty(Drawing,"Units","2"),_defineProperty(Drawing,"DimScale",1),_defineProperty(Drawing,"LTS",1),_defineProperty(Drawing,"currentDimStyle",new _DimStyle2DM.default({})),Drawing.BlockRecords=[{name:"*Model_Space"},{name:"*Paper_Space"}],Drawing.APPiDs=[{name:"ACAD"}],Drawing.LineTypes=[{name:"ByBlock",description:" ",elements:[]},{name:"ByLayer",description:" ",elements:[]},{name:"CONTINUOUS",description:"______",elements:[]},{name:"CENTER",description:"____ _ ____ _ ____",elements:[1.25,-.25,.25,-.25]},{name:"HIDDEN",description:"__ __ __ __ __ __ __ __ __ __ __ __ __ _",elements:[1,-.25]},{name:"DASHED",description:"_ _ _ ",elements:[5,-5]},{name:"PHANTOM",description:"______  __  __  ______  __ ",elements:[5,-1,1,-1,1,-1]},{name:"DOTTED",description:". . . ",elements:[0,-5]}],Drawing.TextStyles=[{name:"Standard",description:"ROMANC.shx",height:2.5,scale:1},{name:"ROMANS",description:"ROMANS.shx",height:2.5,scale:1},{name:"ROMAND",description:"ROMAND.shx",height:2.5,scale:1},{name:"ROMANC",description:"ROMANC.shx",height:2.5,scale:1}],Drawing.BlocksDefault=[{name:"*Paper_Space",baseCords:{x:0,y:0,z:0},blockType:"0",layer:"0"},{name:"*Model_Space",baseCords:{x:0,y:0,z:0},blockType:"0",layer:"0"}],Drawing.DimStyles=[{name:"Standard"}],Drawing.VPorts=[{name:"*ACTIVE"}],Drawing.UCS=[],Drawing.Views=[],"use strict",require("core-js/modules/es.weak-map.js"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/es.symbol.description.js"),require("core-js/modules/es.array.reduce.js"),require("core-js/modules/es.parse-float.js"),require("core-js/modules/es.parse-int.js"),require("core-js/modules/web.dom-collections.iterator.js");var THREE=_interopRequireWildcard(require("three")),_drei=require("@react-three/drei"),_Math2D=_interopRequireDefault(require("./Math2D")),_LineType2DM=_interopRequireDefault(require("./LineType2DM")),_UtilDXF=require("./UtilDXF"),_id=require("./id"),_lodash=_interopRequireDefault(require("lodash")),_Cords2D=_interopRequireDefault(require("./Cords2D")),_Ellipse2DM;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache(n){if("function"!=typeof WeakMap)return null;var i=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache=function(t){return t?r:i})(n)}function _interopRequireWildcard(d,e){if(!e&&d&&d.__esModule)return d;if(null===d||"object"!=typeof d&&"function"!=typeof d)return{default:d};var r=_getRequireWildcardCache(e);if(r&&r.has(d))return r.get(d);var t={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in d)if("default"!=o&&Object.prototype.hasOwnProperty.call(d,o)){var l=n?Object.getOwnPropertyDescriptor(d,o):null;l&&(l.get||l.set)?Object.defineProperty(t,o,l):t[o]=d[o]}return t.default=d,r&&r.set(d,t),t}function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}class Ellipse2DM{constructor(e){let{id:t=_id.ID.getId(),handler:r="null",axisRatio:n=0,color:i="#ffffff",colorIndex:d="7",startAngle:o=0,endAngle:l=6.283,lineType:a="ByLayer",layer:s="0",centerCords:g=null,majorAxisEndPoint:u=null,xRadius:c=null,yRadius:f=null,rotation:y=0,underGroup:p="canvas"}=e;this.id=t,this.handler=r,this.color=i,this.colorIndex=d,this.layer=s,this.lineType=a,this.rotation=y,this.centerCords=g,this.xRadius=c,this.yRadius=f}}exports.default=Ellipse2DM,_Ellipse2DM=Ellipse2DM,_defineProperty(Ellipse2DM,"newLine","\r\n"),_defineProperty(Ellipse2DM,"getMoved",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(0===t&&0===r)return e;else{let n=_lodash.default.cloneDeep(e);return n.centerCords.x=parseFloat(e.centerCords.x)+t,n.centerCords.y=parseFloat(e.centerCords.y)+r,n}}),_defineProperty(Ellipse2DM,"getMovedArray",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(0===t&&0===r)return e;else{let n=[];return e.forEach(e=>n.push(_Ellipse2DM.getMoved(e,t,r))),n}}),_defineProperty(Ellipse2DM,"getScaled",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(1!==t){let n=r.x-(r.x-parseFloat(e.centerCords.x))*t,i=r.y-(r.y-parseFloat(e.centerCords.y))*t;e.centerCords.x=n,e.centerCords.y=i;let d=parseFloat(e.xRadius)*t,o=parseFloat(e.yRadius)*t;e.xRradius=d,e.yRradius=o}return e}),_defineProperty(Ellipse2DM,"getScaledArray",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(1===t)return e;else{let n=[];return e.forEach(e=>n.push(_Ellipse2DM.getScaled(e,t,r))),n}}),_defineProperty(Ellipse2DM,"getRotated",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(0===t)return e;else{let n=parseFloat(e.centerCords.x),i=parseFloat(e.centerCords.y),d=_Math2D.default.getAngle_num(r.x,r.y,n,i),o=d+t;if(_Math2D.default.radians.rad360<o){let e=o/_Math2D.default.radians.rad360;o-=parseInt(e)*_Math2D.default.radians.rad360}let l=_Math2D.default.getDistance_num(r.x,r.y,n,i),a=_Math2D.default.getCordsWithLengthAndAngle(r,l,o);return e.centerCords.x=a.x,e.centerCords.y=a.y,e.rotation=parseFloat(e.rotation)+t,e}}),_defineProperty(Ellipse2DM,"getRotatedArray",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(0===t)return e;else{let n=[];return e.forEach(e=>n.push(_Ellipse2DM.getRotated(e,t,r))),n}}),_defineProperty(Ellipse2DM,"getMirrored",function(e,t){let r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"x",n=_lodash.default.cloneDeep(e);return n.centerCords=_Cords2D.default.getMirrored2D(e.centerCords,t,r),n}),_defineProperty(Ellipse2DM,"getThreeJs",e=>{let t=e.lineType.toLowerCase()===_LineType2DM.default.LineTypeNames.CENTER.toLowerCase(),r=e.lineType.toLowerCase()===_LineType2DM.default.LineTypeNames.DASHED.toLowerCase(),n=e.lineType.toLowerCase()===_LineType2DM.default.LineTypeNames.DOTTED.toLowerCase(),i=e.lineType.toLowerCase()===_LineType2DM.default.LineTypeNames.PHANTOM.toLowerCase(),d=new THREE.EllipseCurve(+e.centerCords.x,+e.centerCords.y,+e.xRadius,+e.yRadius,0,+(2*Math.PI),!1,0),o=d.getPoints(120).reduce((e,t)=>{let{x:r,y:n}=t;return[...e,r,n,0]},[],[]);return React.createElement("group",{key:e.id},React.createElement(_drei.Line,{points:o,color:e.color,linewidth:1,rotation:[0,0,e.rotation],dashed:t||r||n||i}))}),_defineProperty(Ellipse2DM,"getDxf",e=>{var t=Math.abs;let r=0,n="0.0",i=parseFloat(e.xRadius),d=parseFloat(e.yRadius),o=e.rotation===_Math2D.default.toRadians(0),l=e.rotation===_Math2D.default.toRadians(90),a=e.rotation===_Math2D.default.toRadians(180),s=e.rotation===_Math2D.default.toRadians(270),g=e.rotation===_Math2D.default.toRadians(360),u=_Math2D.default.toRadians(0)<e.rotation&&e.rotation<_Math2D.default.toRadians(90),c=_Math2D.default.toRadians(90)<e.rotation&&e.rotation<_Math2D.default.toRadians(180),f=_Math2D.default.toRadians(180)<e.rotation&&e.rotation<_Math2D.default.toRadians(270),y=_Math2D.default.toRadians(270)<e.rotation&&e.rotation<_Math2D.default.toRadians(360);if(i<d){if(o||a||g)n="11\r\n0.0\r\n21\r\n"+d+"\r\n",r=i/d;else if(l||s)n="11\r\n"+d+"\r\n21\r\n0.0\r\n",r=i/d;else if(u||y){let o=t(_Math2D.default.getAdjacentWithHypotenuseAndThetaAngle(d,e.rotation)),l=t(_Math2D.default.getOppositeWithHypotenuseAndThetaAngle(d,e.rotation));n=u?"11\r\n"+-l+"\r\n21\r\n"+o+"\r\n":"11\r\n"+-l+"\r\n21\r\n"+-o+"\r\n",r=i/d}else if(c||f){let o=t(_Math2D.default.getAdjacentWithHypotenuseAndThetaAngle(d,e.rotation)),l=t(_Math2D.default.getOppositeWithHypotenuseAndThetaAngle(d,e.rotation));n=c?"11\r\n"+-l+"\r\n21\r\n"+-o+"\r\n":"11\r\n"+l+"\r\n21\r\n"+-o+"\r\n",r=i/d}}else if(o||a||g)n="11\r\n"+i+"\r\n21\r\n0.0\r\n",r=d/i;else if(l||s)n="11\r\n0.0\r\n21\r\n"+i+"\r\n",r=d/i;else if(u||y){let o=t(_Math2D.default.getAdjacentWithHypotenuseAndThetaAngle(i,e.rotation)),l=t(_Math2D.default.getOppositeWithHypotenuseAndThetaAngle(i,e.rotation));n=u?"11\r\n"+o+"\r\n21\r\n"+l+"\r\n":"11\r\n"+-o+"\r\n21\r\n"+l+"\r\n",r=d/i}else if(c||f){let o=t(_Math2D.default.getAdjacentWithHypotenuseAndThetaAngle(i,e.rotation)),l=t(_Math2D.default.getOppositeWithHypotenuseAndThetaAngle(i,e.rotation));n=c?"11\r\n"+o+"\r\n21\r\n"+-l+"\r\n":"11\r\n"+-o+"\r\n21\r\n"+-l+"\r\n",r=d/i}let p="0"+_Ellipse2DM.newLine+"ELLIPSE"+_Ellipse2DM.newLine+"5"+_Ellipse2DM.newLine+_UtilDXF.UtilDXF.getHandler()+"100"+_Ellipse2DM.newLine+"AcDbEntity"+_Ellipse2DM.newLine+"8\r\n"+e.layer+_Ellipse2DM.newLine+"6\r\n"+e.lineType+_Ellipse2DM.newLine+"100"+_Ellipse2DM.newLine+"AcDbEllipse"+_Ellipse2DM.newLine;return p+="10\r\n"+e.centerCords.x+"\r\n20\r\n"+e.centerCords.y+"\r\n30\r\n"+e.centerCords.z+"\r\n"+n+"31\r\n"+e.centerCords.z+"\r\n40\r\n"+r+_Ellipse2DM.newLine+"41\r\n0.0"+_Ellipse2DM.newLine+"62\r\n"+e.colorIndex+"\r\n",p}),"use strict",Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/es.symbol.description.js"),require("core-js/modules/es.regexp.exec.js"),require("core-js/modules/es.string.replace.js"),require("core-js/modules/esnext.string.replace-all.js"),require("core-js/modules/web.dom-collections.iterator.js");var _Headers2DM;function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}class Headers2DM{}exports.default=Headers2DM,_Headers2DM=Headers2DM,_defineProperty(Headers2DM,"newLine","\r\n"),_defineProperty(Headers2DM,"Headers",[{name:"ACADVER",code:"1",value:"AC1021"},{name:"HANDSEED",code:"5",value:"4e20"},{name:"MEASUREMENT",code:"70",value:"1"},{name:"LUNITS",code:"70",value:"2"}]),_defineProperty(Headers2DM,"getHeader",e=>"9"+_Headers2DM.newLine+"$"+e.name+_Headers2DM.newLine+e.code+_Headers2DM.newLine+e.value+_Headers2DM.newLine),_defineProperty(Headers2DM,"getHeaders",(e,t)=>{let r="0"+_Headers2DM.newLine+"SECTION"+_Headers2DM.newLine+"2"+_Headers2DM.newLine+"HEADER"+_Headers2DM.newLine;for(let n of _Headers2DM.Headers)"HANDSEED"===n.name?(n.value=e.replaceAll(_Headers2DM.newLine,""),r+=_Headers2DM.getHeader(n)):"LUNITS"===n.name?(n.value=t.unit,r+=_Headers2DM.getHeader(n)):r+=_Headers2DM.getHeader(n);let n=_Headers2DM.getDimHeaders(t);for(let i of n)r+=_Headers2DM.getHeader(i);return r+="0"+_Headers2DM.newLine+"ENDSEC"+_Headers2DM.newLine,r}),_defineProperty(Headers2DM,"getDimHeaders",e=>[{name:"DIMSTYLE",code:"2",value:e.name},{name:"DIMASZ",code:"40",value:e.arrowSize},{name:"DIMSCALE",code:"40",value:e.scale},{name:"DIMEXO",code:"40",value:e.gapExtExo},{name:"DIMDLI",code:"40",value:"0"},{name:"DIMEXE",code:"40",value:e.gapExtExo},{name:"DIMTXT",code:"40",value:e.textHeight},{name:"DIMGAP",code:"40",value:e.gapExtExo},{name:"DIMLFAC",code:"40",value:e.measurementScale},{name:"DIMLUNIT",code:"70",value:e.unit},{name:"DIMTIH",code:"70",value:"0"},{name:"DIMTAD",code:"70",value:"1"},{name:"DIMCLRD",code:"70",value:e.lineColorIndex},{name:"DIMCLRE",code:"70",value:e.lineColorIndex},{name:"DIMCLRT",code:"70",value:e.textColorIndex},{name:"DIMDEC",code:"70",value:e.noDecPos},{name:"DIMTDEC",code:"70",value:"0"},{name:"DIMLWD",code:"70",value:"0"},{name:"DIMLWE",code:"70",value:"0"}]),"use strict",require("core-js/modules/es.symbol.description.js"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.ID=void 0,require("core-js/modules/es.regexp.to-string.js");var _UtilDXF=require("./UtilDXF"),_ID;function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}function _assertClassBrand(r,e,t){if("function"==typeof r?r===e:r.has(e))return 3>arguments.length?e:t;throw new TypeError("Private element is not present on this object")}class ID{}exports.ID=ID,_ID=ID;var _intId={_:0},_tempIntId={_:0},_intBlockId={_:0},_intDimBlockId={_:0},_intTextBlockId={_:0},_intHandler={_:0};_defineProperty(ID,"getId",()=>(_intId._=_assertClassBrand(_ID,_ID,_assertClassBrand(_ID,_ID,_intId)._+1),_assertClassBrand(_ID,_ID,_intId)._)),_defineProperty(ID,"getTempId",()=>(_tempIntId._=_assertClassBrand(_ID,_ID,_assertClassBrand(_ID,_ID,_tempIntId)._+1),_assertClassBrand(_ID,_ID,_tempIntId)._)),_defineProperty(ID,"getDimBlockId",()=>"*D"+_UtilDXF.UtilDXF.getHandler()),_defineProperty(ID,"getDimTextBlockId",()=>(_intTextBlockId._=_assertClassBrand(_ID,_ID,_assertClassBrand(_ID,_ID,_intTextBlockId)._+1),"*U"+_assertClassBrand(_ID,_ID,_intTextBlockId)._)),_defineProperty(ID,"getBlockId",()=>(_intBlockId._=_assertClassBrand(_ID,_ID,_assertClassBrand(_ID,_ID,_intBlockId)._+1),_assertClassBrand(_ID,_ID,_intBlockId)._)),_defineProperty(ID,"setBlockId",()=>{_intBlockId._=_assertClassBrand(_ID,_ID,1)}),_defineProperty(ID,"getHandler",()=>(_intHandler._=_assertClassBrand(_ID,_ID,_assertClassBrand(_ID,_ID,_intHandler)._+1),_assertClassBrand(_ID,_ID,_intHandler)._.toString(16).toUpperCase()+"\r\n")),"use strict",Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/es.symbol.description.js");var _UtilDXF=require("./UtilDXF"),_Layer2DM;function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}class Layer2DM{constructor(e){let{name:t="",lineTypeName:r="",color:n="",colorIndex:i="7"}=e;this.name=t,this.lineTypeName=r,this.colorIndex=i,this.color=n}static getLayers(){let e=_getStartLayerTableDxf._.call(Layer2DM);for(let t=0;t<this.Layers.length;t++)e+=_getStartLayerDxf._.call(Layer2DM),e+=_getLayerDXF._.call(Layer2DM,this.Layers[t]);return e+="0"+this.newLine+"ENDTAB"+this.newLine,e}}exports.default=Layer2DM,_Layer2DM=Layer2DM,_defineProperty(Layer2DM,"newLine","\r\n"),_defineProperty(Layer2DM,"LayerNames",{byLayer:"ByLayer",byBlock:"ByBlock",zero:"0",defpoints:"defpoints",dimensions:"Dimensions",template:"Template",annotations:"Annotations"});var _getStartLayerTableDxf={_:()=>"0"+_Layer2DM.newLine+"TABLE"+_Layer2DM.newLine+"2"+_Layer2DM.newLine+"LAYER"+_Layer2DM.newLine+"5"+_Layer2DM.newLine+_UtilDXF.UtilDXF.getHandler()+"100"+_Layer2DM.newLine+"AcDbSymbolTable"+_Layer2DM.newLine+"70"+_Layer2DM.newLine+_Layer2DM.Layers.length+_Layer2DM.newLine},_getStartLayerDxf={_:()=>"0"+_Layer2DM.newLine+"LAYER"+_Layer2DM.newLine+"5"+_Layer2DM.newLine+_UtilDXF.UtilDXF.getHandler()+"100"+_Layer2DM.newLine+"AcDbSymbolTableRecord"+_Layer2DM.newLine+"100"+_Layer2DM.newLine+"AcDbLayerTableRecord"+_Layer2DM.newLine},_getLayerDXF={_:e=>{let t="2"+_Layer2DM.newLine+e.name+_Layer2DM.newLine+"62"+_Layer2DM.newLine+e.colorIndex+_Layer2DM.newLine+"70"+_Layer2DM.newLine+"0"+_Layer2DM.newLine+"6"+_Layer2DM.newLine+e.lineTypeName+_Layer2DM.newLine;return"Defpoints"===e.name&&(t+="290"+_Layer2DM.newLine+"0"+_Layer2DM.newLine),t+="370"+_Layer2DM.newLine+"0.0"+_Layer2DM.newLine+"390"+_Layer2DM.newLine+"0"+_Layer2DM.newLine+"347"+_Layer2DM.newLine+"98"+_Layer2DM.newLine,t}};_defineProperty(Layer2DM,"Layers",[{name:"0",colorIndex:"7",lineTypeName:"CONTINUOUS"},{name:"Defpoints",colorIndex:"7",lineTypeName:"CONTINUOUS"},{name:"Dimensions",colorIndex:"7",lineTypeName:"CONTINUOUS"},{name:"Template",colorIndex:"7",lineTypeName:"CONTINUOUS"},{name:"Annotations",colorIndex:"7",lineTypeName:"CONTINUOUS"}]),"use strict",Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/es.symbol.description.js");var _lodash=_interopRequireDefault(require("lodash")),_ACColors=require("./ACColors"),_id=require("./id"),_Polyline2DM=_interopRequireDefault(require("./Polyline2DM")),_Solid2DM=_interopRequireDefault(require("./Solid2DM")),_Cords2D=_interopRequireDefault(require("./Cords2D")),_Math2D=_interopRequireDefault(require("./Math2D")),_Entities2D2=require("./_Entities2D"),_Text2DM=_interopRequireDefault(require("./Text2DM"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ownKeys(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),r.push.apply(r,t)}return r}function _objectSpread(n){for(var e=1,i;e<arguments.length;e++)i=null==arguments[e]?{}:arguments[e],e%2?ownKeys(Object(i),!0).forEach(function(e){_defineProperty(n,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))});return n}function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}class LeaderArrow2DM{constructor(e){let{id:t=_id.ID.getId(),arrowCords:r=null,arrowSize:n=2,scale:i=1,firstCords:d=null,secondCords:o=null,color:l=_ACColors.ACColors[2],colorIndex:a="2",lineType:s="ByLayer",layer:g="0"}=e;this.id=t,this.color=l,this.colorIndex=a,this.layer=g,this.lineType=s,this.arrowCords=r,this.arrowSize=n,this.scale=i,this.firstCords=d,this.secondCords=o}static getLeaderArrow2D(e){let{leader_arrow:t}=e,r=[t.arrowCords,t.firstCords];null!==t.secondCords&&r.push(t.secondCords);let n=new _Polyline2DM.default({polyCords:r,width:0,closed:!1,color:t.color,colorIndex:t.colorIndex,lineType:t.lineType,layer:t.layer}),i=new _Solid2DM.default({firstCords:new _Cords2D.default(0,0),secondCords:new _Cords2D.default(t.arrowSize,-.3333),thirdCords:new _Cords2D.default(t.arrowSize,.3333),fourthCords:new _Cords2D.default(0,0),color:t.color,lineType:t.lineType,layer:t.layer}),d=_Solid2DM.default.getMovedWithCords(i,new _Cords2D.default(0,0),t.arrowCords),o=_Math2D.default.getAngle(t.arrowCords,t.firstCords),l=_Solid2DM.default.getRotated(d,o,d.firstCords),a=_Solid2DM.default.getScaled(l,t.scale,t.arrowCords);return new _Entities2D2._Entities2D({pLineArr:[n],solidArr:[a]})}static get_h_leader_arrow(e){let{leader_arrow:t,angle_deg:r=115,text:n="",l_or_r:i="l",v_ang_length:d=4}=e,o=n.length+1,l=t.scale,a=_Math2D.default.getCordsWithLengthAndAngle(new _Cords2D.default(t.arrowCords.x,t.arrowCords.y),d*l,_Math2D.default.toRadians(r));t.firstCords=a;let s,g;if(0!==n.length){let e;return"l"===i?(e=new _Cords2D.default(a.x-1.5*o*l,a.y),g=new _Cords2D.default(e.x,e.y+l)):(e=new _Cords2D.default(a.x+1.5*o*l,a.y),g=new _Cords2D.default(a.x,a.y+l)),t.secondCords=e,s=new _Text2DM.default({text:n,startCords:g,endCords:g,height:2*l,style:_Text2DM.default.STYLE.romanS,vJustify:0,hJustify:0}),{leader_arrow:this.getLeaderArrow2D({leader_arrow:t}),text:s,first_cords:a,second_cords:e}}return{leader_arrow:this.getLeaderArrow2D({leader_arrow:t}),first_cords:a}}static getMoved(e){let{leader_arrow:t,moveX:r,moveY:n}=e;if(0===r&&0===n)return t;else{let e=_lodash.default.cloneDeep(t);return e.arrowCords=_Cords2D.default.getMoved2D(t.arrowCords,r,n),e.firstCords=_Cords2D.default.getMoved2D(t.firstCords,r,n),null!==t.secondCords&&(e.secondCords=_Cords2D.default.getMoved2D(t.secondCords,r,n)),new LeaderArrow2DM(_objectSpread({},e))}}static getMovedWithCords(e){let{leader_arrow:t,from:r,to:n}=e,i=n.x-r.x,d=n.y-r.y;return this.getMoved({leader_arrow:t,moveX:i,moveY:d})}static getScaled(e){let{leader_arrow:t,scale:r,scalePoint:n}=e,i=_lodash.default.cloneDeep(t);return 1!==r&&(i.arrowCords=_Cords2D.default.getScaled2D({cords:t.startCords,scale:r,scalePoint:n}),i.firstCords=_Cords2D.default.getScaled2D(t.endCords,r,n),null!==t.secondCords&&(i.secondCords=_Cords2D.default.getScaled2D(t.secondCords,r,n))),new LeaderArrow2DM(_objectSpread({},i))}static getRotated(e){let{leader_arrow:t,rotationAngle:r,rotationCords:n}=e;if(0===r)return t;else{let e=_lodash.default.cloneDeep(t);return e.arrowCords=_Cords2D.default.getRotated2D(t.arrowCords,r,n),e.firstCords=_Cords2D.default.getRotated2D(t.firstCords,r,n),null!==t.secondCords&&(e.secondCords=_Cords2D.default.getRotated2D(t.secondCords,r,n)),new LeaderArrow2DM(_objectSpread({},e))}}static getMirrored(e,t){let r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"x",n=_lodash.default.cloneDeep(e);return n.arrowCords=_Cords2D.default.getMirrored2D(e.arrowCords,t,r),n.firstCords=_Cords2D.default.getMirrored2D(e.firstCords,t,r),null!==e.secondCords&&(n.secondCords=_Cords2D.default.getMirrored2D(e.secondCords,t,r)),new LeaderArrow2DM(_objectSpread({},n))}}exports.default=LeaderArrow2DM,"use strict",require("core-js/modules/es.symbol.description.js"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/es.json.stringify.js");var _react=_interopRequireDefault(require("react")),_Cords2D=_interopRequireDefault(require("./Cords2D")),_lodash=_interopRequireDefault(require("lodash")),_LineType2DM=_interopRequireDefault(require("./LineType2DM")),_UtilDXF=require("./UtilDXF"),_id=require("./id"),_drei=require("@react-three/drei"),_Line2DM;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}function _assertClassBrand(r,e,t){if("function"==typeof r?r===e:r.has(e))return 3>arguments.length?e:t;throw new TypeError("Private element is not present on this object")}class Line2DM{constructor(e){let{id:t=_id.ID.getId(),handler:r="null",color:n="#ffffff",colorIndex:i="7",lineType:d="ByLayer",layer:o="0",startCords:l=null,endCords:a=null}=e;this.id=t,this.handler=r,this.color=n,this.colorIndex=i,this.layer=o,this.lineType=d,this.startCords=l,this.endCords=a}static getMovedWithCords(e,t,r){let n=!!(3<arguments.length&&arguments[3]!==void 0)&&arguments[3],i=r.x-t.x,d=r.y-t.y;return this.getMoved(e,i,d,n)}static getMovedArrayWithCords(e,t,r){let n=!!(3<arguments.length&&arguments[3]!==void 0)&&arguments[3],i=r.x-t.x,d=r.y-t.y;return this.getMovedArray(e,i,d,n)}}exports.default=Line2DM,_Line2DM=Line2DM,_defineProperty(Line2DM,"newLine","\r\n"),_defineProperty(Line2DM,"getMoved",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,n=!!(3<arguments.length&&arguments[3]!==void 0)&&arguments[3];if(0===t&&0===r)return e;else{let i=_lodash.default.cloneDeep(e);return i.startCords=_Cords2D.default.getMoved2D(e.startCords,t,r),i.endCords=_Cords2D.default.getMoved2D(e.endCords,t,r),n&&(i.id=_id.ID.getId()),i}}),_defineProperty(Line2DM,"getMovedArray",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,n=!!(3<arguments.length&&arguments[3]!==void 0)&&arguments[3];if(0===t&&0===r)return e;else{let i=[];return e.forEach(e=>i.push(_Line2DM.getMoved(e,t,r,n))),i}}),_defineProperty(Line2DM,"getScaled",function(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{x:0,y:0,z:0},n=_lodash.default.cloneDeep(e);return n.startCords=_Cords2D.default.getScaled2D(e.startCords,t,r),n.endCords=_Cords2D.default.getScaled2D(e.endCords,t,r),n}),_defineProperty(Line2DM,"getScaledArray",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(1===t)return e;else{let n=[];return e.forEach(e=>n.push(_Line2DM.getScaled(e,t,r))),n}}),_defineProperty(Line2DM,"getRotated",(e,t,r)=>{let n=_lodash.default.cloneDeep(e);return n.startCords=_Cords2D.default.getRotated2D(e.startCords,t,r),n.endCords=_Cords2D.default.getRotated2D(e.endCords,t,r),n}),_defineProperty(Line2DM,"getRotatedArray",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(0===t)return e;else{let n=[];return e.forEach(e=>n.push(_Line2DM.getRotated(e,t,r))),n}}),_defineProperty(Line2DM,"getMirrored",function(e,t){let r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"x",n=_lodash.default.cloneDeep(e);return n.startCords=_Cords2D.default.getMirrored2D(e.startCords,t,r),n.endCords=_Cords2D.default.getMirrored2D(e.endCords,t,r),n}),_defineProperty(Line2DM,"getMirroredArray",function(e,t){let r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"x",n=[];return e.forEach(e=>n.push(_Line2DM.getMirrored(e,t,r))),n}),_defineProperty(Line2DM,"getUniqArray",e=>{const t=e.filter((t,r)=>{const n=JSON.stringify(t);return r===e.findIndex(e=>JSON.stringify(e)===n)});return t}),_defineProperty(Line2DM,"getFixedCords",e=>{let t=_Cords2D.default.getFixedDecimals(e.startCords),r=_Cords2D.default.getFixedDecimals(e.endCords);return{sc:t,ec:r}}),_defineProperty(Line2DM,"getThreeJs",e=>{let t=_assertClassBrand(_Line2DM,_Line2DM,_getIsDashed)._.call(_Line2DM,e),r=t.center||t.dashed||t.dotted||t.phantom,n=_Line2DM.getFixedCords(e);return isNaN(n.sc.x)&&console.log("polyline2d.polyCords[i].x",n.sc.x),isNaN(n.sc.y)&&console.log("polyline2d.polyCords[i].x",n.sc.y),isNaN(n.ec.x)&&console.log("polyline2d.polyCords[i].x",n.ec.x),isNaN(n.ec.y)&&console.log("polyline2d.polyCords[i].x",n.ec.y),_react.default.createElement("group",{key:e.id},_react.default.createElement(_drei.Line,{points:[[n.sc.x,n.sc.y,n.sc.z],[n.ec.x,n.ec.y,n.ec.z]],color:e.color,linewidth:.5,dashed:r}))}),_defineProperty(Line2DM,"getThreeJsArray",e=>{console.log("line2dArr",e);let t=[];for(let r=0;r<e.length;r++)t.push(_Line2DM.getThreeJs(e[r]));return t}),_defineProperty(Line2DM,"getDxf",e=>{let t=_Line2DM.getFixedCords(e);return"0"+_Line2DM.newLine+"LINE"+_Line2DM.newLine+"5"+_Line2DM.newLine+_UtilDXF.UtilDXF.getHandler()+"100"+_Line2DM.newLine+"AcDbEntity"+_Line2DM.newLine+"8"+_Line2DM.newLine+e.layer+_Line2DM.newLine+"6"+_Line2DM.newLine+e.lineType+_Line2DM.newLine+"100"+_Line2DM.newLine+"AcDbLine"+_Line2DM.newLine+"10"+_Line2DM.newLine+t.sc.x+_Line2DM.newLine+"20"+_Line2DM.newLine+t.sc.y+_Line2DM.newLine+"30"+_Line2DM.newLine+t.sc.z+_Line2DM.newLine+"11"+_Line2DM.newLine+t.ec.x+_Line2DM.newLine+"21"+_Line2DM.newLine+t.ec.y+_Line2DM.newLine+"31"+_Line2DM.newLine+t.ec.z+_Line2DM.newLine+"62"+_Line2DM.newLine+e.colorIndex+_Line2DM.newLine}),_defineProperty(Line2DM,"getDxfArray",e=>{let t="";for(let r=0;r<e.length;r++)t+=_Line2DM.getDxf(e[r]);return t});var _getIsDashed={_:e=>({center:e.lineType.toLowerCase()===_LineType2DM.default.LineTypeNames.CENTER.toLowerCase(),dashed:e.lineType.toLowerCase()===_LineType2DM.default.LineTypeNames.DASHED.toLowerCase(),dotted:e.lineType.toLowerCase()===_LineType2DM.default.LineTypeNames.DOTTED.toLowerCase(),phantom:e.lineType.toLowerCase()===_LineType2DM.default.LineTypeNames.PHANTOM.toLowerCase()})};"use strict",Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/es.symbol.description.js"),require("core-js/modules/web.dom-collections.iterator.js");var _Drawing=_interopRequireDefault(require("./Drawing")),_UtilDXF=require("./UtilDXF"),_LineType2DM;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}class LineType2DM{constructor(e){let{name:t="",description:r="",elements:n=[]}=e;this.name=t,this.description=r,this.elements=n}static getElementsSum(e){let t=0;for(let r=0;r<e.length;++r)t+=Math.abs(e[r]);return t}static getLineTypes(e){let t=this.getStartLTypeTableDxf(e[0]);for(let r=0;r<_Drawing.default.LineTypes.length;r++)t+=this.getStartLTypeDxf(e[r+1]),t+=this.getLTypeDXF(_Drawing.default.LineTypes[r]);return t+="0"+_Drawing.default.newLine+"ENDTAB"+_Drawing.default.newLine,t}}exports.default=LineType2DM,_LineType2DM=LineType2DM,_defineProperty(LineType2DM,"LineTypeNames",{byLayer:"ByLayer",byBlock:"ByBlock",CONTINUOUS:"CONTINUOUS",CENTER:"CENTER",DASHED:"DASHED",PHANTOM:"PHANTOM",DOTTED:"DOTTED"}),_defineProperty(LineType2DM,"getStartLTypeTableDxf",()=>"0"+_Drawing.default.newLine+"TABLE"+_Drawing.default.newLine+"2"+_Drawing.default.newLine+"LTYPE"+_Drawing.default.newLine+"5"+_Drawing.default.newLine+_UtilDXF.UtilDXF.getHandler()+"100"+_Drawing.default.newLine+"AcDbSymbolTable"+_Drawing.default.newLine+"70"+_Drawing.default.newLine+_Drawing.default.LineTypes.length+_Drawing.default.newLine),_defineProperty(LineType2DM,"getStartLTypeDxf",()=>"0"+_Drawing.default.newLine+"LTYPE"+_Drawing.default.newLine+"5"+_Drawing.default.newLine+_UtilDXF.UtilDXF.getHandler()+"100"+_Drawing.default.newLine+"AcDbSymbolTableRecord"+_Drawing.default.newLine+"100"+_Drawing.default.newLine+"AcDbLinetypeTableRecord"+_Drawing.default.newLine),_defineProperty(LineType2DM,"getLTypeDXF",e=>{let t="2"+_Drawing.default.newLine+e.name+_Drawing.default.newLine+"3"+_Drawing.default.newLine+e.description+_Drawing.default.newLine+"70"+_Drawing.default.newLine+"0"+_Drawing.default.newLine+"72"+_Drawing.default.newLine+"65"+_Drawing.default.newLine+"73"+_Drawing.default.newLine+e.elements.length+_Drawing.default.newLine+"40"+_Drawing.default.newLine;if(t+=0===e.elements.length?"0":_LineType2DM.getElementsSum(e.elements),t+=_Drawing.default.newLine,0!==e.elements.length)for(const r of e.elements)t+="49"+_Drawing.default.newLine+r+_Drawing.default.newLine,t+="74"+_Drawing.default.newLine+"0"+_Drawing.default.newLine;return t}),"use strict",Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/es.symbol.description.js"),require("core-js/modules/es.math.hypot.js");var _Cords2D=_interopRequireDefault(require("./Cords2D")),_lodash=_interopRequireDefault(require("lodash")),_Math2D;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}class Math2D{static fixDecimalNumber(e){let{decimalNumber:t,noOfDecimals:r=4}=e;return _lodash.default.round(t,r)}static fixAngle(e){if(this.radians.rad360<e){let t=e/this.radians.rad360;return e-Math.floor(t)*this.radians.rad360}return e}static toRadians(e){return e*(Math.PI/180)}static toDegrees(e){return _lodash.default.round(e*(180/Math.PI),4)}static getDistance_num(e,t,r,n){return _lodash.default.round(Math.abs(Math.hypot(r-e,n-t)),4)}static getDistance(e,t){return _lodash.default.round(Math.abs(Math.hypot(t.x-e.x,t.y-e.y)),4)}static getAngle_num(e,t,r,n){var i=Math.acos,d=Math.floor,o=Math.abs;let l=this.radians.rad0,a=o(e-r),s=o(t-n),g=this.getDistance_num(e,t,r,n),u=i(a/g),c=i(s/g),f;if(e===r&&t===n?f=this.radians.rad0:e<r&&t===n?f=this.radians.rad0:e===r&&t<n?f=this.radians.rad90:r<e&&t===n?f=this.radians.rad180:r===e&&n<t?f=this.radians.rad270:e<r&&t<n?f=this.radians.rad0+u:r<e&&t<n?f=this.radians.rad90+c:r<e&&n<t?f=this.radians.rad180+u:e<r&&n<t?f=this.radians.rad270+c:(console.log("Unknown Error"),f=l),this.radians.rad360<f){let e=f/this.radians.rad360;f-=d(e)*this.radians.rad360}return f}static getAngle(e,t){return this.getAngle_num(e.x,e.y,t.x,t.y)}static get_midpoint_cords(e){let{cords1:t,cords2:r}=e,n=(t.x+r.x)/2,i=(t.y+r.y)/2;return new _Cords2D.default(n,i)}static get_midpoint(e){let{x1:t,y1:r,x2:n,y2:i}=e;return new _Cords2D.default((t+n)/2,(r+i)/2)}static getAdjacentWithHypotenuseAndThetaAngle(e,t){return _lodash.default.round(Math.abs(Math.cos(t)*e),4)}static getOppositeWithHypotenuseAndThetaAngle(e,t){return _lodash.default.round(Math.abs(Math.sin(t)*e),4)}static getHypotenuseWithOppositeAndThetaAngle(e,t){return _lodash.default.round(Math.abs(e/Math.sin(t)),4)}static getOppositeWithAdjacentAndThetaAngle(e,t){return _lodash.default.round(Math.abs(e*Math.tan(t)),4)}static getOppositeWithAdjacentAndHypotenuse(e,t){var r=Math.pow;return _lodash.default.round(Math.abs(Math.sqrt(r(t,2)-r(e,2))),4)}static getThetaAngleWithAdjacentAndHypotenuse(e,t){return _lodash.default.round(Math.acos(e/t),4)}static getThetaAngleWithOppositeAndHypotenuse(e,t){return _lodash.default.round(Math.asin(e/t),4)}static getThetaAngleWithAdjacentAndOpposite(e,t){return _lodash.default.round(Math.atan(t/e),4)}static getHypotenuseWithAdjacentAndThetaAngle(e,t){return _lodash.default.round(Math.abs(e/Math.cos(t)),4)}static getHypotenuseWithAdjacentAndOpposite(e,t){var r=Math.pow;return _lodash.default.round(Math.abs(Math.sqrt(r(e,2)+r(t,2))),4)}static getCordsWithLengthAndAngle(e,t,r){var n=Math.abs;let i=r;0>r&&(i=this.radians.rad360-n(r)),i=this.fixAngle(i);let d=n(this.getAdjacentWithHypotenuseAndThetaAngle(t,i)),o=n(this.getOppositeWithHypotenuseAndThetaAngle(t,i)),l=i===this.radians.rad0,a=i===this.radians.rad90,s=i===this.radians.rad180,g=i===this.radians.rad270,u=i===this.radians.rad360,c=i<this.radians.rad90&&this.radians.rad0<i,f=i<this.radians.rad180&&this.radians.rad90<i,y=i<this.radians.rad270&&this.radians.rad180<i,p=i<this.radians.rad360&&this.radians.rad270<i,L=e.x+d,h=e.x-d,w=e.y+o,m=e.y-o,D=e.x+t,A=e.x-t,x=e.y+t,b=e.y-t;if(l||u)return new _Cords2D.default(D,e.y);return a?new _Cords2D.default(e.x,x):s?new _Cords2D.default(A,e.y):g?new _Cords2D.default(e.x,b):c?new _Cords2D.default(L,w):f?new _Cords2D.default(h,w):y?new _Cords2D.default(h,m):p?new _Cords2D.default(L,m):void(console.log("error from math2d angle error"),console.log("cords",e),console.log("length",t),console.log("angleInRadians",r))}static ceilToNearest(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return Math.ceil(e/t)*t}static floorToNearest(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return Math.floor(e/t)*t}static roundToNearest(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return Math.round(e/t)*t}static get_num_with_percentage(e,t){return e/100*t}static isEven(e){return 0==e%2}static isOdd(e){return 1===Math.abs(e%2)}static polarToCartesian(e,t,r,n){let i=(n-90)*Math.PI/180;return{x:e+r*Math.cos(i),y:t+r*Math.sin(i)}}static get_svg_Arc_path_input(e,t,r,n){let i=e.x,d=e.y,o=this.polarToCartesian(i,d,t,n),l=this.polarToCartesian(i,d,t,r),a=180>=n-r?"0":"1";return{start_cords:o,end_cords:l,largeArcFlag:a}}static get_number_arr_by_divisions(e,t){var r=Math.floor;if(!(0>=e)){let n=r(e/t),i=_lodash.default.times(n,_lodash.default.constant(t));return i.push(e-n*t),i}return e}}_Math2D=Math2D,_defineProperty(Math2D,"FIXED_DECIMALS",4),_defineProperty(Math2D,"radians",{rad0:_Math2D.toRadians(0),rad45:_Math2D.toRadians(45),rad90:_Math2D.toRadians(90),rad135:_Math2D.toRadians(135),rad180:_Math2D.toRadians(180),rad225:_Math2D.toRadians(225),rad270:_Math2D.toRadians(270),rad315:_Math2D.toRadians(315),rad360:_Math2D.toRadians(360)}),_defineProperty(Math2D,"DEGREES",{deg0:0,deg45:45,deg90:90,deg135:135,deg180:180,deg225:225,deg270:270,deg315:315,deg360:360});var _default=exports.default=Math2D;"use strict",Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/es.symbol.description.js"),require("core-js/modules/es.parse-float.js"),require("core-js/modules/es.parse-int.js"),require("core-js/modules/es.regexp.to-string.js");var _Math2D=_interopRequireDefault(require("./Math2D")),_drei=require("@react-three/drei"),_UtilDXF=require("./UtilDXF"),_id=require("./id"),_lodash=_interopRequireDefault(require("lodash")),_Cords2D=_interopRequireDefault(require("./Cords2D")),_MText2DM;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}class MText2DM{constructor(e){let{id:t=_id.ID.getId(),handler:r="null",color:n="green",colorIndex:i="3",lineType:d="ByLayer",layer:o="0",cords:l=null,recWidth:a=null,text:s="",height:g=2.5,widthFactor:u=.8,style:c="ROMANS",obliqueAngleRadians:f="0.0",rotationAngleRadians:y="0.0",justify:p=0,underGroup:L="canvas"}=e;s=s.toString();let h=3*s.length*(g/2.5);this.id=t,this.handler=r,this.color=n,this.colorIndex=i,this.layer=o,this.lineType=d,this.style=c,this.cords=l,this.recWidth=a?a:h,this.text=s,this.height=g,this.widthFactor=u,this.obliqueAngleRadians=f,this.rotationAngleRadians=y,this.justify=p,this.underGroup=L}static getMovedWithCords(e,t,r){let n=r.x-t.x,i=r.y-t.y;return this.getMoved(e,n,i)}}exports.default=MText2DM,_MText2DM=MText2DM,_defineProperty(MText2DM,"newLine","\r\n"),_defineProperty(MText2DM,"getMoved",function(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=_lodash.default.cloneDeep(e);return n.cords.x=parseFloat(e.cords.x)+t,n.cords.y=parseFloat(e.cords.y)+r,n}),_defineProperty(MText2DM,"getScaled",function(e,t){let r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{x:0,y:0,z:0},n=_lodash.default.cloneDeep(e);return n.cords=_Cords2D.default.getScaled2D(e.cords,t,r),n.height=parseFloat(e.height)*t,n}),_defineProperty(MText2DM,"getRotated",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(0===t)return e;else{let n=parseFloat(e.cords.x),i=parseFloat(e.cords.y),d=_Math2D.default.getAngle_num(r.x,r.y,n,i),o=d+t;if(_Math2D.default.radians.rad360<o){let e=o/_Math2D.default.radians.rad360;o-=parseInt(e)*_Math2D.default.radians.rad360}let l=_Math2D.default.getDistance_num(r.x,r.y,n,i),a=_Math2D.default.getCordsWithLengthAndAngle(r,l,o);e.cords.x=a.x,e.cords.y=a.y;let s=parseFloat(e.rotationAngleRadians);return e.rotationAngleRadians=t+s,e}}),_defineProperty(MText2DM,"getMovedArray",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(0===t&&0===r)return e;else{let n=[];return e.forEach(e=>n.push(_MText2DM.getMoved(e,t,r))),n}}),_defineProperty(MText2DM,"getScaledArray",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(1===t)return e;else{let n=[];return e.forEach(e=>n.push(_MText2DM.getScaled(e,t,r))),n}}),_defineProperty(MText2DM,"getRotatedArray",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(0===t)return e;else{let n=[];return e.forEach(e=>n.push(_MText2DM.getRotated(e,t,r))),n}}),_defineProperty(MText2DM,"getMirrored",function(e,t){let r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"x",n=_lodash.default.cloneDeep(e);return n.cords=_Cords2D.default.getMirrored2D(e.cords,t,r),n}),_defineProperty(MText2DM,"getMirroredArray",function(e,t){let r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"x",n=[];return e.forEach(e=>n.push(_MText2DM.getMirrored(e,t,r))),n}),_defineProperty(MText2DM,"getThreeJs",e=>{return React.createElement("group",{key:e.id},React.createElement(_drei.Text,{key:e.id,"position-x":e.cords.x,"position-y":e.cords.y,color:e.color,anchorX:["left","center","right"][1],anchorY:["bottom-baseline","bottom","middle","top"][2],rotation:[0,0,e.rotationAngleRadians],fontSize:e.height,lineHeight:.1,letterSpacing:.2,textAlign:"left"}," ",e.text))}),_defineProperty(MText2DM,"getDxf",e=>{let t="0"+_MText2DM.newLine+"MTEXT"+_MText2DM.newLine+"5"+_MText2DM.newLine+_UtilDXF.UtilDXF.getHandler()+"100"+_MText2DM.newLine+"AcDbEntity"+_MText2DM.newLine+"8\r\n"+e.layer+_MText2DM.newLine+"100"+_MText2DM.newLine+"AcDbMText"+_MText2DM.newLine+"10"+_MText2DM.newLine+e.cords.x+_MText2DM.newLine+"20"+_MText2DM.newLine+e.cords.y+_MText2DM.newLine+"30"+_MText2DM.newLine+e.cords.z+_MText2DM.newLine+"40"+_MText2DM.newLine+e.height+_MText2DM.newLine+"41"+_MText2DM.newLine+e.recWidth+_MText2DM.newLine+"46"+_MText2DM.newLine+"0.0"+_MText2DM.newLine+"50"+_MText2DM.newLine+_Math2D.default.toDegrees(e.rotationAngleRadians)+_MText2DM.newLine+"71"+_MText2DM.newLine+"5"+_MText2DM.newLine+"72"+_MText2DM.newLine+"1"+_MText2DM.newLine+"1"+_MText2DM.newLine+"{\\C"+e.colorIndex+";"+e.text+"}"+_MText2DM.newLine+"7"+_MText2DM.newLine+e.style+_MText2DM.newLine+"73"+_MText2DM.newLine+"1"+_MText2DM.newLine+"44"+_MText2DM.newLine+"1.0"+_MText2DM.newLine;return t}),"use strict",require("core-js/modules/es.weak-map.js"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/es.symbol.description.js"),require("core-js/modules/es.array.reduce.js"),require("core-js/modules/es.parse-float.js"),require("core-js/modules/es.parse-int.js"),require("core-js/modules/es.regexp.to-string.js"),require("core-js/modules/web.dom-collections.iterator.js");var _ACColors=require("./ACColors"),_lodash=_interopRequireDefault(require("lodash")),_Cords2D=_interopRequireDefault(require("./Cords2D")),_Math2D=_interopRequireDefault(require("./Math2D")),_drei=require("@react-three/drei"),_id=require("./id"),_LineType2DM=_interopRequireDefault(require("./LineType2DM")),THREE=_interopRequireWildcard(require("three")),_Arc2DM=_interopRequireDefault(require("./Arc2DM")),_Line2DM=_interopRequireDefault(require("./Line2DM")),_MultiArc2DM;function _getRequireWildcardCache(n){if("function"!=typeof WeakMap)return null;var i=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache=function(t){return t?r:i})(n)}function _interopRequireWildcard(d,e){if(!e&&d&&d.__esModule)return d;if(null===d||"object"!=typeof d&&"function"!=typeof d)return{default:d};var r=_getRequireWildcardCache(e);if(r&&r.has(d))return r.get(d);var t={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in d)if("default"!=o&&Object.prototype.hasOwnProperty.call(d,o)){var l=n?Object.getOwnPropertyDescriptor(d,o):null;l&&(l.get||l.set)?Object.defineProperty(t,o,l):t[o]=d[o]}return t.default=d,r&&r.set(d,t),t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ownKeys(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),r.push.apply(r,t)}return r}function _objectSpread(n){for(var e=1,i;e<arguments.length;e++)i=null==arguments[e]?{}:arguments[e],e%2?ownKeys(Object(i),!0).forEach(function(e){_defineProperty(n,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))});return n}function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}class MultiArc2DM{constructor(e){let{id:t=_id.ID.getId(),handler:r="null",color:n=_ACColors.ACColors[2],colorIndex:i="2",lineType:d="ByLayer",layer:o="0",centerCords:l=null,radius:a=null,startAngle:s=null,endAngle:g=null,gap:u=1,isCloseLines:c=!1}=e;this.id=t,this.handler=r,this.color=n,this.colorIndex=i,this.layer=o,this.lineType=d,this.centerCords=l,this.radius=a,this.startAngle=s,this.endAngle=g,this.gap=u,this.isCloseLines=c}static getMovedWithCords(e,t,r){let n=r.x-t.x,i=r.y-t.y;return this.getMoved(e,n,i)}}exports.default=MultiArc2DM,_MultiArc2DM=MultiArc2DM,_defineProperty(MultiArc2DM,"newLine","\r\n"),_defineProperty(MultiArc2DM,"getMoved",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(0===t&&0===r)return e;else{let n=_lodash.default.cloneDeep(e);return n.centerCords=_Cords2D.default.getMoved2D(e.centerCords,t,r),new _MultiArc2DM(_objectSpread({},n))}}),_defineProperty(MultiArc2DM,"getMovedArray",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(0===t&&0===r)return e;else{let n=[];return e.forEach(e=>n.push(_MultiArc2DM.getMoved(e,t,r))),n}}),_defineProperty(MultiArc2DM,"getScaled",function(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{x:0,y:0,z:0},n=_lodash.default.cloneDeep(e);return 1!==t&&(n.centerCords=_Cords2D.default.getScaled2D(n.centerCords,t,r),n.radius*=t,n.gap*=t),n}),_defineProperty(MultiArc2DM,"getScaledArray",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(1===t)return e;else{let n=[];return e.forEach(e=>n.push(_MultiArc2DM.getScaled(e,t,r))),n}}),_defineProperty(MultiArc2DM,"getRotated",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0},n=_lodash.default.cloneDeep(e);if(0!==t){if(n.centerCords=_Cords2D.default.getRotated2D(n.centerCords,t,r),n.startAngle=parseFloat(e.startAngle)+t,_Math2D.default.radians.rad360<n.startAngle){let t=e.startAngle/_Math2D.default.radians.rad360;n.startAngle-=parseInt(t.toString())*_Math2D.default.radians.rad360}if(n.endAngle=parseFloat(e.endAngle)+t,_Math2D.default.radians.rad360<n.endAngle){let t=e.endAngle/_Math2D.default.radians.rad360;n.endAngle-=parseInt(t.toString())*_Math2D.default.radians.rad360}}return n}),_defineProperty(MultiArc2DM,"getRotatedArray",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(0===t)return e;else{let n=[];return e.forEach(e=>n.push(_MultiArc2DM.getRotated(e,t,r))),n}}),_defineProperty(MultiArc2DM,"get_closing_lines",e=>{let t=_Math2D.default.getCordsWithLengthAndAngle(e.centerCords,e.radius,e.startAngle),r=_Math2D.default.getCordsWithLengthAndAngle(e.centerCords,e.radius,e.endAngle),n=_Math2D.default.fixAngle(e.startAngle+_Math2D.default.radians.rad180),i=_Math2D.default.fixAngle(e.endAngle+_Math2D.default.radians.rad180),d=_Math2D.default.getCordsWithLengthAndAngle(t,e.gap/2,n),o=_Math2D.default.getCordsWithLengthAndAngle(t,e.gap/2,e.startAngle),l=_Math2D.default.getCordsWithLengthAndAngle(r,e.gap/2,i),a=_Math2D.default.getCordsWithLengthAndAngle(r,e.gap/2,e.endAngle),s=new _Line2DM.default({startCords:l,endCords:a,colorIndex:e.colorIndex,color:e.color,lineType:e.lineType,layer:e.layer}),g=new _Line2DM.default({startCords:d,endCords:o,colorIndex:e.colorIndex,color:e.color,lineType:e.lineType,layer:e.layer});return[s,g]}),_defineProperty(MultiArc2DM,"getThreeJs",e=>{let t=e.lineType.toLowerCase()===_LineType2DM.default.LineTypeNames.CENTER.toLowerCase(),r=e.lineType.toLowerCase()===_LineType2DM.default.LineTypeNames.DASHED.toLowerCase(),n=e.lineType.toLowerCase()===_LineType2DM.default.LineTypeNames.DOTTED.toLowerCase(),i=e.lineType.toLowerCase()===_LineType2DM.default.LineTypeNames.PHANTOM.toLowerCase(),d=t||r||n||i,o=new THREE.EllipseCurve(+e.centerCords.x,+e.centerCords.y,+(e.radius-e.gap/2),+(e.radius-e.gap/2),+e.startAngle,+e.endAngle,!1,0),l=o.getPoints(120).reduce((e,t)=>{let{x:r,y:n}=t;return[...e,r,n,0]},[],[]),a=new THREE.EllipseCurve(+e.centerCords.x,+e.centerCords.y,+(e.radius+e.gap/2),+(e.radius+e.gap/2),+e.startAngle,+e.endAngle,!1,0),s=a.getPoints(120).reduce((e,t)=>{let{x:r,y:n}=t;return[...e,r,n,0]},[],[]);if(e.isCloseLines){let t=_MultiArc2DM.get_closing_lines(e),r=_Line2DM.default.getThreeJs(t[0]),n=_Line2DM.default.getThreeJs(t[1]);return React.createElement("group",{key:e.id},React.createElement("group",{key:_id.ID.getId()},React.createElement(_drei.Line,{points:l,color:e.color,linewidth:1,dashed:d})),React.createElement("group",{key:_id.ID.getId()},React.createElement(_drei.Line,{points:s,color:e.color,linewidth:1,dashed:d})),r,n)}return React.createElement("group",{key:e.id},React.createElement("group",{key:_id.ID.getId()},React.createElement(_drei.Line,{points:l,color:e.color,linewidth:1,dashed:d})),React.createElement("group",{key:_id.ID.getId()},React.createElement(_drei.Line,{points:s,color:e.color,linewidth:1,dashed:d})))}),_defineProperty(MultiArc2DM,"getDxf",e=>{let t="",r="";if(e.isCloseLines){let n=_MultiArc2DM.get_closing_lines(e);t=_Line2DM.default.getDxf(n[0]),r=_Line2DM.default.getDxf(n[1])}let n=new _MultiArc2DM(_objectSpread(_objectSpread({},e),{},{radius:e.radius-e.gap/2})),i=new _MultiArc2DM(_objectSpread(_objectSpread({},e),{},{radius:e.radius+e.gap/2})),d=_Arc2DM.default.getDxf(n);return d+=_Arc2DM.default.getDxf(i),d+=t,d+=r,d}),"use strict",Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/es.symbol.description.js");var _ACColors=require("./ACColors"),_lodash=_interopRequireDefault(require("lodash")),_Cords2D=_interopRequireDefault(require("./Cords2D")),_Line2DM=_interopRequireDefault(require("./Line2DM")),_Math2D=_interopRequireDefault(require("./Math2D")),_drei=require("@react-three/drei"),_id=require("./id"),_LineType2DM=_interopRequireDefault(require("./LineType2DM")),_react=_interopRequireDefault(require("react")),_MultiLine2DM;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ownKeys(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),r.push.apply(r,t)}return r}function _objectSpread(n){for(var e=1,i;e<arguments.length;e++)i=null==arguments[e]?{}:arguments[e],e%2?ownKeys(Object(i),!0).forEach(function(e){_defineProperty(n,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))});return n}function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}class MultiLine2DM{constructor(e){let{id:t=_id.ID.getId(),handler:r="null",color:n=_ACColors.ACColors[2],colorIndex:i="2",lineType:d="ByLayer",layer:o="0",startCords:l=null,endCords:a=null,gap:s=1,isCloseLines:g=!1}=e;this.id=t,this.handler=r,this.color=n,this.colorIndex=i,this.layer=o,this.lineType=d,this.startCords=l,this.endCords=a,this.gap=s,this.isCloseLines=g}static getMovedWithCords(e,t,r){let n=r.x-t.x,i=r.y-t.y;return this.getMoved(e,n,i)}get_lines(e){let t=!!(1<arguments.length&&arguments[1]!==void 0)&&arguments[1],r=new _Line2DM.default({startCords:e.startCords,endCords:e.endCords,color:e.color,layer:e.layer,lineType:e.lineType,colorIndex:e.colorIndex}),n=_Math2D.default.getAngle(e.startCords,e.endCords),i=_Math2D.default.getCordsWithLengthAndAngle(e.startCords,e.gap/2,n+_Math2D.default.radians.rad90),d=_Math2D.default.getCordsWithLengthAndAngle(e.startCords,e.gap/2,n-_Math2D.default.radians.rad90),o=_Line2DM.default.getMovedWithCords(r,r.startCords,i),l=_Line2DM.default.getMovedWithCords(r,r.startCords,d);return t?{left_top_line:o,right_btm_line:l,c_line:r}:{left_top_line:o,right_btm_line:l}}}exports.default=MultiLine2DM,_MultiLine2DM=MultiLine2DM,_defineProperty(MultiLine2DM,"newLine","\r\n"),_defineProperty(MultiLine2DM,"getMoved",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(0===t&&0===r)return e;else{let n=_lodash.default.cloneDeep(e);return n.startCords=_Cords2D.default.getMoved2D(e.startCords,t,r),n.endCords=_Cords2D.default.getMoved2D(e.endCords,t,r),new _MultiLine2DM(_objectSpread({},n))}}),_defineProperty(MultiLine2DM,"getMovedArray",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(0===t&&0===r)return e;else{let n=[];return e.forEach(e=>n.push(_MultiLine2DM.getMoved(e,t,r))),n}}),_defineProperty(MultiLine2DM,"getScaled",function(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{x:0,y:0,z:0},n=_lodash.default.cloneDeep(e);return 1!==t&&(n.startCords=_Cords2D.default.getScaled2D(n.startCords,t,r),n.endCords=_Cords2D.default.getScaled2D(n.endCords,t,r),n.gap*=t),n}),_defineProperty(MultiLine2DM,"getScaledArray",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(1===t)return e;else{let n=[];return e.forEach(e=>n.push(_MultiLine2DM.getScaled(e,t,r))),n}}),_defineProperty(MultiLine2DM,"getRotated",function(e,t){let r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{x:0,y:0,z:0},n=_lodash.default.cloneDeep(e);return 0!==t&&(n.startCords=_Cords2D.default.getRotated2D(n.startCords,t,r),n.endCords=_Cords2D.default.getRotated2D(n.endCords,t,r)),n}),_defineProperty(MultiLine2DM,"getRotatedArray",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(0===t)return e;else{let n=[];return e.forEach(e=>n.push(_MultiLine2DM.getRotated(e,t,r))),n}}),_defineProperty(MultiLine2DM,"getMirrored",function(e,t){let r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"x",n=_lodash.default.cloneDeep(e);return n.startCords=_Cords2D.default.getMirrored2D(e.startCords,t,r),n.endCords=_Cords2D.default.getMirrored2D(e.endCords,t,r),new _MultiLine2DM(_objectSpread({},n))}),_defineProperty(MultiLine2DM,"get_closing_lines",e=>{let t=_Math2D.default.getAngle(e.startCords,e.endCords),r=_Math2D.default.fixAngle(t+_Math2D.default.radians.rad90),n=_Math2D.default.fixAngle(t-_Math2D.default.radians.rad90),i=_Math2D.default.getCordsWithLengthAndAngle(e.startCords,e.gap/2,r),d=_Math2D.default.getCordsWithLengthAndAngle(e.startCords,e.gap/2,n),o=_Math2D.default.getCordsWithLengthAndAngle(e.endCords,e.gap/2,r),l=_Math2D.default.getCordsWithLengthAndAngle(e.endCords,e.gap/2,n),a=new _Line2DM.default({startCords:o,endCords:l,colorIndex:e.colorIndex,color:e.color,lineType:e.lineType,layer:e.layer}),s=new _Line2DM.default({startCords:i,endCords:d,colorIndex:e.colorIndex,color:e.color,lineType:e.lineType,layer:e.layer});return[a,s]}),_defineProperty(MultiLine2DM,"getThreeJs",e=>{let t=e.lineType.toLowerCase()===_LineType2DM.default.LineTypeNames.CENTER.toLowerCase(),r=e.lineType.toLowerCase()===_LineType2DM.default.LineTypeNames.DASHED.toLowerCase(),n=e.lineType.toLowerCase()===_LineType2DM.default.LineTypeNames.DOTTED.toLowerCase(),i=e.lineType.toLowerCase()===_LineType2DM.default.LineTypeNames.PHANTOM.toLowerCase(),d=t||r||n||i,o=new _MultiLine2DM({}).get_lines(e),l=_Line2DM.default.getFixedCords(o.left_top_line),a=_Line2DM.default.getFixedCords(o.right_btm_line);if(e.isCloseLines){let t=_MultiLine2DM.get_closing_lines(e),r=_Line2DM.default.getThreeJs(t[0]),n=_Line2DM.default.getThreeJs(t[1]);return _react.default.createElement("group",{key:e.id},_react.default.createElement("group",{key:_id.ID.getId()},_react.default.createElement(_drei.Line,{points:[[l.sc.x,l.sc.y,l.sc.z],[l.ec.x,l.ec.y,l.ec.z]],color:e.color,linewidth:.5,dashed:d})),_react.default.createElement("group",{key:_id.ID.getId()},_react.default.createElement(_drei.Line,{points:[[a.sc.x,a.sc.y,a.sc.z],[a.ec.x,a.ec.y,a.ec.z]],color:e.color,linewidth:.5,dashed:d})),r,n)}return _react.default.createElement("group",{key:e.id},_react.default.createElement("group",{key:_id.ID.getId()},_react.default.createElement(_drei.Line,{points:[[l.sc.x,l.sc.y,l.sc.z],[l.ec.x,l.ec.y,l.ec.z]],color:e.color,linewidth:.5,dashed:d})),_react.default.createElement("group",{key:_id.ID.getId()},_react.default.createElement(_drei.Line,{points:[[a.sc.x,a.sc.y,a.sc.z],[a.ec.x,a.ec.y,a.ec.z]],color:e.color,linewidth:.5,dashed:d})))}),_defineProperty(MultiLine2DM,"getDxf",e=>{let t=new _MultiLine2DM({}).get_lines(e),r=t.left_top_line,n=t.right_btm_line,i=_Line2DM.default.getDxf(r);i+=_Line2DM.default.getDxf(n);let d="",o="";if(e.isCloseLines){let t=_MultiLine2DM.get_closing_lines(e);d=_Line2DM.default.getDxf(t[0]),o=_Line2DM.default.getDxf(t[1])}return i+=d,i+=o,i}),"use strict",Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/es.symbol.description.js"),require("core-js/modules/es.parse-float.js"),require("core-js/modules/es.parse-int.js");var _drei=require("@react-three/drei"),_react=_interopRequireDefault(require("react")),_Math2D=_interopRequireDefault(require("./Math2D")),_UtilDXF=require("./UtilDXF"),_id=require("./id"),_lodash=_interopRequireDefault(require("lodash")),_Cords2D=_interopRequireDefault(require("./Cords2D")),_Point2DM;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}class Point2DM{constructor(e){let{id:t=_id.ID.getId(),handler:r="null",color:n="#ffffff",colorIndex:i="7",lineType:d="ByLayer",layer:o="Defpoints",pointCords:l=null,underGroup:a="canvas"}=e;this.id=t,this.handler=r,this.color=n,this.colorIndex=i,this.layer=o,this.lineType=d,this.pointCords=l}}exports.default=Point2DM,_Point2DM=Point2DM,_defineProperty(Point2DM,"newLine","\r\n"),_defineProperty(Point2DM,"getMoved",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(0===t&&0===r)return e;else{let n=_lodash.default.cloneDeep(e);return n.pointCords.x=parseFloat(e.pointCords.x)+t,n.pointCords.y=parseFloat(e.pointCords.y)+r,n}}),_defineProperty(Point2DM,"getMovedArray",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(0===t&&0===r)return e;else{let n=[];return e.forEach(e=>n.push(_Point2DM.getMoved(e,t,r))),n}}),_defineProperty(Point2DM,"getScaled",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(1!==t){let n=r.x-(r.x-parseFloat(e.pointCords.x))*t,i=r.y-(r.y-parseFloat(e.pointCords.y))*t;return e.pointCords.x=n,e.pointCords.y=i,e}return e}),_defineProperty(Point2DM,"getScaledArray",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(1===t)return e;else{let n=[];return e.forEach(e=>n.push(_Point2DM.getScaled(e,t,r))),n}}),_defineProperty(Point2DM,"getRotated",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(0===t)return e;else{let n=parseFloat(e.pointCords.x),i=parseFloat(e.pointCords.y),d=_Math2D.default.getAngle_num(r.x,r.y,n,i),o=d+t;if(_Math2D.default.radians.rad360<o){let e=o/_Math2D.default.radians.rad360;o-=parseInt(e)*_Math2D.default.radians.rad360}let l=_Math2D.default.getDistance_num(r.x,r.y,n,i),a=_Math2D.default.getCordsWithLengthAndAngle(r,l,o);return e.pointCords.x=a.x,e.pointCords.y=a.y,e}}),_defineProperty(Point2DM,"getRotatedArray",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(0===t)return e;else{let n=[];return e.forEach(e=>n.push(_Point2DM.getRotated(e,t,r))),n}}),_defineProperty(Point2DM,"getMirrored",function(e,t){let r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"x",n=_lodash.default.cloneDeep(e);return n.pointCords=_Cords2D.default.getMirrored2D(e.pointCords,t,r),n}),_defineProperty(Point2DM,"getMirroredArray",function(e,t){let r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"x",n=[];return e.forEach(e=>n.push(_Point2DM.getMirrored(e,t,r))),n}),_defineProperty(Point2DM,"getThreeJs",e=>_react.default.createElement("group",{key:e.id},_react.default.createElement(_drei.Line,{points:[[+e.pointCords.x,+e.pointCords.y,+e.pointCords.z]],color:e.color,linewidth:.5,dashed:!1}))),_defineProperty(Point2DM,"getDxf",e=>{let t="0"+_Point2DM.newLine+"POINT"+_Point2DM.newLine+"5"+_Point2DM.newLine+_UtilDXF.UtilDXF.getHandler()+"100"+_Point2DM.newLine+"AcDbEntity"+_Point2DM.newLine+"8\r\n"+e.layer+_Point2DM.newLine+"6\r\n"+e.lineType+_Point2DM.newLine+"100"+_Point2DM.newLine+"AcDbPoint"+_Point2DM.newLine+"10"+_Point2DM.newLine+e.pointCords.x+_Point2DM.newLine+"20"+_Point2DM.newLine+e.pointCords.y+_Point2DM.newLine+"30"+_Point2DM.newLine+e.pointCords.z+_Point2DM.newLine+"62"+_Point2DM.newLine+e.colorIndex+_Point2DM.newLine;return t}),"use strict",require("core-js/modules/es.symbol.description.js"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/es.parse-float.js"),require("core-js/modules/es.parse-int.js"),require("core-js/modules/web.dom-collections.iterator.js");var _drei=require("@react-three/drei"),_Math2D=_interopRequireDefault(require("./Math2D")),_lodash=_interopRequireDefault(require("lodash")),_LineType2DM=_interopRequireDefault(require("./LineType2DM")),_UtilDXF=require("./UtilDXF"),_id=require("./id"),_Cords2D=_interopRequireDefault(require("./Cords2D")),_Polyline2DM;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ownKeys(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),r.push.apply(r,t)}return r}function _objectSpread(n){for(var e=1,i;e<arguments.length;e++)i=null==arguments[e]?{}:arguments[e],e%2?ownKeys(Object(i),!0).forEach(function(e){_defineProperty(n,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))});return n}function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}function _assertClassBrand(r,e,t){if("function"==typeof r?r===e:r.has(e))return 3>arguments.length?e:t;throw new TypeError("Private element is not present on this object")}class Polyline2DM{constructor(e){let{id:t=_id.ID.getId(),handler:r="null",color:n="#ffffff",colorIndex:i="7",lineType:d="ByLayer",layer:o="0",vertices:l=null,polyCords:a=[],width:s=.5,closed:g=!1}=e;this.id=t,this.handler=r,this.color=n,this.colorIndex=i,this.layer=o,this.lineType=d,this.vertices=l,this.polyCords=a,this.width=s,this.closed=g}}exports.default=Polyline2DM,_Polyline2DM=Polyline2DM,_defineProperty(Polyline2DM,"newLine","\r\n"),_defineProperty(Polyline2DM,"getMoved",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(0===t&&0===r)return e;else{let n=_lodash.default.cloneDeep(e);for(let d=0;d<n.polyCords.length;d++)n.polyCords[d]=_Cords2D.default.getMoved2D(e.polyCords[d],t,r);return new _Polyline2DM(_objectSpread({},n))}}),_defineProperty(Polyline2DM,"getMovedArray",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(0===t&&0===r)return e;else{let n=[];return e.forEach(e=>n.push(_Polyline2DM.getMoved(e,t,r))),n}}),_defineProperty(Polyline2DM,"getMovedWithCords",(e,t,r)=>{let n=r.x-t.x,i=r.y-t.y;return _Polyline2DM.getMoved(e,n,i)}),_defineProperty(Polyline2DM,"getMovedArrayWithCords",(e,t,r)=>{let n=r.x-t.x,i=r.y-t.y;return _Polyline2DM.getMovedArray(e,n,i)}),_defineProperty(Polyline2DM,"getScaled",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(1!==t){let n=_lodash.default.cloneDeep(e);for(let d=0;d<n.polyCords.length;d++)n.polyCords[d]=_Cords2D.default.getScaled2D(e.polyCords[d],t,r);return n.width=e.width*t,new _Polyline2DM(_objectSpread({},n))}return e}),_defineProperty(Polyline2DM,"getScaledArray",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(1===t)return e;else{let n=[];return e.forEach(e=>n.push(_Polyline2DM.getScaled(e,t,r))),n}}),_defineProperty(Polyline2DM,"getRotated",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0},n=_lodash.default.cloneDeep(e);if(0===t)return n;for(let d=0;d<e.polyCords.length;d++){let i=parseFloat(e.polyCords[d].x),o=parseFloat(e.polyCords[d].y),l=_Math2D.default.getAngle_num(r.x,r.y,i,o),a=_Math2D.default.getDistance_num(r.x,r.y,i,o),s=l+t;if(_Math2D.default.radians.rad360<s){let e=s/_Math2D.default.radians.rad360;s-=parseInt(e)*_Math2D.default.radians.rad360}let g=_Math2D.default.getCordsWithLengthAndAngle(r,a,s);n.polyCords[d].x=g.x,n.polyCords[d].y=g.y}return new _Polyline2DM(_objectSpread({},n))}),_defineProperty(Polyline2DM,"getRotatedArray",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(0===t)return e;else{let n=[];return e.forEach(e=>n.push(_Polyline2DM.getRotated(e,t,r))),n}}),_defineProperty(Polyline2DM,"getMirrored",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"x",n=_lodash.default.cloneDeep(e);for(let d=0;d<n.polyCords.length;d++)n.polyCords[d]=_Cords2D.default.getMirrored2D(e.polyCords[d],t,r);return new _Polyline2DM(_objectSpread({},n))}),_defineProperty(Polyline2DM,"getThreeJs",e=>{let t=_assertClassBrand(_Polyline2DM,_Polyline2DM,_getIsDashed)._.call(_Polyline2DM,e),r=t.center||t.dashed||t.dotted||t.phantom,n=[];for(let t=0,r;t<e.polyCords.length;t++)r=[parseFloat(e.polyCords[t].x),parseFloat(e.polyCords[t].y),parseFloat(e.polyCords[t].z)],n.push(r),isNaN(e.polyCords[t].x)&&console.log("polyline2d.polyCords[i].x",e.polyCords[t].x),isNaN(e.polyCords[t].y)&&console.log("polyline2d.polyCords[i].x",e.polyCords[t].y);let i=0===e.width?.5:2;return React.createElement("group",{key:e.id,onClick:()=>{console.log("pline")}},React.createElement(_drei.Line,{points:n,color:e.color,linewidth:i,dashed:r}))}),_defineProperty(Polyline2DM,"getThreeJsArray",e=>{let t=[];return e.forEach(e=>t.push(_Polyline2DM.getThreeJs(e))),t}),_defineProperty(Polyline2DM,"getDxf",e=>{let t="0"+_Polyline2DM.newLine+"LWPOLYLINE"+_Polyline2DM.newLine+"5"+_Polyline2DM.newLine+_UtilDXF.UtilDXF.getHandler()+"330"+_Polyline2DM.newLine+"70"+_Polyline2DM.newLine+"100"+_Polyline2DM.newLine+"AcDbEntity"+_Polyline2DM.newLine+"8\r\n"+e.layer+_Polyline2DM.newLine+"6\r\n"+e.lineType+_Polyline2DM.newLine+"100"+_Polyline2DM.newLine+"AcDbPolyline"+_Polyline2DM.newLine+" 90"+_Polyline2DM.newLine+e.polyCords.length+_Polyline2DM.newLine+"70"+_Polyline2DM.newLine+"0"+_Polyline2DM.newLine+"43"+_Polyline2DM.newLine+e.width+_Polyline2DM.newLine,r="";for(const t of e.polyCords)r+="10\r\n"+t.x+"\r\n20\r\n"+t.y+"\r\n42\r\n0\r\n";return t+=r,t+="62"+_Polyline2DM.newLine+e.colorIndex+_Polyline2DM.newLine,t}),_defineProperty(Polyline2DM,"getDxfArray",e=>{let t="";return _lodash.default.isEmpty(e)||e.forEach(e=>t+=_Polyline2DM.getDxf(e)),t});var _getIsDashed={_:e=>({center:e.lineType.toLowerCase()===_LineType2DM.default.LineTypeNames.CENTER.toLowerCase(),dashed:e.lineType.toLowerCase()===_LineType2DM.default.LineTypeNames.DASHED.toLowerCase(),dotted:e.lineType.toLowerCase()===_LineType2DM.default.LineTypeNames.DOTTED.toLowerCase(),phantom:e.lineType.toLowerCase()===_LineType2DM.default.LineTypeNames.PHANTOM.toLowerCase()})};"use strict",Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/es.symbol.description.js");var _lodash=_interopRequireDefault(require("lodash")),_id=require("./id"),_Cords2D=_interopRequireDefault(require("./Cords2D")),_Polyline2DM=_interopRequireDefault(require("./Polyline2DM")),_ACColors=require("./ACColors"),_Rectangular2DM;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ownKeys(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),r.push.apply(r,t)}return r}function _objectSpread(n){for(var e=1,i;e<arguments.length;e++)i=null==arguments[e]?{}:arguments[e],e%2?ownKeys(Object(i),!0).forEach(function(e){_defineProperty(n,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))});return n}function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}class Rectangular2DM{constructor(e){let{id:t=_id.ID.getId(),color:r=_ACColors.ACColors[21],colorIndex:n="2",lineType:i="ByLayer",layer:d="0",length:o=100,height:l=100,width:a=.5,cords:s=new _Cords2D.default,match_Point:g="lb"}=e;this.id=t,this.color=r,this.colorIndex=n,this.layer=d,this.lineType=i,this.length=o,this.height=l,this.width=a,this.cords=s,this.match_Point=g}static get_rectangular_cords(e,t,r){let n=new _Cords2D.default(e.x+t,e.y),i=new _Cords2D.default(e.x,e.y+r),d=new _Cords2D.default(n.x,n.y+r);return{lb_cords:e,rb_cords:n,lt_cords:i,rt_cords:d}}static get_rectangular_pLine(e){let t=e.height,r=e.width,n=e.length,i=e.cords,d=e.match_Point,o=new _Cords2D.default,l=new _Cords2D.default(o.x+n,o.y),a=new _Cords2D.default(o.x,o.y+t),s=new _Cords2D.default(l.x,l.y+t),g;g="lb"===d?o:"rb"===d?l:"lt"===d?a:s;let u=_Cords2D.default.getMoved2D_withCords(o,g,i),c=_Cords2D.default.getMoved2D_withCords(l,g,i),f=_Cords2D.default.getMoved2D_withCords(a,g,i),y=_Cords2D.default.getMoved2D_withCords(s,g,i),p=new _Polyline2DM.default({closed:!0,polyCords:[u,c,y,f,u],width:r,color:e.color,colorIndex:e.colorIndex,lineType:e.lineType});return{pLine:p,cords:{lb:u,rb:c,lt:f,rt:y}}}}exports.default=Rectangular2DM,_Rectangular2DM=Rectangular2DM,_defineProperty(Rectangular2DM,"getMoved",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(0===t&&0===r)return e;else{let n=_lodash.default.cloneDeep(e);return n.cords=_Cords2D.default.getMoved2D(e.cords,t,r),new _Rectangular2DM(_objectSpread({},n))}}),_defineProperty(Rectangular2DM,"getMovedArray",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(0===t&&0===r)return e;else{let n=[];return e.forEach(e=>n.push(_Rectangular2DM.getMoved(e,t,r))),n}}),_defineProperty(Rectangular2DM,"getMovedWithCords",(e,t,r)=>{let n=r.x-t.x,i=r.y-t.y;return _Rectangular2DM.getMoved(e,n,i)}),_defineProperty(Rectangular2DM,"getMovedArrayWithCords",(e,t,r)=>{let n=r.x-t.x,i=r.y-t.y;return _Rectangular2DM.getMovedArray(e,n,i)}),_defineProperty(Rectangular2DM,"getScaled",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(1!==t){let n=_lodash.default.cloneDeep(e);return n.cords=_Cords2D.default.getScaled2D(e.cords,t,r),new _Rectangular2DM(_objectSpread({},n))}return e}),_defineProperty(Rectangular2DM,"getScaledArray",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(1===t)return e;else{let n=[];return e.forEach(e=>n.push(_Rectangular2DM.getScaled(e,t,r))),n}}),_defineProperty(Rectangular2DM,"getRotated",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(0===t)return e;else{let n=_lodash.default.cloneDeep(e);return n.cords=_Cords2D.default.getRotated2D(e.cords,t,r),new _Rectangular2DM(_objectSpread({},n))}}),_defineProperty(Rectangular2DM,"getRotatedArray",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(0===t)return e;else{let n=[];return e.forEach(e=>n.push(_Rectangular2DM.getRotated(e,t,r))),n}}),_defineProperty(Rectangular2DM,"getMirrored",function(e,t){let r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"x",n=_lodash.default.cloneDeep(e);return n.cords=_Cords2D.default.getMirrored2D(e.cords,t,r),new _Rectangular2DM(_objectSpread({},n))}),_defineProperty(Rectangular2DM,"getMirroredArray",function(e,t){let r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"x",n=[];return e.forEach(e=>n.push(_Rectangular2DM.getMirrored(e,t,r))),n}),_defineProperty(Rectangular2DM,"getThreeJs",e=>{let t=_Rectangular2DM.get_rectangular_pLine(e);return _Polyline2DM.default.getThreeJs(t)}),_defineProperty(Rectangular2DM,"getDxf",e=>{let t=_Rectangular2DM.get_rectangular_pLine(e);return _Polyline2DM.default.getDxf(t)}),"use strict",require("core-js/modules/es.weak-map.js"),require("core-js/modules/web.dom-collections.iterator.js"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/es.symbol.description.js");var THREE=_interopRequireWildcard(require("three")),_lodash=_interopRequireDefault(require("lodash")),_UtilDXF=require("./UtilDXF"),_id=require("./id"),_Cords2D=_interopRequireDefault(require("./Cords2D")),_Solid2DM;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache(n){if("function"!=typeof WeakMap)return null;var i=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache=function(t){return t?r:i})(n)}function _interopRequireWildcard(d,e){if(!e&&d&&d.__esModule)return d;if(null===d||"object"!=typeof d&&"function"!=typeof d)return{default:d};var r=_getRequireWildcardCache(e);if(r&&r.has(d))return r.get(d);var t={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in d)if("default"!=o&&Object.prototype.hasOwnProperty.call(d,o)){var l=n?Object.getOwnPropertyDescriptor(d,o):null;l&&(l.get||l.set)?Object.defineProperty(t,o,l):t[o]=d[o]}return t.default=d,r&&r.set(d,t),t}function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}class Solid2DM{constructor(e){let{id:t=_id.ID.getId(),handler:r="null",color:n="yellow",colorIndex:i="2",lineType:d="ByLayer",layer:o="0",firstCords:l=null,secondCords:a=null,thirdCords:s=null,fourthCords:g=null}=e;this.id=t,this.handler=r,this.color=n,this.colorIndex=i,this.layer=o,this.lineType=d,this.firstCords=l,this.secondCords=a,this.thirdCords=s,this.fourthCords=g}static getMovedWithCords(e,t,r){let n=r.x-t.x,i=r.y-t.y;return this.getMoved(e,n,i)}}exports.default=Solid2DM,_Solid2DM=Solid2DM,_defineProperty(Solid2DM,"newLine","\r\n"),_defineProperty(Solid2DM,"getMoved",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(0===t&&0===r)return e;else{let n=_lodash.default.cloneDeep(e);return n.firstCords=_Cords2D.default.getMoved2D(e.firstCords,t,r),n.secondCords=_Cords2D.default.getMoved2D(e.secondCords,t,r),n.thirdCords=_Cords2D.default.getMoved2D(e.thirdCords,t,r),n.fourthCords=_Cords2D.default.getMoved2D(e.fourthCords,t,r),n}}),_defineProperty(Solid2DM,"getMovedArray",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(0===t&&0===r)return e;else{let n=[];return e.forEach(e=>n.push(_Solid2DM.getMoved(e,t,r))),n}}),_defineProperty(Solid2DM,"getScaled",function(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{x:0,y:0,z:0},n=_lodash.default.cloneDeep(e);return 1!==t&&(n.firstCords=_Cords2D.default.getScaled2D(e.firstCords,t,r),n.secondCords=_Cords2D.default.getScaled2D(e.secondCords,t,r),n.thirdCords=_Cords2D.default.getScaled2D(e.thirdCords,t,r),n.fourthCords=_Cords2D.default.getScaled2D(e.fourthCords,t,r)),n}),_defineProperty(Solid2DM,"getScaledArray",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(1===t)return e;else{let n=[];return e.forEach(e=>n.push(_Solid2DM.getScaled(e,t,r))),n}}),_defineProperty(Solid2DM,"getRotated",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(0===t)return e;else{let n=_lodash.default.cloneDeep(e);return n.firstCords=_Cords2D.default.getRotated2D(e.firstCords,t,r),n.secondCords=_Cords2D.default.getRotated2D(e.secondCords,t,r),n.thirdCords=_Cords2D.default.getRotated2D(e.thirdCords,t,r),n.fourthCords=_Cords2D.default.getRotated2D(e.fourthCords,t,r),n}}),_defineProperty(Solid2DM,"getRotatedArray",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(0===t)return e;else{let n=[];return e.forEach(e=>n.push(_Solid2DM.getRotated(e,t,r))),n}}),_defineProperty(Solid2DM,"getMirrored",function(e,t){let r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"x",n=_lodash.default.cloneDeep(e);return n.firstCords=_Cords2D.default.getMirrored2D(e.firstCords,t,r),n.secondCords=_Cords2D.default.getMirrored2D(e.secondCords,t,r),n.thirdCords=_Cords2D.default.getMirrored2D(e.thirdCords,t,r),n.fourthCords=_Cords2D.default.getMirrored2D(e.fourthCords,t,r),n}),_defineProperty(Solid2DM,"getThreeJs",e=>{let t=new THREE.Vector3(e.firstCords.x,e.firstCords.y,e.firstCords.z),r=new THREE.Vector3(e.secondCords.x,e.secondCords.y,e.secondCords.z),n=new THREE.Vector3(e.thirdCords.x,e.thirdCords.y,e.thirdCords.z);const i=new THREE.Shape().moveTo(t.x,t.y).lineTo(r.x,r.y).lineTo(n.x,n.y).lineTo(t.x,t.y);return i.autoClose=!0,React.createElement("mesh",{key:e.id},React.createElement("shapeGeometry",{attach:"geometry",args:[i]}),React.createElement("meshBasicMaterial",{attach:"material",color:e.color}))}),_defineProperty(Solid2DM,"getDxf",e=>"0"+_Solid2DM.newLine+"SOLID"+_Solid2DM.newLine+"5"+_Solid2DM.newLine+_UtilDXF.UtilDXF.getHandler()+"100"+_Solid2DM.newLine+"AcDbEntity"+_Solid2DM.newLine+"8\r\n"+e.layer+_Solid2DM.newLine+"6\r\n"+e.lineType+_Solid2DM.newLine+"100"+_Solid2DM.newLine+"AcDbTrace"+_Solid2DM.newLine+"10"+_Solid2DM.newLine+e.firstCords.x+_Solid2DM.newLine+"20"+_Solid2DM.newLine+e.firstCords.y+_Solid2DM.newLine+"30"+_Solid2DM.newLine+e.firstCords.z+_Solid2DM.newLine+"11"+_Solid2DM.newLine+e.secondCords.x+_Solid2DM.newLine+"21"+_Solid2DM.newLine+e.secondCords.y+_Solid2DM.newLine+"31"+_Solid2DM.newLine+e.secondCords.z+_Solid2DM.newLine+"12"+_Solid2DM.newLine+e.thirdCords.x+_Solid2DM.newLine+"22"+_Solid2DM.newLine+e.thirdCords.y+_Solid2DM.newLine+"32"+_Solid2DM.newLine+e.thirdCords.z+_Solid2DM.newLine+"13"+_Solid2DM.newLine+e.fourthCords.x+_Solid2DM.newLine+"23"+_Solid2DM.newLine+e.fourthCords.y+_Solid2DM.newLine+"33"+_Solid2DM.newLine+e.fourthCords.z+_Solid2DM.newLine+"62"+_Solid2DM.newLine+e.colorIndex+_Solid2DM.newLine),"use strict",Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/es.symbol.description.js"),require("core-js/modules/es.parse-float.js"),require("core-js/modules/es.parse-int.js"),require("core-js/modules/es.regexp.exec.js"),require("core-js/modules/es.regexp.to-string.js"),require("core-js/modules/es.string.replace.js");var _drei=require("@react-three/drei"),_Math2D=_interopRequireDefault(require("./Math2D")),_UtilDXF=require("./UtilDXF"),_id=require("./id"),_lodash=_interopRequireDefault(require("lodash")),_ACColors=require("./ACColors"),_Cords2D=_interopRequireDefault(require("./Cords2D")),_Text2DM;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}class Text2DM{constructor(e){let{id:t=_id.ID.getId(),handler:r="null",color:n=_ACColors.ACColors[3],colorIndex:i="3",lineType:d="ByLayer",layer:o="0",startCords:l=null,endCords:a=null,threeJsCords:s=null,text:g="",height:u=2.5,widthFactor:c=.8,style:f="STANDARD",obliqueAngleRadians:y="0.0",rotationAngleRadians:p="0.0",hJustify:L=0,vJustify:h=0}=e;this.id=t,this.handler=r,this.color=n,this.colorIndex=i,this.layer=o,this.lineType=d,this.style=f,this.startCords=l,this.endCords=a,this.threeJsCords=s,this.text=g,this.height=u,this.widthFactor=c,this.obliqueAngleRadians=y,this.rotationAngleRadians=p,this.hJustify=L,this.vJustify=h}static getMovedWithCords(e,t,r){let n=!!(3<arguments.length&&arguments[3]!==void 0)&&arguments[3],i=r.x-t.x,d=r.y-t.y;return this.getMoved(e,i,d,n)}static getMovedArrayWithCords(e,t,r){let n=r.x-t.x,i=r.y-t.y;return this.getMovedArray(e,n,i)}}exports.default=Text2DM,_Text2DM=Text2DM,_defineProperty(Text2DM,"newLine","\r\n"),_defineProperty(Text2DM,"STYLE",{romanC:"ROMANC",romanD:"ROMAND",romanS:"ROMANS"}),_defineProperty(Text2DM,"getMoved",function(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3],i=_lodash.default.cloneDeep(e);return i.startCords=_Cords2D.default.getMoved2D(e.startCords,t,r),null!==e.endCords&&(i.endCords=_Cords2D.default.getMoved2D(e.endCords,t,r)),n&&(i.id=_id.ID.getId()),i}),_defineProperty(Text2DM,"getMovedArray",function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,n=!!(3<arguments.length&&arguments[3]!==void 0)&&arguments[3];if(0===t&&0===r)return e;else{let i=[];return e.forEach(e=>i.push(_Text2DM.getMoved(e,t,r,n))),i}}),_defineProperty(Text2DM,"getScaled",function(e,t){let r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{x:0,y:0,z:0},n=_lodash.default.cloneDeep(e);return n.startCords=_Cords2D.default.getScaled2D(e.startCords,t,r),null!==e.endCords&&(n.endCords=_Cords2D.default.getScaled2D(e.endCords,t,r)),n.height=parseFloat(e.height)*t,n}),_defineProperty(Text2DM,"getScaledArray",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(1===t)return e;else{let n=[];return e.forEach(e=>n.push(_Text2DM.getScaled(e,t,r))),n}}),_defineProperty(Text2DM,"getRotated",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(0===t)return e;else{let n=parseFloat(e.startCords.x),i=parseFloat(e.startCords.y),d=_Math2D.default.getAngle_num(r.x,r.y,n,i),o=d+t;if(_Math2D.default.radians.rad360<o){let e=o/_Math2D.default.radians.rad360;o-=parseInt(e)*_Math2D.default.radians.rad360}let l=_Math2D.default.getDistance_num(r.x,r.y,n,i),a=_Math2D.default.getCordsWithLengthAndAngle(r,l,o);e.startCords.x=a.x,e.startCords.y=a.y;let s=parseFloat(e.rotationAngleRadians);return e.rotationAngleRadians=t+s,e}}),_defineProperty(Text2DM,"getRotatedArray",function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{x:0,y:0,z:0};if(0===t)return e;else{let n=[];return e.forEach(e=>n.push(_Text2DM.getRotated(e,t,r))),n}}),_defineProperty(Text2DM,"getMirrored",function(e,t){let r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"x",n=_lodash.default.cloneDeep(e);return n.startCords=_Cords2D.default.getMirrored2D(e.startCords,t,r),null!==e.endCords&&(n.endCords=_Cords2D.default.getMirrored2D(e.endCords,t,r)),n}),_defineProperty(Text2DM,"getThreeJs",e=>{let t,r;return t="0"===_lodash.default.toString(e.hJustify)?"left":"1"===_lodash.default.toString(e.hJustify)?"center":"2"===_lodash.default.toString(e.hJustify)?"right":"center",r="0"===_lodash.default.toString(e.vJustify)?"4"===e.hJustify.toString()?"middle":"bottom":"1"===_lodash.default.toString(e.vJustify)?"bottom":"2"===_lodash.default.toString(e.vJustify)?"middle":"top",React.createElement("group",{key:e.id},React.createElement(_drei.Text,{key:e.id,"position-x":null===e.endCords?e.startCords.x:e.endCords.x,"position-y":null===e.endCords?e.startCords.y:e.endCords.y,color:e.color,anchorX:t,anchorY:r,rotation:[0,0,e.rotationAngleRadians],fontSize:e.height,lineHeight:0,letterSpacing:0,textAlign:"left"}," ",e.text))}),_defineProperty(Text2DM,"getThreeJsArray",e=>{let t=[];return e.forEach(e=>t.push(_Text2DM.getThreeJs(e))),t}),_defineProperty(Text2DM,"getDxf",e=>{var t=Math.PI;let r=e.text;null===e.text||void 0===e.text?(e.text="",r=""):r=e.text.toString();let n="0"+_Text2DM.newLine+"TEXT"+_Text2DM.newLine+"5"+_Text2DM.newLine+_UtilDXF.UtilDXF.getHandler()+"100"+_Text2DM.newLine+"AcDbEntity"+_Text2DM.newLine+"8\r\n"+e.layer+_Text2DM.newLine+"6\r\n"+e.lineType+_Text2DM.newLine+"100"+_Text2DM.newLine+"AcDbText"+_Text2DM.newLine+"1"+_Text2DM.newLine;""!==r.text&&(r=r.replace("\n"," "),r=r.replace("\r\n"," "));let i="";return 0!==e.hJustify&&(i+="11"+_Text2DM.newLine+e.endCords.x+_Text2DM.newLine+"21"+_Text2DM.newLine+e.endCords.y+_Text2DM.newLine+"31"+_Text2DM.newLine+e.endCords.z+_Text2DM.newLine),n+=r+_Text2DM.newLine+"72"+_Text2DM.newLine+e.hJustify+_Text2DM.newLine+"7"+_Text2DM.newLine+e.style+_Text2DM.newLine+"10"+_Text2DM.newLine+e.startCords.x+_Text2DM.newLine+"20"+_Text2DM.newLine+e.startCords.y+_Text2DM.newLine+"30"+_Text2DM.newLine+e.startCords.z+_Text2DM.newLine+"40"+_Text2DM.newLine+e.height+_Text2DM.newLine+i+"41"+_Text2DM.newLine+e.widthFactor+_Text2DM.newLine+"50"+_Text2DM.newLine+180*e.rotationAngleRadians/t+_Text2DM.newLine+"51"+_Text2DM.newLine+180*e.obliqueAngleRadians/t+_Text2DM.newLine+"62"+_Text2DM.newLine+e.colorIndex+_Text2DM.newLine+"100"+_Text2DM.newLine+"AcDbText"+_Text2DM.newLine+"73"+_Text2DM.newLine+e.vJustify+_Text2DM.newLine,n}),_defineProperty(Text2DM,"getDxfArray",e=>{let t="";return e.forEach(e=>t+=_Text2DM.getDxf(e)),t}),"use strict",Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/es.symbol.description.js");var _Drawing=_interopRequireDefault(require("./Drawing"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}class TextStyle2DM{constructor(e){let{name:t="",description:r="",height:n="",scale:i=""}=e;this.name=t,this.description=r,this.height=n,this.scale=i}static getTextStyles(e){let t=_getStartTextStyleTableDxf._.call(TextStyle2DM,e[0]);for(let r=0;r<_Drawing.default.TextStyles.length;r++)t+=_getStartTextStyleDxf._.call(TextStyle2DM,e[r+1]),t+=_getTextStyleDXF._.call(TextStyle2DM,_Drawing.default.TextStyles[r]);return t+="0"+_Drawing.default.newLine+"ENDTAB"+_Drawing.default.newLine,t}}exports.default=TextStyle2DM;var _getStartTextStyleTableDxf={_:e=>"0"+_Drawing.default.newLine+"TABLE"+_Drawing.default.newLine+"2"+_Drawing.default.newLine+"STYLE"+_Drawing.default.newLine+"5"+_Drawing.default.newLine+e+"100"+_Drawing.default.newLine+"AcDbSymbolTable"+_Drawing.default.newLine+"70"+_Drawing.default.newLine+_Drawing.default.TextStyles.length+_Drawing.default.newLine},_getStartTextStyleDxf={_:e=>"0"+_Drawing.default.newLine+"STYLE"+_Drawing.default.newLine+"5"+_Drawing.default.newLine+e+"100"+_Drawing.default.newLine+"AcDbSymbolTableRecord"+_Drawing.default.newLine+"100"+_Drawing.default.newLine+"AcDbTextStyleTableRecord"+_Drawing.default.newLine},_getTextStyleDXF={_:e=>"2"+_Drawing.default.newLine+e.name+_Drawing.default.newLine+"70"+_Drawing.default.newLine+"0"+_Drawing.default.newLine+"40"+_Drawing.default.newLine+"0"+_Drawing.default.newLine+"41"+_Drawing.default.newLine+"1"+_Drawing.default.newLine+"50"+_Drawing.default.newLine+"0"+_Drawing.default.newLine+"71"+_Drawing.default.newLine+"0"+_Drawing.default.newLine+"42"+_Drawing.default.newLine+"2.5"+_Drawing.default.newLine+"3"+_Drawing.default.newLine+e.name+_Drawing.default.newLine+"4"+_Drawing.default.newLine+_Drawing.default.newLine};"use strict",Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/es.symbol.description.js");var _Drawing=_interopRequireDefault(require("./Drawing"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}class Ucs2DM{constructor(e){let{name:t=""}=e;this.name=t}static getUCS(e){return"0"+this.newLine+"TABLE"+this.newLine+"2"+this.newLine+"UCS"+this.newLine+"5"+this.newLine+e+"100"+this.newLine+"AcDbSymbolTable"+this.newLine+"70"+this.newLine+_Drawing.default.UCS.length+this.newLine+"0"+this.newLine+"ENDTAB"+this.newLine}}exports.default=Ucs2DM,_defineProperty(Ucs2DM,"newLine","\r\n"),"use strict",require("core-js/modules/es.symbol.description.js"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.UtilDXF=void 0,require("core-js/modules/es.regexp.to-string.js");var _UtilDXF;function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}function _assertClassBrand(r,e,t){if("function"==typeof r?r===e:r.has(e))return 3>arguments.length?e:t;throw new TypeError("Private element is not present on this object")}class UtilDXF{}exports.UtilDXF=UtilDXF,_UtilDXF=UtilDXF;var _intHandler={_:1};_defineProperty(UtilDXF,"getHandler",()=>{let e=_assertClassBrand(_UtilDXF,_UtilDXF,_intHandler)._.toString(16).toUpperCase();return"3C6"===e&&console.log(""),"D"===e&&(_intHandler._=_assertClassBrand(_UtilDXF,_UtilDXF,_assertClassBrand(_UtilDXF,_UtilDXF,_intHandler)._+1),e=_assertClassBrand(_UtilDXF,_UtilDXF,_intHandler)._.toString(16).toUpperCase()),_intHandler._=_assertClassBrand(_UtilDXF,_UtilDXF,_assertClassBrand(_UtilDXF,_UtilDXF,_intHandler)._+1),e+"\r\n"}),"use strict",Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/es.symbol.description.js");var _Drawing=_interopRequireDefault(require("./Drawing"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}class Views2DM{constructor(e){let{name:t=""}=e;this.name=t}static getViews(e){return"0"+this.newLine+"TABLE"+this.newLine+"2"+this.newLine+"VIEW"+this.newLine+"5"+this.newLine+e+"100"+this.newLine+"AcDbSymbolTable"+this.newLine+"70"+this.newLine+_Drawing.default.Views.length+this.newLine+"0"+this.newLine+"ENDTAB"+this.newLine}}exports.default=Views2DM,_defineProperty(Views2DM,"newLine","\r\n"),"use strict",Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/es.symbol.description.js");var _Drawing=_interopRequireDefault(require("./Drawing")),_VPort2DM;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}class VPort2DM{constructor(e){let{name:t=""}=e;this.name=t}static getVPorts(e){let t=_getStartVPortTableDxf._.call(VPort2DM,e[0]);for(let r=0;r<_Drawing.default.VPorts.length;r++)t+=_getStartVPortDxf._.call(VPort2DM,e[r+1]),t+=_getVPortDXF._.call(VPort2DM,_Drawing.default.VPorts[r]);return t+="0"+this.newLine+"ENDTAB"+this.newLine,t}}exports.default=VPort2DM,_VPort2DM=VPort2DM,_defineProperty(VPort2DM,"newLine","\r\n");var _getStartVPortTableDxf={_:e=>"0"+_VPort2DM.newLine+"TABLE"+_VPort2DM.newLine+"2"+_VPort2DM.newLine+"VPORT"+_VPort2DM.newLine+"5"+_VPort2DM.newLine+e+"100"+_VPort2DM.newLine+"AcDbSymbolTable"+_VPort2DM.newLine+"70"+_VPort2DM.newLine+_Drawing.default.VPorts.length+_VPort2DM.newLine},_getStartVPortDxf={_:e=>"0"+_VPort2DM.newLine+"VPORT"+_VPort2DM.newLine+"5"+_VPort2DM.newLine+e+"100"+_VPort2DM.newLine+"AcDbSymbolTableRecord"+_VPort2DM.newLine+"100"+_VPort2DM.newLine+"AcDbViewportTableRecord"+_VPort2DM.newLine},_getVPortDXF={_:e=>"2"+_VPort2DM.newLine+e.name+_VPort2DM.newLine+"40"+_VPort2DM.newLine+"1000"+_VPort2DM.newLine+"70"+_VPort2DM.newLine+"0"+_VPort2DM.newLine};"use strict",Object.defineProperty(exports,"__esModule",{value:!0}),exports._AllEntities=void 0,require("core-js/modules/es.symbol.description.js"),require("core-js/modules/web.dom-collections.iterator.js");var _Entities2D2=require("./_Entities2D"),_BlockEntities2D2=require("./_BlockEntities2D"),_ObjectEntities2=require("./_ObjectEntities"),_lodash=_interopRequireDefault(require("lodash")),_AllEntities2;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}class _AllEntities{constructor(e){let{entities2d:t=[],objectEntities2d:r=[],blockEntities2d:n=[]}=e;this.entities2d=t,this.objectEntities2d=r,this.blockEntities2d=n}static isEmpty(e){let t=!0;if(_lodash.default.isArray(e.entities2d))for(let r=0;r<e.entities2d.length&&(t=_Entities2D2._Entities2D.isEmpty(e.entities2d[r]),!!t);r++);else t=_Entities2D2._Entities2D.isEmpty(e.entities2d);let r=!0;if(_lodash.default.isArray(e.blockEntities2d))for(let t=0;t<e.blockEntities2d.length&&(r=_BlockEntities2D2._BlockEntities2D.isEmpty(e.blockEntities2d[t]),!!r);t++);else r=_BlockEntities2D2._BlockEntities2D.isEmpty(e.entities2d);let n=!0;if(_lodash.default.isArray(e.objectEntities2d))for(let t=0;t<e.objectEntities2d.length&&(n=_ObjectEntities2._ObjectEntities.isEmpty(e.objectEntities2d[t]),!!n);t++);else n=_ObjectEntities2._ObjectEntities.isEmpty(e.objectEntities2d);return t&&r&&n}static getDestructured(e){let t=[];_lodash.default.isArray(e.entities2d)?!_lodash.default.isEmpty(e.entities2d)&&t.push(...e.entities2d):!_lodash.default.isEmpty(e.entities2d)&&t.push(e.entities2d);let r=[];_lodash.default.isArray(e.blockEntities2d)?!_lodash.default.isEmpty(e.blockEntities2d)&&r.push(...e.blockEntities2d):!_lodash.default.isEmpty(e.blockEntities2d)&&r.push(e.blockEntities2d);let n=[];return _lodash.default.isArray(e.objectEntities2d)?!_lodash.default.isEmpty(e.objectEntities2d)&&n.push(...e.objectEntities2d):!_lodash.default.isEmpty(e.objectEntities2d)&&n.push(e.objectEntities2d),new _AllEntities({entities2d:t,objectEntities2d:n,blockEntities2d:r})}static getMerge(e,t){let r=this.getDestructured(e),n=this.getDestructured(t);return new _AllEntities({entities2d:[...r.entities2d,...n.entities2d],objectEntities2d:[...r.objectEntities2d,...n.objectEntities2d],blockEntities2d:[...r.blockEntities2d,...n.blockEntities2d]})}static getThreeJS(e){let t=[];if(_lodash.default.isArray(e.entities2d))for(let r=0;r<e.entities2d.length;r++)t.push(..._Entities2D2._Entities2D.getThreeJS(e.entities2d[r]));else t=_Entities2D2._Entities2D.getThreeJS(e.entities2d);let r=[];if(_lodash.default.isArray(e.blockEntities2d))for(let t=0;t<e.blockEntities2d.length;t++)r.push(..._BlockEntities2D2._BlockEntities2D.getThreeJS(e.blockEntities2d[t]));else r=_BlockEntities2D2._BlockEntities2D.getThreeJS(e.blockEntities2d);let n=[];if(_lodash.default.isArray(e.objectEntities2d))for(let t=0;t<e.objectEntities2d.length;t++)n.push(..._ObjectEntities2._ObjectEntities.getThreeJS(e.objectEntities2d[t]));else n=_ObjectEntities2._ObjectEntities.getThreeJS(e.objectEntities2d);return[...t,...r,...n]}static getDxf(e){let t="",r="";if(_lodash.default.isArray(e.entities2d))for(let n=0,i;n<e.entities2d.length;n++)i=_Entities2D2._Entities2D.getDxf(e.entities2d[n]),t+=i.dxf,r+=i.block_dxf;else{let n=_Entities2D2._Entities2D.getDxf(e.entities2d);t+=n.dxf,r+=n.block_dxf}if(_lodash.default.isArray(e.blockEntities2d))for(let n=0,i;n<e.blockEntities2d.length;n++)i=_BlockEntities2D2._BlockEntities2D.getDxf(e.blockEntities2d[n]),t+=i.dxf,r+=i.block_dxf;else{let n=_BlockEntities2D2._BlockEntities2D.getDxf(e.blockEntities2d);t+=n.dxf,r+=n.block_dxf}if(_lodash.default.isArray(e.objectEntities2d))for(let n=0,i;n<e.objectEntities2d.length;n++)i=_ObjectEntities2._ObjectEntities.getDxf(e.objectEntities2d[n]),t+=i.dxf,r+=i.block_dxf;else{let n=_ObjectEntities2._ObjectEntities.getDxf(e.objectEntities2d);t+=n.dxf,r+=n.block_dxf}return{dxf:t,block_dxf:r}}static getMoved(e,t,r){let n=[];if(_lodash.default.isArray(e.entities2d))for(let d=0,i;d<e.entities2d.length;d++)i=_lodash.default.cloneDeep(e.entities2d[d]),n.push(_Entities2D2._Entities2D.getMoved({entities:i,moveX:t,moveY:r}));else{let i=_lodash.default.cloneDeep(e.entities2d);n=_Entities2D2._Entities2D.getMoved({entities:i,moveX:t,moveY:r})}let d=[];if(_lodash.default.isArray(e.blockEntities2d))for(let n=0,i;n<e.blockEntities2d.length;n++)i=_lodash.default.cloneDeep(e.blockEntities2d[n]),d.push(_BlockEntities2D2._BlockEntities2D.getMoved({blockEntities:i,moveX:t,moveY:r}));else{let n=_lodash.default.cloneDeep(e.blockEntities2d);d=_BlockEntities2D2._BlockEntities2D.getMoved({blockEntities:n,moveX:t,moveY:r})}let o=[];if(_lodash.default.isArray(e.objectEntities2d))for(let n=0,i;n<e.objectEntities2d.length;n++)i=_lodash.default.cloneDeep(e.objectEntities2d[n]),o.push(_ObjectEntities2._ObjectEntities.getMoved({objEntities:i,moveX:t,moveY:r}));else{let n=_lodash.default.cloneDeep(e.objectEntities2d);o=_ObjectEntities2._ObjectEntities.getMoved({objEntities:n,moveX:t,moveY:r})}return new _AllEntities({entities2d:n,objectEntities2d:o,blockEntities2d:d})}static getMovedWithCords(e,t,r){let n=r.x-t.x,i=r.y-t.y;return this.getMoved(e,n,i)}static getScaled(e,t,r){let n=[];if(_lodash.default.isArray(e.entities2d))for(let d=0,i;d<e.entities2d.length;d++)i=_lodash.default.cloneDeep(e.entities2d[d]),n.push(_Entities2D2._Entities2D.getScaled({entities:i,scale:t,scalePoint:r}));else{let i=_lodash.default.cloneDeep(e.entities2d);n=_Entities2D2._Entities2D.getScaled({entities:i,scale:t,scalePoint:r})}let d=[];if(_lodash.default.isArray(e.blockEntities2d))for(let n=0,i;n<e.blockEntities2d.length;n++)i=_lodash.default.cloneDeep(e.blockEntities2d[n]),d.push(_BlockEntities2D2._BlockEntities2D.getScaled({blockEntities:i,scale:t,scalePoint:r}));else{let n=_lodash.default.cloneDeep(e.blockEntities2d);d=_BlockEntities2D2._BlockEntities2D.getScaled({blockEntities:n,scale:t,scalePoint:r})}let o=[];if(_lodash.default.isArray(e.objectEntities2d))for(let n=0,i;n<e.objectEntities2d.length;n++)i=_lodash.default.cloneDeep(e.objectEntities2d[n]),o.push(_ObjectEntities2._ObjectEntities.getScaled({objEntities:i,scale:t,scalePoint:r}));else{let n=_lodash.default.cloneDeep(e.objectEntities2d);o=_ObjectEntities2._ObjectEntities.getScaled({objEntities:n,scale:t,scalePoint:r})}return new _AllEntities({entities2d:n,objectEntities2d:o,blockEntities2d:d})}static getRotated(e,t,r){let n=[];if(_lodash.default.isArray(e.entities2d))for(let d=0,i;d<e.entities2d.length;d++)i=_lodash.default.cloneDeep(e.entities2d[d]),n.push(_Entities2D2._Entities2D.getRotated({entities:i,rotationAngle:t,rotationCords:r}));else{let i=_lodash.default.cloneDeep(e.entities2d);n=_Entities2D2._Entities2D.getRotated({entities:i,rotationAngle:t,rotationCords:r})}let d=[];if(_lodash.default.isArray(e.blockEntities2d))for(let n=0,i;n<e.blockEntities2d.length;n++)i=_lodash.default.cloneDeep(e.blockEntities2d[n]),d.push(_BlockEntities2D2._BlockEntities2D.getRotated({blockEntities:i,rotationAngle:t,rotationCords:r}));else{let n=_lodash.default.cloneDeep(e.blockEntities2d);d=_BlockEntities2D2._BlockEntities2D.getRotated({blockEntities:n,rotationAngle:t,rotationCords:r})}let o=[];if(_lodash.default.isArray(e.objectEntities2d))for(let n=0,i;n<e.objectEntities2d.length;n++)i=_lodash.default.cloneDeep(e.objectEntities2d[n]),o.push(_ObjectEntities2._ObjectEntities.getRotated({objEntities:i,rotationAngle:t,rotationCords:r}));else{let n=_lodash.default.cloneDeep(e.objectEntities2d);o=_ObjectEntities2._ObjectEntities.getRotated({objEntities:n,rotationAngle:t,rotationCords:r})}return new _AllEntities({entities2d:n,objectEntities2d:o,blockEntities2d:d})}}exports._AllEntities=_AllEntities,_AllEntities2=_AllEntities,_defineProperty(_AllEntities,"getScaledArray",(e,t,r)=>{if(_lodash.default.isEmpty(e))return e;else{let n=[];return e.forEach(e=>n.push(_AllEntities2.getScaled(e,t,r))),n}}),"use strict",Object.defineProperty(exports,"__esModule",{value:!0}),exports._BlockEntities2D=void 0,require("core-js/modules/es.symbol.description.js");var _Entities2D2=require("./_Entities2D"),_Cords2D=_interopRequireDefault(require("./Cords2D")),_Blocks2DM=_interopRequireDefault(require("./Blocks2DM"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ownKeys(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),r.push.apply(r,t)}return r}function _objectSpread(n){for(var e=1,i;e<arguments.length;e++)i=null==arguments[e]?{}:arguments[e],e%2?ownKeys(Object(i),!0).forEach(function(e){_defineProperty(n,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))});return n}function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(n,t){if("object"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}class _BlockEntities2D{constructor(e){let{blockName:t,entities2d:r=new _Entities2D2._Entities2D({}),position:n=new _Cords2D.default}=e;this.blockName=t,this.entities2d=r,this.position=n}static isEmpty(e){return _Entities2D2._Entities2D.isEmpty(e.entities2d)}static getThreeJS(e){return _Entities2D2._Entities2D.getThreeJS(e.entities2d)}static getPdfSvg(e,t){return _Entities2D2._Entities2D.getPdfSvg(e.entities2d,t)}static getThreeJSArray(e){let t=[];for(let r=0;r<e.length;r++)t.push(this.getThreeJS(e[r]));return t}static getMoved(e){let{blockEntities:t,moveX:r,moveY:n}=e,i=new _BlockEntities2D(_objectSpread({},t));return i.entities2d=_Entities2D2._Entities2D.getMoved({entities:t.entities2d,moveY:n,moveX:r}),i.position=_Cords2D.default.getMoved2D(t.position,r,n),i}static getScaled(e){let{blockEntities:t,scale:r,scalePoint:n}=e,i=new _BlockEntities2D(_objectSpread({},t));return i.entities2d=_Entities2D2._Entities2D.getScaled({entities:t.entities2d,scale:r,scalePoint:n}),i.position=_Cords2D.default.getScaled2D(t.position,r,n),i}static getRotated(e){let{blockEntities:t,rotationAngle:r,rotationCords:n}=e,i=new _BlockEntities2D(_objectSpread({},t));return i.entities2d=_Entities2D2._Entities2D.getRotated({entities:t.entities2d,rotationAngle:r,rotationCords:n}),i}static getMovedArray(e){let{blockEntitiesArr:t,moveX:r,moveY:n}=e,d=[];for(let o=0;o<t.length;o++)d.push(this.getMoved({blockEntities:t[o],moveY:n,moveX:r}));return d}static getDxf(e){let t=_Blocks2DM.default.getBlockEntitiesDXF(e);return{dxf:t.dxf,block_dxf:t.block_dxf}}}exports._BlockEntities2D=_BlockEntities2D,"use strict",Object.defineProperty(exports,"__esModule",{value:!0}),exports._DIM_ARR=void 0;var _DimH2DM=_interopRequireDefault(require("./DimH2DM")),_DimV2DM=_interopRequireDefault(require("./DimV2DM")),_DimStyle2DM=_interopRequireDefault(require("./DimStyle2DM")),_Cords2D=_interopRequireDefault(require("./Cords2D"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}class _DIM_ARR{static get_h_dimensions_arr(e){let{dimLengthArr:t,scale:d=1,dimStyle:o=null,start_from:l="l",cords:r,distanceFromBase:n,direction:a="t"}=e,s=0;const g=0;o||(o=new _DimStyle2DM.default({name:"Dim",scale:d,unit:"2",arrowSize:2,textHeight:2,gapExtExo:1}));let u=[];for(let r=0;r<t.length;r++)if(r!=t.length-1){let e=new _DimH2DM.default({dimStyle:o,leftCords:new _Cords2D.default(s,g),rightCords:new _Cords2D.default(s+t[r].length,g),distanceFromBase:n*d,isDimTop:"t"===a,text:t[r].length+" "+t[r].text});u.push(e),s+=t[r].length}let c;return c="l"===l?new _Cords2D.default(0,0):new _Cords2D.default(s,0),_DimH2DM.default.getMovedArrayWithCords(u,c,r)}static get_v_dimensions_arr(e){let{dimLengthArr:t,scale:d=1,dimStyle:o=null,start_from:l="b",cords:r,distanceFromBase:n,direction:a="l"}=e,s=0,g=0;o||(o=new _DimStyle2DM.default({name:"Dim",scale:d,unit:"2",arrowSize:2,textHeight:2,gapExtExo:1}));let u=[];for(let r=0;r<t.length;r++)if(r!=t.length-1){let e=new _DimV2DM.default({dimStyle:o,leftCords:new _Cords2D.default(s,g),rightCords:new _Cords2D.default(s+t[r],g),distanceFromBase:n*d,isDimLeft:"l"===a,text:t[r].length+" "+t[r].text});u.push(e),g+=t[r].length}let c;return c="l"===l?new _Cords2D.default(0,0):new _Cords2D.default(0,g),_DimV2DM.default.getMovedArrayWithCords(u,c,r)}}exports._DIM_ARR=_DIM_ARR,"use strict",Object.defineProperty(exports,"__esModule",{value:!0}),exports._Entities2D=void 0;var _Line2DM=_interopRequireDefault(require("./Line2DM")),_Polyline2DM=_interopRequireDefault(require("./Polyline2DM")),_Solid2DM=_interopRequireDefault(require("./Solid2DM")),_Point2DM=_interopRequireDefault(require("./Point2DM")),_Text2DM=_interopRequireDefault(require("./Text2DM")),_MText2DM=_interopRequireDefault(require("./MText2DM")),_Arc2DM=_interopRequireDefault(require("./Arc2DM")),_Circle2DM=_interopRequireDefault(require("./Circle2DM")),_Ellipse2DM=_interopRequireDefault(require("./Ellipse2DM")),_lodash=_interopRequireDefault(require("lodash"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}class _Entities2D{constructor(e){let{lineArr:t=[],pLineArr:r=[],solidArr:n=[],pointArr:i=[],textArr:d=[],mTextArr:o=[],ellipseArr:l=[],circleArr:a=[],arcArr:s=[]}=e;this.lineArr=t,this.pLineArr=r,this.solidArr=n,this.pointArr=i,this.textArr=d,this.mTextArr=o,this.ellipseArr=l,this.circleArr=a,this.arcArr=s}static isEmpty(e){let t=0!==e.lineArr.length,r=0!==e.pLineArr.length,n=0!==e.solidArr.length,i=0!==e.pointArr.length,d=0!==e.textArr.length,o=0!==e.mTextArr.length,l=0!==e.ellipseArr.length,a=0!==e.circleArr.length,s=0!==e.arcArr.length;return!t&&!r&&!n&&!i&&!d&&!o&&!l&&!a&&!s}static get_merged_entities(e,t){const r=(e,t)=>{if(_lodash.default.isArray(e))return e.concat(t)};return _lodash.default.mergeWith(e,t,r)}static getMoved(e){let{entities:t,moveX:r,moveY:n}=e,d=new _Entities2D({});for(let o=0;o<t.lineArr.length;o++)d.lineArr[o]=_Line2DM.default.getMoved(t.lineArr[o],r,n);for(let o=0;o<t.pLineArr.length;o++)d.pLineArr[o]=_Polyline2DM.default.getMoved(t.pLineArr[o],r,n);for(let o=0;o<t.solidArr.length;o++)d.solidArr[o]=_Solid2DM.default.getMoved(t.solidArr[o],r,n);for(let o=0;o<t.pointArr.length;o++)d.pointArr[o]=_Point2DM.default.getMoved(t.pointArr[o],r,n);for(let o=0;o<t.textArr.length;o++)d.textArr[o]=_Text2DM.default.getMoved(t.textArr[o],r,n);for(let o=0;o<t.mTextArr.length;o++)d.mTextArr[o]=_MText2DM.default.getMoved(t.mTextArr[o],r,n);for(let o=0;o<t.ellipseArr.length;o++)d.ellipseArr[o]=_Ellipse2DM.default.getMoved(t.ellipseArr[o],r,n);for(let o=0;o<t.circleArr.length;o++)d.circleArr[o]=_Circle2DM.default.getMoved(t.circleArr[o],r,n);for(let o=0;o<t.arcArr.length;o++)d.arcArr[o]=_Arc2DM.default.getMoved(t.arcArr[o],r,n);return d}static getMovedWithCords(e){let{entities:t,from:r,to:n}=e,i=n.x-r.x,d=n.y-r.y;return this.getMoved({entities:t,moveX:i,moveY:d})}static getRotated(e){let{entities:t,rotationAngle:r,rotationCords:n}=e;if(0!==r){let e=new _Entities2D({});for(let d=0;d<t.lineArr.length;d++)e.lineArr[d]=_Line2DM.default.getRotated(t.lineArr[d],r,n);for(let d=0;d<t.pLineArr.length;d++)e.pLineArr[d]=_Polyline2DM.default.getRotated(t.pLineArr[d],r,n);for(let d=0;d<t.solidArr.length;d++)e.solidArr[d]=_Solid2DM.default.getRotated(t.solidArr[d],r,n);for(let d=0;d<t.pointArr.length;d++)e.pointArr[d]=_Point2DM.default.getRotated(t.pointArr[d],r,n);for(let d=0;d<t.textArr.length;d++)e.textArr[d]=_Text2DM.default.getRotated(t.textArr[d],r,n);for(let d=0;d<t.mTextArr.length;d++)e.mTextArr[d]=_MText2DM.default.getRotated(t.mTextArr[d],r,n);for(let d=0;d<t.ellipseArr.length;d++)e.ellipseArr[d]=_Ellipse2DM.default.getRotated(t.ellipseArr[d],r,n);for(let d=0;d<t.circleArr.length;d++)e.circleArr[d]=_Circle2DM.default.getRotated(t.circleArr[d],r,n);for(let d=0;d<t.arcArr.length;d++)e.arcArr[d]=_Arc2DM.default.getRotated(t.arcArr[d],r,n);return e}return t}static getScaled(e){let{entities:t,scale:r,scalePoint:n}=e,d=new _Entities2D({});for(let o=0;o<t.lineArr.length;o++)d.lineArr[o]=_Line2DM.default.getScaled(t.lineArr[o],r,n);for(let o=0;o<t.pLineArr.length;o++)d.pLineArr[o]=_Polyline2DM.default.getScaled(t.pLineArr[o],r,n);for(let o=0;o<t.solidArr.length;o++)d.solidArr[o]=_Solid2DM.default.getScaled(t.solidArr[o],r,n);for(let o=0;o<t.pointArr.length;o++)d.pointArr[o]=_Point2DM.default.getScaled(t.pointArr[o],r,n);for(let o=0;o<t.textArr.length;o++)d.textArr[o]=_Text2DM.default.getScaled(t.textArr[o],r,n);for(let o=0;o<t.mTextArr.length;o++)d.mTextArr[o]=_MText2DM.default.getScaled(t.mTextArr[o],r,n);for(let o=0;o<t.ellipseArr.length;o++)d.ellipseArr[o]=_Ellipse2DM.default.getScaled(t.ellipseArr[o],r,n);for(let o=0;o<t.circleArr.length;o++)d.circleArr[o]=_Circle2DM.default.getScaled(t.circleArr[o],r,n);for(let o=0;o<t.arcArr.length;o++)d.arcArr[o]=_Arc2DM.default.getScaled(t.arcArr[o],r,n);return d}static getThreeJS(e){let t=[];for(let r=0;r<e.lineArr.length;r++)t.push(_Line2DM.default.getThreeJs(e.lineArr[r]));for(let r=0;r<e.pLineArr.length;r++)t.push(_Polyline2DM.default.getThreeJs(e.pLineArr[r]));for(let r=0;r<e.solidArr.length;r++)t.push(_Solid2DM.default.getThreeJs(e.solidArr[r]));for(let r=0;r<e.pointArr.length;r++)t.push(_Point2DM.default.getThreeJs(e.pointArr[r]));for(let r=0;r<e.textArr.length;r++)t.push(_Text2DM.default.getThreeJs(e.textArr[r]));for(let r=0;r<e.mTextArr.length;r++)t.push(_MText2DM.default.getThreeJs(e.mTextArr[r]));for(let r=0;r<e.ellipseArr.length;r++)t.push(_Ellipse2DM.default.getThreeJs(e.ellipseArr[r]));for(let r=0;r<e.circleArr.length;r++)t.push(_Circle2DM.default.getThreeJs(e.circleArr[r]));for(let r=0;r<e.arcArr.length;r++)t.push(_Arc2DM.default.getThreeJs(e.arcArr[r]));return t}static getDxf(e){let t="",r="";for(let r=0;r<e.lineArr.length;r++)t+=_Line2DM.default.getDxf(e.lineArr[r]);for(let r=0;r<e.pLineArr.length;r++)t+=_Polyline2DM.default.getDxf(e.pLineArr[r]);for(let r=0;r<e.solidArr.length;r++)t+=_Solid2DM.default.getDxf(e.solidArr[r]);for(let r=0;r<e.pointArr.length;r++)t+=_Point2DM.default.getDxf(e.pointArr[r]);for(let r=0;r<e.textArr.length;r++)t+=_Text2DM.default.getDxf(e.textArr[r]);for(let r=0;r<e.mTextArr.length;r++)t+=_MText2DM.default.getDxf(e.mTextArr[r]);for(let r=0;r<e.ellipseArr.length;r++)t+=_Ellipse2DM.default.getDxf(e.ellipseArr[r]);for(let r=0;r<e.circleArr.length;r++)t+=_Circle2DM.default.getDxf(e.circleArr[r]);for(let r=0;r<e.arcArr.length;r++)t+=_Arc2DM.default.getDxf(e.arcArr[r]);return{dxf:t,block_dxf:""}}}exports._Entities2D=_Entities2D,"use strict",Object.defineProperty(exports,"__esModule",{value:!0}),exports._ObjectEntities=void 0;var _lodash=_interopRequireDefault(require("lodash")),_DimH2DM=_interopRequireDefault(require("./DimH2DM")),_MultiLine2DM=_interopRequireDefault(require("./MultiLine2DM")),_MultiArc2DM=_interopRequireDefault(require("./MultiArc2DM")),_DimLinear2DM=_interopRequireDefault(require("./DimLinear2DM")),_DimV2DM=_interopRequireDefault(require("./DimV2DM"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}class _ObjectEntities{constructor(e){let{multiLineArr:t=[],multiArcArr:r=[],dimLinearArr:n=[],dimHArr:i=[],dimHDimArr:d=[],dimVArr:o=[],dimVDimArr:l=[],leaderDotArr:a=[],leaderArrowArr:s=[],isBlock:g=!1}=e;this.multiLineArr=t,this.multiArcArr=r,this.dimLinearArr=n,this.dimHArr=i,this.dimHDimArr=d,this.dimVArr=o,this.dimVDimArr=l,this.leaderDotArr=a,this.leaderArrowArr=s}static isEmpty(e){let t=0!==e.multiLineArr.length,r=0!==e.multiArcArr.length,n=0!==e.dimLinearArr.length,i=0!==e.dimHArr.length,d=0!==e.dimHDimArr.length,o=0!==e.dimVArr.length,l=0!==e.dimVDimArr.length,a=0!==e.leaderDotArr.length,s=0!==e.leaderArrowArr.length;return!t&&!r&&!i&&!d&&!n&&!o&&!l&&!a&&!s}static getMerged(e,t){const r=(e,t)=>{if(_lodash.default.isArray(t))return t.concat(e)};return _lodash.default.mergeWith(e,t,r)}static getMoved(e){let{objEntities:t,moveX:r,moveY:n}=e,d=new _ObjectEntities({});for(let o=0;o<t.multiLineArr.length;o++)d.multiLineArr[o]=_MultiLine2DM.default.getMoved(t.multiLineArr[o],r,n);for(let o=0;o<t.dimHArr.length;o++)d.dimHArr[o]=_DimH2DM.default.getMoved(t.dimHArr[o],r,n);for(let o=0;o<t.dimHDimArr.length;o++)d.dimHDimArr[o]=_DimH2DM.default.getMoved(t.dimHDimArr[o],r,n);for(let o=0;o<t.dimVArr.length;o++)d.dimVArr[o]=_DimV2DM.default.getMoved(t.dimVArr[o],r,n);for(let o=0;o<t.dimVDimArr.length;o++)d.dimVDimArr[o]=_DimV2DM.default.getMoved(t.dimVDimArr[o],r,n);for(let o=0;o<t.dimLinearArr.length;o++)d.dimLinearArr[o]=_DimLinear2DM.default.getMoved(t.dimLinearArr[o],r,n);for(let o=0;o<t.multiArcArr.length;o++)d.multiArcArr[o]=_MultiArc2DM.default.getMoved(t.multiArcArr[o],r,n);for(let r=0;r<t.leaderDotArr.length;r++);for(let r=0;r<t.leaderArrowArr.length;r++);return d}static getMovedWithCords(e){let{objEntities:t,from:r,to:n}=e,i=n.x-r.x,d=n.y-r.y;return this.getMoved({objEntities:t,moveX:i,moveY:d})}static getRotated(e){let{objEntities:t,rotationAngle:r,rotationCords:n}=e;if(0!==r){let e=new _ObjectEntities({});for(let d=0;d<t.multiLineArr.length;d++)e.multiLineArr[d]=_MultiLine2DM.default.getRotated(t.multiLineArr[d],r,n);for(let d=0;d<t.dimHArr.length;d++)e.dimHArr[d]=_DimH2DM.default.getRotated(t.dimHArr[d],r,n);for(let d=0;d<t.dimHDimArr.length;d++)e.dimHDimArr[d]=_DimH2DM.default.getRotated(t.dimHDimArr[d],r,n);for(let d=0;d<t.dimVArr.length;d++)e.dimVArr[d]=_DimV2DM.default.getRotated(t.dimVArr[d],r,n);for(let d=0;d<t.dimVDimArr.length;d++)e.dimVDimArr[d]=_DimV2DM.default.getRotated(t.dimVDimArr[d],r,n);for(let d=0;d<t.dimLinearArr.length;d++)e.dimLinearArr[d]=_DimLinear2DM.default.getRotated(t.dimLinearArr[d],r,n);for(let d=0;d<t.multiArcArr.length;d++)e.multiArcArr[d]=_MultiArc2DM.default.getRotated(t.multiArcArr[d],r,n);for(let e=0;e<t.leaderDotArr.length;e++);for(let e=0;e<t.leaderArrowArr.length;e++);return e}return t}static getScaled(e){let{objEntities:t,scale:r,scalePoint:n}=e,d=new _ObjectEntities({});for(let o=0;o<t.multiLineArr.length;o++)d.multiLineArr[o]=_MultiLine2DM.default.getScaled(t.multiLineArr[o],r,n);for(let o=0;o<t.dimHArr.length;o++)d.dimHArr[o]=_DimH2DM.default.getScaled(t.dimHArr[o],r,n);for(let o=0;o<t.dimHDimArr.length;o++)d.dimHDimArr[o]=_DimH2DM.default.getScaled(t.dimHDimArr[o],r,n);for(let o=0;o<t.dimVArr.length;o++)d.dimVArr[o]=_DimV2DM.default.getScaled(t.dimVArr[o],r,n);for(let o=0;o<t.dimVDimArr.length;o++)d.dimVDimArr[o]=_DimV2DM.default.getScaled(t.dimVDimArr[o],r,n);for(let o=0;o<t.dimLinearArr.length;o++)d.dimLinearArr[o]=_DimLinear2DM.default.getScaled(t.dimLinearArr[o],r,n);for(let o=0;o<t.multiArcArr.length;o++)d.multiArcArr[o]=_MultiArc2DM.default.getScaled(t.multiArcArr[o],r,n);for(let r=0;r<t.leaderDotArr.length;r++);for(let r=0;r<t.leaderArrowArr.length;r++);return d}static getThreeJS(e){let t=[];for(let r=0;r<e.multiLineArr.length;r++)t.push(_MultiLine2DM.default.getThreeJs(e.multiLineArr[r]));for(let r=0;r<e.multiArcArr.length;r++)t.push(_MultiArc2DM.default.getThreeJs(e.multiArcArr[r]));for(let r=0;r<e.dimHArr.length;r++)t.push(_DimH2DM.default.getThreeJs(e.dimHArr[r]));for(let r=0;r<e.dimHDimArr.length;r++)t.push(_DimH2DM.default.getThreeJs(e.dimHDimArr[r]));for(let r=0;r<e.dimVArr.length;r++)t.push(_DimV2DM.default.getThreeJs(e.dimVArr[r]));for(let r=0;r<e.dimVDimArr.length;r++)t.push(_DimV2DM.default.getThreeJs(e.dimVDimArr[r]));for(let r=0;r<e.dimLinearArr.length;r++)t.push(_DimLinear2DM.default.getThreeJs(e.dimLinearArr[r]));for(let t=0;t<e.leaderDotArr.length;t++);for(let t=0;t<e.leaderArrowArr.length;t++);return t}static getDxf(e){let t="",r="";for(let r=0;r<e.multiLineArr.length;r++)t+=_MultiLine2DM.default.getDxf(e.multiLineArr[r]);for(let r=0;r<e.multiArcArr.length;r++)t+=_MultiArc2DM.default.getDxf(e.multiArcArr[r]);for(let n=0,i;n<e.dimLinearArr.length;n++)i=_DimLinear2DM.default.getDxf(e.dimLinearArr[n]),t+=i.dxf,r+=i.block_dxf;for(let r=0;r<e.dimHArr.length;r++)t+=_DimH2DM.default.getDxf_entities2d(e.dimHArr[r]);for(let n=0,i;n<e.dimHDimArr.length;n++)i=_DimH2DM.default.getDimensionDxf(e.dimHDimArr[n]),t+=i.dxf,r+=i.block_dxf;for(let r=0;r<e.dimVArr.length;r++)t+=_DimV2DM.default.getDxf_entities2d(e.dimVArr[r]);for(let n=0,i;n<e.dimVDimArr.length;n++)i=_DimV2DM.default.getDimensionDxf(e.dimVDimArr[n]),t+=i.dxf,r+=i.block_dxf;for(let t=0;t<e.leaderDotArr.length;t++);for(let t=0;t<e.leaderArrowArr.length;t++);return{dxf:t,block_dxf:r}}}exports._ObjectEntities=_ObjectEntities;